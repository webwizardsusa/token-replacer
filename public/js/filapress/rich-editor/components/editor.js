var yu=Object.create;var o9=Object.defineProperty;var ku=Object.getOwnPropertyDescriptor;var bu=Object.getOwnPropertyNames;var wu=Object.getPrototypeOf,Tu=Object.prototype.hasOwnProperty;var Pu=(H,C,e)=>C in H?o9(H,C,{enumerable:!0,configurable:!0,writable:!0,value:e}):H[C]=e;var Bu=(H,C)=>()=>(C||H((C={exports:{}}).exports,C),C.exports),Eu=(H,C)=>{for(var e in C)o9(H,e,{get:C[e],enumerable:!0})},Ru=(H,C,e,V)=>{if(C&&typeof C=="object"||typeof C=="function")for(let t of bu(C))!Tu.call(H,t)&&t!==e&&o9(H,t,{get:()=>C[t],enumerable:!(V=ku(C,t))||V.enumerable});return H};var Fu=(H,C,e)=>(e=H!=null?yu(wu(H)):{},Ru(C||!H||!H.__esModule?o9(e,"default",{value:H,enumerable:!0}):e,H));var j1=(H,C,e)=>(Pu(H,typeof C!="symbol"?C+"":C,e),e);var No=Bu((r7,m4)=>{(function(){var H,C="4.17.21",e=200,V="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",t="Expected a function",r="Invalid `variable` option passed into `_.template`",i="__lodash_hash_undefined__",o=500,n="__lodash_placeholder__",l=1,s=2,d=4,p=1,m=2,c=1,h=2,S=4,O=8,E=16,D=32,N=64,R=128,W=256,X=512,i1=30,$="...",a1=800,m1=16,T1=1,P1=2,y2=3,B1=1/0,d1=9007199254740991,D1=17976931348623157e292,T5=NaN,K1=4294967295,u0=K1-1,i7=K1>>>1,T3=[["ary",R],["bind",c],["bindKey",h],["curry",O],["curryRight",E],["flip",X],["partial",D],["partialRight",N],["rearg",W]],V5="[object Arguments]",t5="[object Array]",m5="[object AsyncFunction]",L5="[object Boolean]",c5="[object Date]",P5="[object DOMException]",L3="[object Error]",m0="[object Function]",c0="[object GeneratorFunction]",k2="[object Map]",r3="[object Number]",q6="[object Null]",r5="[object Object]",M7="[object Promise]",c4="[object Proxy]",P3="[object RegExp]",b2="[object Set]",w2="[object String]",B5="[object Symbol]",f4="[object Undefined]",i3="[object WeakMap]",o7="[object WeakSet]",M3="[object ArrayBuffer]",E5="[object DataView]",f0="[object Float32Array]",x0="[object Float64Array]",j6="[object Int8Array]",J6="[object Int16Array]",X6="[object Int32Array]",Y6="[object Uint8Array]",C8="[object Uint8ClampedArray]",e8="[object Uint16Array]",H8="[object Uint32Array]",Ko=/\b__p \+= '';/g,Qo=/\b(__p \+=) '' \+/g,qo=/(__e\(.*?\)|\b__t\)) \+\n'';/g,zH=/&(?:amp|lt|gt|quot|#39);/g,UH=/[&<>"']/g,jo=RegExp(zH.source),Jo=RegExp(UH.source),Xo=/<%-([\s\S]+?)%>/g,Yo=/<%([\s\S]+?)%>/g,GH=/<%=([\s\S]+?)%>/g,Cn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,en=/^\w*$/,Hn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,V8=/[\\^$.*+?()[\]{}|]/g,Vn=RegExp(V8.source),t8=/^\s+/,tn=/\s/,Ln=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,rn=/\{\n\/\* \[wrapped with (.+)\] \*/,Mn=/,? & /,on=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,nn=/[()=,{}\[\]\/\s]/,an=/\\(\\)?/g,ln=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,$H=/\w*$/,sn=/^[-+]0x[0-9a-f]+$/i,An=/^0b[01]+$/i,dn=/^\[object .+?Constructor\]$/,pn=/^0o[0-7]+$/i,un=/^(?:0|[1-9]\d*)$/,mn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,x4=/($^)/,cn=/['\n\r\u2028\u2029\\]/g,v4="\\ud800-\\udfff",fn="\\u0300-\\u036f",xn="\\ufe20-\\ufe2f",vn="\\u20d0-\\u20ff",KH=fn+xn+vn,QH="\\u2700-\\u27bf",qH="a-z\\xdf-\\xf6\\xf8-\\xff",hn="\\xac\\xb1\\xd7\\xf7",Zn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Sn="\\u2000-\\u206f",gn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",jH="A-Z\\xc0-\\xd6\\xd8-\\xde",JH="\\ufe0e\\ufe0f",XH=hn+Zn+Sn+gn,L8="['\u2019]",On="["+v4+"]",YH="["+XH+"]",h4="["+KH+"]",CV="\\d+",yn="["+QH+"]",eV="["+qH+"]",HV="[^"+v4+XH+CV+QH+qH+jH+"]",r8="\\ud83c[\\udffb-\\udfff]",kn="(?:"+h4+"|"+r8+")",VV="[^"+v4+"]",i8="(?:\\ud83c[\\udde6-\\uddff]){2}",M8="[\\ud800-\\udbff][\\udc00-\\udfff]",v0="["+jH+"]",tV="\\u200d",LV="(?:"+eV+"|"+HV+")",bn="(?:"+v0+"|"+HV+")",rV="(?:"+L8+"(?:d|ll|m|re|s|t|ve))?",iV="(?:"+L8+"(?:D|LL|M|RE|S|T|VE))?",MV=kn+"?",oV="["+JH+"]?",wn="(?:"+tV+"(?:"+[VV,i8,M8].join("|")+")"+oV+MV+")*",Tn="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Pn="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",nV=oV+MV+wn,Bn="(?:"+[yn,i8,M8].join("|")+")"+nV,En="(?:"+[VV+h4+"?",h4,i8,M8,On].join("|")+")",Rn=RegExp(L8,"g"),Fn=RegExp(h4,"g"),o8=RegExp(r8+"(?="+r8+")|"+En+nV,"g"),Dn=RegExp([v0+"?"+eV+"+"+rV+"(?="+[YH,v0,"$"].join("|")+")",bn+"+"+iV+"(?="+[YH,v0+LV,"$"].join("|")+")",v0+"?"+LV+"+"+rV,v0+"+"+iV,Pn,Tn,CV,Bn].join("|"),"g"),Nn=RegExp("["+tV+v4+KH+JH+"]"),In=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_n=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Wn=-1,v1={};v1[f0]=v1[x0]=v1[j6]=v1[J6]=v1[X6]=v1[Y6]=v1[C8]=v1[e8]=v1[H8]=!0,v1[V5]=v1[t5]=v1[M3]=v1[L5]=v1[E5]=v1[c5]=v1[L3]=v1[m0]=v1[k2]=v1[r3]=v1[r5]=v1[P3]=v1[b2]=v1[w2]=v1[i3]=!1;var c1={};c1[V5]=c1[t5]=c1[M3]=c1[E5]=c1[L5]=c1[c5]=c1[f0]=c1[x0]=c1[j6]=c1[J6]=c1[X6]=c1[k2]=c1[r3]=c1[r5]=c1[P3]=c1[b2]=c1[w2]=c1[B5]=c1[Y6]=c1[C8]=c1[e8]=c1[H8]=!0,c1[L3]=c1[m0]=c1[i3]=!1;var zn={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Un={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Gn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},$n={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Kn=parseFloat,Qn=parseInt,aV=typeof global=="object"&&global&&global.Object===Object&&global,qn=typeof self=="object"&&self&&self.Object===Object&&self,Q1=aV||qn||Function("return this")(),n8=typeof r7=="object"&&r7&&!r7.nodeType&&r7,B3=n8&&typeof m4=="object"&&m4&&!m4.nodeType&&m4,lV=B3&&B3.exports===n8,a8=lV&&aV.process,N2=function(){try{var g=B3&&B3.require&&B3.require("util").types;return g||a8&&a8.binding&&a8.binding("util")}catch{}}(),sV=N2&&N2.isArrayBuffer,AV=N2&&N2.isDate,dV=N2&&N2.isMap,pV=N2&&N2.isRegExp,uV=N2&&N2.isSet,mV=N2&&N2.isTypedArray;function T2(g,b,k){switch(k.length){case 0:return g.call(b);case 1:return g.call(b,k[0]);case 2:return g.call(b,k[0],k[1]);case 3:return g.call(b,k[0],k[1],k[2])}return g.apply(b,k)}function jn(g,b,k,z){for(var Y=-1,s1=g==null?0:g.length;++Y<s1;){var N1=g[Y];b(z,N1,k(N1),g)}return z}function I2(g,b){for(var k=-1,z=g==null?0:g.length;++k<z&&b(g[k],k,g)!==!1;);return g}function Jn(g,b){for(var k=g==null?0:g.length;k--&&b(g[k],k,g)!==!1;);return g}function cV(g,b){for(var k=-1,z=g==null?0:g.length;++k<z;)if(!b(g[k],k,g))return!1;return!0}function o3(g,b){for(var k=-1,z=g==null?0:g.length,Y=0,s1=[];++k<z;){var N1=g[k];b(N1,k,g)&&(s1[Y++]=N1)}return s1}function Z4(g,b){var k=g==null?0:g.length;return!!k&&h0(g,b,0)>-1}function l8(g,b,k){for(var z=-1,Y=g==null?0:g.length;++z<Y;)if(k(b,g[z]))return!0;return!1}function Z1(g,b){for(var k=-1,z=g==null?0:g.length,Y=Array(z);++k<z;)Y[k]=b(g[k],k,g);return Y}function n3(g,b){for(var k=-1,z=b.length,Y=g.length;++k<z;)g[Y+k]=b[k];return g}function s8(g,b,k,z){var Y=-1,s1=g==null?0:g.length;for(z&&s1&&(k=g[++Y]);++Y<s1;)k=b(k,g[Y],Y,g);return k}function Xn(g,b,k,z){var Y=g==null?0:g.length;for(z&&Y&&(k=g[--Y]);Y--;)k=b(k,g[Y],Y,g);return k}function A8(g,b){for(var k=-1,z=g==null?0:g.length;++k<z;)if(b(g[k],k,g))return!0;return!1}var Yn=d8("length");function Ca(g){return g.split("")}function ea(g){return g.match(on)||[]}function fV(g,b,k){var z;return k(g,function(Y,s1,N1){if(b(Y,s1,N1))return z=s1,!1}),z}function S4(g,b,k,z){for(var Y=g.length,s1=k+(z?1:-1);z?s1--:++s1<Y;)if(b(g[s1],s1,g))return s1;return-1}function h0(g,b,k){return b===b?sa(g,b,k):S4(g,xV,k)}function Ha(g,b,k,z){for(var Y=k-1,s1=g.length;++Y<s1;)if(z(g[Y],b))return Y;return-1}function xV(g){return g!==g}function vV(g,b){var k=g==null?0:g.length;return k?u8(g,b)/k:T5}function d8(g){return function(b){return b==null?H:b[g]}}function p8(g){return function(b){return g==null?H:g[b]}}function hV(g,b,k,z,Y){return Y(g,function(s1,N1,u1){k=z?(z=!1,s1):b(k,s1,N1,u1)}),k}function Va(g,b){var k=g.length;for(g.sort(b);k--;)g[k]=g[k].value;return g}function u8(g,b){for(var k,z=-1,Y=g.length;++z<Y;){var s1=b(g[z]);s1!==H&&(k=k===H?s1:k+s1)}return k}function m8(g,b){for(var k=-1,z=Array(g);++k<g;)z[k]=b(k);return z}function ta(g,b){return Z1(b,function(k){return[k,g[k]]})}function ZV(g){return g&&g.slice(0,yV(g)+1).replace(t8,"")}function P2(g){return function(b){return g(b)}}function c8(g,b){return Z1(b,function(k){return g[k]})}function n7(g,b){return g.has(b)}function SV(g,b){for(var k=-1,z=g.length;++k<z&&h0(b,g[k],0)>-1;);return k}function gV(g,b){for(var k=g.length;k--&&h0(b,g[k],0)>-1;);return k}function La(g,b){for(var k=g.length,z=0;k--;)g[k]===b&&++z;return z}var ra=p8(zn),ia=p8(Un);function Ma(g){return"\\"+$n[g]}function oa(g,b){return g==null?H:g[b]}function Z0(g){return Nn.test(g)}function na(g){return In.test(g)}function aa(g){for(var b,k=[];!(b=g.next()).done;)k.push(b.value);return k}function f8(g){var b=-1,k=Array(g.size);return g.forEach(function(z,Y){k[++b]=[Y,z]}),k}function OV(g,b){return function(k){return g(b(k))}}function a3(g,b){for(var k=-1,z=g.length,Y=0,s1=[];++k<z;){var N1=g[k];(N1===b||N1===n)&&(g[k]=n,s1[Y++]=k)}return s1}function g4(g){var b=-1,k=Array(g.size);return g.forEach(function(z){k[++b]=z}),k}function la(g){var b=-1,k=Array(g.size);return g.forEach(function(z){k[++b]=[z,z]}),k}function sa(g,b,k){for(var z=k-1,Y=g.length;++z<Y;)if(g[z]===b)return z;return-1}function Aa(g,b,k){for(var z=k+1;z--;)if(g[z]===b)return z;return z}function S0(g){return Z0(g)?pa(g):Yn(g)}function i5(g){return Z0(g)?ua(g):Ca(g)}function yV(g){for(var b=g.length;b--&&tn.test(g.charAt(b)););return b}var da=p8(Gn);function pa(g){for(var b=o8.lastIndex=0;o8.test(g);)++b;return b}function ua(g){return g.match(o8)||[]}function ma(g){return g.match(Dn)||[]}var ca=function g(b){b=b==null?Q1:l3.defaults(Q1.Object(),b,l3.pick(Q1,_n));var k=b.Array,z=b.Date,Y=b.Error,s1=b.Function,N1=b.Math,u1=b.Object,x8=b.RegExp,fa=b.String,_2=b.TypeError,O4=k.prototype,xa=s1.prototype,g0=u1.prototype,y4=b["__core-js_shared__"],k4=xa.toString,p1=g0.hasOwnProperty,va=0,kV=function(){var L=/[^.]+$/.exec(y4&&y4.keys&&y4.keys.IE_PROTO||"");return L?"Symbol(src)_1."+L:""}(),b4=g0.toString,ha=k4.call(u1),Za=Q1._,Sa=x8("^"+k4.call(p1).replace(V8,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),w4=lV?b.Buffer:H,s3=b.Symbol,T4=b.Uint8Array,bV=w4?w4.allocUnsafe:H,P4=OV(u1.getPrototypeOf,u1),wV=u1.create,TV=g0.propertyIsEnumerable,B4=O4.splice,PV=s3?s3.isConcatSpreadable:H,a7=s3?s3.iterator:H,E3=s3?s3.toStringTag:H,E4=function(){try{var L=I3(u1,"defineProperty");return L({},"",{}),L}catch{}}(),ga=b.clearTimeout!==Q1.clearTimeout&&b.clearTimeout,Oa=z&&z.now!==Q1.Date.now&&z.now,ya=b.setTimeout!==Q1.setTimeout&&b.setTimeout,R4=N1.ceil,F4=N1.floor,v8=u1.getOwnPropertySymbols,ka=w4?w4.isBuffer:H,BV=b.isFinite,ba=O4.join,wa=OV(u1.keys,u1),I1=N1.max,L2=N1.min,Ta=z.now,Pa=b.parseInt,EV=N1.random,Ba=O4.reverse,h8=I3(b,"DataView"),l7=I3(b,"Map"),Z8=I3(b,"Promise"),O0=I3(b,"Set"),s7=I3(b,"WeakMap"),A7=I3(u1,"create"),D4=s7&&new s7,y0={},Ea=_3(h8),Ra=_3(l7),Fa=_3(Z8),Da=_3(O0),Na=_3(s7),N4=s3?s3.prototype:H,d7=N4?N4.valueOf:H,RV=N4?N4.toString:H;function f(L){if(O1(L)&&!C1(L)&&!(L instanceof o1)){if(L instanceof W2)return L;if(p1.call(L,"__wrapped__"))return Ft(L)}return new W2(L)}var k0=function(){function L(){}return function(M){if(!g1(M))return{};if(wV)return wV(M);L.prototype=M;var a=new L;return L.prototype=H,a}}();function I4(){}function W2(L,M){this.__wrapped__=L,this.__actions__=[],this.__chain__=!!M,this.__index__=0,this.__values__=H}f.templateSettings={escape:Xo,evaluate:Yo,interpolate:GH,variable:"",imports:{_:f}},f.prototype=I4.prototype,f.prototype.constructor=f,W2.prototype=k0(I4.prototype),W2.prototype.constructor=W2;function o1(L){this.__wrapped__=L,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=K1,this.__views__=[]}function Ia(){var L=new o1(this.__wrapped__);return L.__actions__=f2(this.__actions__),L.__dir__=this.__dir__,L.__filtered__=this.__filtered__,L.__iteratees__=f2(this.__iteratees__),L.__takeCount__=this.__takeCount__,L.__views__=f2(this.__views__),L}function _a(){if(this.__filtered__){var L=new o1(this);L.__dir__=-1,L.__filtered__=!0}else L=this.clone(),L.__dir__*=-1;return L}function Wa(){var L=this.__wrapped__.value(),M=this.__dir__,a=C1(L),A=M<0,u=a?L.length:0,x=Cs(0,u,this.__views__),v=x.start,Z=x.end,y=Z-v,w=A?Z:v-1,T=this.__iteratees__,P=T.length,I=0,G=L2(y,this.__takeCount__);if(!a||!A&&u==y&&G==y)return rt(L,this.__actions__);var q=[];C:for(;y--&&I<G;){w+=M;for(var t1=-1,j=L[w];++t1<P;){var M1=T[t1],n1=M1.iteratee,R2=M1.type,d2=n1(j);if(R2==P1)j=d2;else if(!d2){if(R2==T1)continue C;break C}}q[I++]=j}return q}o1.prototype=k0(I4.prototype),o1.prototype.constructor=o1;function R3(L){var M=-1,a=L==null?0:L.length;for(this.clear();++M<a;){var A=L[M];this.set(A[0],A[1])}}function za(){this.__data__=A7?A7(null):{},this.size=0}function Ua(L){var M=this.has(L)&&delete this.__data__[L];return this.size-=M?1:0,M}function Ga(L){var M=this.__data__;if(A7){var a=M[L];return a===i?H:a}return p1.call(M,L)?M[L]:H}function $a(L){var M=this.__data__;return A7?M[L]!==H:p1.call(M,L)}function Ka(L,M){var a=this.__data__;return this.size+=this.has(L)?0:1,a[L]=A7&&M===H?i:M,this}R3.prototype.clear=za,R3.prototype.delete=Ua,R3.prototype.get=Ga,R3.prototype.has=$a,R3.prototype.set=Ka;function R5(L){var M=-1,a=L==null?0:L.length;for(this.clear();++M<a;){var A=L[M];this.set(A[0],A[1])}}function Qa(){this.__data__=[],this.size=0}function qa(L){var M=this.__data__,a=_4(M,L);if(a<0)return!1;var A=M.length-1;return a==A?M.pop():B4.call(M,a,1),--this.size,!0}function ja(L){var M=this.__data__,a=_4(M,L);return a<0?H:M[a][1]}function Ja(L){return _4(this.__data__,L)>-1}function Xa(L,M){var a=this.__data__,A=_4(a,L);return A<0?(++this.size,a.push([L,M])):a[A][1]=M,this}R5.prototype.clear=Qa,R5.prototype.delete=qa,R5.prototype.get=ja,R5.prototype.has=Ja,R5.prototype.set=Xa;function F5(L){var M=-1,a=L==null?0:L.length;for(this.clear();++M<a;){var A=L[M];this.set(A[0],A[1])}}function Ya(){this.size=0,this.__data__={hash:new R3,map:new(l7||R5),string:new R3}}function Cl(L){var M=Y4(this,L).delete(L);return this.size-=M?1:0,M}function el(L){return Y4(this,L).get(L)}function Hl(L){return Y4(this,L).has(L)}function Vl(L,M){var a=Y4(this,L),A=a.size;return a.set(L,M),this.size+=a.size==A?0:1,this}F5.prototype.clear=Ya,F5.prototype.delete=Cl,F5.prototype.get=el,F5.prototype.has=Hl,F5.prototype.set=Vl;function F3(L){var M=-1,a=L==null?0:L.length;for(this.__data__=new F5;++M<a;)this.add(L[M])}function tl(L){return this.__data__.set(L,i),this}function Ll(L){return this.__data__.has(L)}F3.prototype.add=F3.prototype.push=tl,F3.prototype.has=Ll;function M5(L){var M=this.__data__=new R5(L);this.size=M.size}function rl(){this.__data__=new R5,this.size=0}function il(L){var M=this.__data__,a=M.delete(L);return this.size=M.size,a}function Ml(L){return this.__data__.get(L)}function ol(L){return this.__data__.has(L)}function nl(L,M){var a=this.__data__;if(a instanceof R5){var A=a.__data__;if(!l7||A.length<e-1)return A.push([L,M]),this.size=++a.size,this;a=this.__data__=new F5(A)}return a.set(L,M),this.size=a.size,this}M5.prototype.clear=rl,M5.prototype.delete=il,M5.prototype.get=Ml,M5.prototype.has=ol,M5.prototype.set=nl;function FV(L,M){var a=C1(L),A=!a&&W3(L),u=!a&&!A&&m3(L),x=!a&&!A&&!u&&P0(L),v=a||A||u||x,Z=v?m8(L.length,fa):[],y=Z.length;for(var w in L)(M||p1.call(L,w))&&!(v&&(w=="length"||u&&(w=="offset"||w=="parent")||x&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||_5(w,y)))&&Z.push(w);return Z}function DV(L){var M=L.length;return M?L[E8(0,M-1)]:H}function al(L,M){return C9(f2(L),D3(M,0,L.length))}function ll(L){return C9(f2(L))}function S8(L,M,a){(a!==H&&!o5(L[M],a)||a===H&&!(M in L))&&D5(L,M,a)}function p7(L,M,a){var A=L[M];(!(p1.call(L,M)&&o5(A,a))||a===H&&!(M in L))&&D5(L,M,a)}function _4(L,M){for(var a=L.length;a--;)if(o5(L[a][0],M))return a;return-1}function sl(L,M,a,A){return A3(L,function(u,x,v){M(A,u,a(u),v)}),A}function NV(L,M){return L&&x5(M,q1(M),L)}function Al(L,M){return L&&x5(M,v2(M),L)}function D5(L,M,a){M=="__proto__"&&E4?E4(L,M,{configurable:!0,enumerable:!0,value:a,writable:!0}):L[M]=a}function g8(L,M){for(var a=-1,A=M.length,u=k(A),x=L==null;++a<A;)u[a]=x?H:rC(L,M[a]);return u}function D3(L,M,a){return L===L&&(a!==H&&(L=L<=a?L:a),M!==H&&(L=L>=M?L:M)),L}function z2(L,M,a,A,u,x){var v,Z=M&l,y=M&s,w=M&d;if(a&&(v=u?a(L,A,u,x):a(L)),v!==H)return v;if(!g1(L))return L;var T=C1(L);if(T){if(v=Hs(L),!Z)return f2(L,v)}else{var P=r2(L),I=P==m0||P==c0;if(m3(L))return ot(L,Z);if(P==r5||P==V5||I&&!u){if(v=y||I?{}:yt(L),!Z)return y?Gl(L,Al(v,L)):Ul(L,NV(v,L))}else{if(!c1[P])return u?L:{};v=Vs(L,P,Z)}}x||(x=new M5);var G=x.get(L);if(G)return G;x.set(L,v),VL(L)?L.forEach(function(j){v.add(z2(j,M,a,j,L,x))}):eL(L)&&L.forEach(function(j,M1){v.set(M1,z2(j,M,a,M1,L,x))});var q=w?y?$8:G8:y?v2:q1,t1=T?H:q(L);return I2(t1||L,function(j,M1){t1&&(M1=j,j=L[M1]),p7(v,M1,z2(j,M,a,M1,L,x))}),v}function dl(L){var M=q1(L);return function(a){return IV(a,L,M)}}function IV(L,M,a){var A=a.length;if(L==null)return!A;for(L=u1(L);A--;){var u=a[A],x=M[u],v=L[u];if(v===H&&!(u in L)||!x(v))return!1}return!0}function _V(L,M,a){if(typeof L!="function")throw new _2(t);return h7(function(){L.apply(H,a)},M)}function u7(L,M,a,A){var u=-1,x=Z4,v=!0,Z=L.length,y=[],w=M.length;if(!Z)return y;a&&(M=Z1(M,P2(a))),A?(x=l8,v=!1):M.length>=e&&(x=n7,v=!1,M=new F3(M));C:for(;++u<Z;){var T=L[u],P=a==null?T:a(T);if(T=A||T!==0?T:0,v&&P===P){for(var I=w;I--;)if(M[I]===P)continue C;y.push(T)}else x(M,P,A)||y.push(T)}return y}var A3=At(f5),WV=At(y8,!0);function pl(L,M){var a=!0;return A3(L,function(A,u,x){return a=!!M(A,u,x),a}),a}function W4(L,M,a){for(var A=-1,u=L.length;++A<u;){var x=L[A],v=M(x);if(v!=null&&(Z===H?v===v&&!E2(v):a(v,Z)))var Z=v,y=x}return y}function ul(L,M,a,A){var u=L.length;for(a=V1(a),a<0&&(a=-a>u?0:u+a),A=A===H||A>u?u:V1(A),A<0&&(A+=u),A=a>A?0:LL(A);a<A;)L[a++]=M;return L}function zV(L,M){var a=[];return A3(L,function(A,u,x){M(A,u,x)&&a.push(A)}),a}function C2(L,M,a,A,u){var x=-1,v=L.length;for(a||(a=Ls),u||(u=[]);++x<v;){var Z=L[x];M>0&&a(Z)?M>1?C2(Z,M-1,a,A,u):n3(u,Z):A||(u[u.length]=Z)}return u}var O8=dt(),UV=dt(!0);function f5(L,M){return L&&O8(L,M,q1)}function y8(L,M){return L&&UV(L,M,q1)}function z4(L,M){return o3(M,function(a){return W5(L[a])})}function N3(L,M){M=p3(M,L);for(var a=0,A=M.length;L!=null&&a<A;)L=L[v5(M[a++])];return a&&a==A?L:H}function GV(L,M,a){var A=M(L);return C1(L)?A:n3(A,a(L))}function s2(L){return L==null?L===H?f4:q6:E3&&E3 in u1(L)?Yl(L):ss(L)}function k8(L,M){return L>M}function ml(L,M){return L!=null&&p1.call(L,M)}function cl(L,M){return L!=null&&M in u1(L)}function fl(L,M,a){return L>=L2(M,a)&&L<I1(M,a)}function b8(L,M,a){for(var A=a?l8:Z4,u=L[0].length,x=L.length,v=x,Z=k(x),y=1/0,w=[];v--;){var T=L[v];v&&M&&(T=Z1(T,P2(M))),y=L2(T.length,y),Z[v]=!a&&(M||u>=120&&T.length>=120)?new F3(v&&T):H}T=L[0];var P=-1,I=Z[0];C:for(;++P<u&&w.length<y;){var G=T[P],q=M?M(G):G;if(G=a||G!==0?G:0,!(I?n7(I,q):A(w,q,a))){for(v=x;--v;){var t1=Z[v];if(!(t1?n7(t1,q):A(L[v],q,a)))continue C}I&&I.push(q),w.push(G)}}return w}function xl(L,M,a,A){return f5(L,function(u,x,v){M(A,a(u),x,v)}),A}function m7(L,M,a){M=p3(M,L),L=Tt(L,M);var A=L==null?L:L[v5(G2(M))];return A==null?H:T2(A,L,a)}function $V(L){return O1(L)&&s2(L)==V5}function vl(L){return O1(L)&&s2(L)==M3}function hl(L){return O1(L)&&s2(L)==c5}function c7(L,M,a,A,u){return L===M?!0:L==null||M==null||!O1(L)&&!O1(M)?L!==L&&M!==M:Zl(L,M,a,A,c7,u)}function Zl(L,M,a,A,u,x){var v=C1(L),Z=C1(M),y=v?t5:r2(L),w=Z?t5:r2(M);y=y==V5?r5:y,w=w==V5?r5:w;var T=y==r5,P=w==r5,I=y==w;if(I&&m3(L)){if(!m3(M))return!1;v=!0,T=!1}if(I&&!T)return x||(x=new M5),v||P0(L)?St(L,M,a,A,u,x):Jl(L,M,y,a,A,u,x);if(!(a&p)){var G=T&&p1.call(L,"__wrapped__"),q=P&&p1.call(M,"__wrapped__");if(G||q){var t1=G?L.value():L,j=q?M.value():M;return x||(x=new M5),u(t1,j,a,A,x)}}return I?(x||(x=new M5),Xl(L,M,a,A,u,x)):!1}function Sl(L){return O1(L)&&r2(L)==k2}function w8(L,M,a,A){var u=a.length,x=u,v=!A;if(L==null)return!x;for(L=u1(L);u--;){var Z=a[u];if(v&&Z[2]?Z[1]!==L[Z[0]]:!(Z[0]in L))return!1}for(;++u<x;){Z=a[u];var y=Z[0],w=L[y],T=Z[1];if(v&&Z[2]){if(w===H&&!(y in L))return!1}else{var P=new M5;if(A)var I=A(w,T,y,L,M,P);if(!(I===H?c7(T,w,p|m,A,P):I))return!1}}return!0}function KV(L){if(!g1(L)||is(L))return!1;var M=W5(L)?Sa:dn;return M.test(_3(L))}function gl(L){return O1(L)&&s2(L)==P3}function Ol(L){return O1(L)&&r2(L)==b2}function yl(L){return O1(L)&&r9(L.length)&&!!v1[s2(L)]}function QV(L){return typeof L=="function"?L:L==null?h2:typeof L=="object"?C1(L)?JV(L[0],L[1]):jV(L):pL(L)}function T8(L){if(!v7(L))return wa(L);var M=[];for(var a in u1(L))p1.call(L,a)&&a!="constructor"&&M.push(a);return M}function kl(L){if(!g1(L))return ls(L);var M=v7(L),a=[];for(var A in L)A=="constructor"&&(M||!p1.call(L,A))||a.push(A);return a}function P8(L,M){return L<M}function qV(L,M){var a=-1,A=x2(L)?k(L.length):[];return A3(L,function(u,x,v){A[++a]=M(u,x,v)}),A}function jV(L){var M=Q8(L);return M.length==1&&M[0][2]?bt(M[0][0],M[0][1]):function(a){return a===L||w8(a,L,M)}}function JV(L,M){return j8(L)&&kt(M)?bt(v5(L),M):function(a){var A=rC(a,L);return A===H&&A===M?iC(a,L):c7(M,A,p|m)}}function U4(L,M,a,A,u){L!==M&&O8(M,function(x,v){if(u||(u=new M5),g1(x))bl(L,M,v,a,U4,A,u);else{var Z=A?A(X8(L,v),x,v+"",L,M,u):H;Z===H&&(Z=x),S8(L,v,Z)}},v2)}function bl(L,M,a,A,u,x,v){var Z=X8(L,a),y=X8(M,a),w=v.get(y);if(w){S8(L,a,w);return}var T=x?x(Z,y,a+"",L,M,v):H,P=T===H;if(P){var I=C1(y),G=!I&&m3(y),q=!I&&!G&&P0(y);T=y,I||G||q?C1(Z)?T=Z:k1(Z)?T=f2(Z):G?(P=!1,T=ot(y,!0)):q?(P=!1,T=nt(y,!0)):T=[]:Z7(y)||W3(y)?(T=Z,W3(Z)?T=rL(Z):(!g1(Z)||W5(Z))&&(T=yt(y))):P=!1}P&&(v.set(y,T),u(T,y,A,x,v),v.delete(y)),S8(L,a,T)}function XV(L,M){var a=L.length;if(a)return M+=M<0?a:0,_5(M,a)?L[M]:H}function YV(L,M,a){M.length?M=Z1(M,function(x){return C1(x)?function(v){return N3(v,x.length===1?x[0]:x)}:x}):M=[h2];var A=-1;M=Z1(M,P2(Q()));var u=qV(L,function(x,v,Z){var y=Z1(M,function(w){return w(x)});return{criteria:y,index:++A,value:x}});return Va(u,function(x,v){return zl(x,v,a)})}function wl(L,M){return Ct(L,M,function(a,A){return iC(L,A)})}function Ct(L,M,a){for(var A=-1,u=M.length,x={};++A<u;){var v=M[A],Z=N3(L,v);a(Z,v)&&f7(x,p3(v,L),Z)}return x}function Tl(L){return function(M){return N3(M,L)}}function B8(L,M,a,A){var u=A?Ha:h0,x=-1,v=M.length,Z=L;for(L===M&&(M=f2(M)),a&&(Z=Z1(L,P2(a)));++x<v;)for(var y=0,w=M[x],T=a?a(w):w;(y=u(Z,T,y,A))>-1;)Z!==L&&B4.call(Z,y,1),B4.call(L,y,1);return L}function et(L,M){for(var a=L?M.length:0,A=a-1;a--;){var u=M[a];if(a==A||u!==x){var x=u;_5(u)?B4.call(L,u,1):D8(L,u)}}return L}function E8(L,M){return L+F4(EV()*(M-L+1))}function Pl(L,M,a,A){for(var u=-1,x=I1(R4((M-L)/(a||1)),0),v=k(x);x--;)v[A?x:++u]=L,L+=a;return v}function R8(L,M){var a="";if(!L||M<1||M>d1)return a;do M%2&&(a+=L),M=F4(M/2),M&&(L+=L);while(M);return a}function r1(L,M){return Y8(wt(L,M,h2),L+"")}function Bl(L){return DV(B0(L))}function El(L,M){var a=B0(L);return C9(a,D3(M,0,a.length))}function f7(L,M,a,A){if(!g1(L))return L;M=p3(M,L);for(var u=-1,x=M.length,v=x-1,Z=L;Z!=null&&++u<x;){var y=v5(M[u]),w=a;if(y==="__proto__"||y==="constructor"||y==="prototype")return L;if(u!=v){var T=Z[y];w=A?A(T,y,Z):H,w===H&&(w=g1(T)?T:_5(M[u+1])?[]:{})}p7(Z,y,w),Z=Z[y]}return L}var Ht=D4?function(L,M){return D4.set(L,M),L}:h2,Rl=E4?function(L,M){return E4(L,"toString",{configurable:!0,enumerable:!1,value:oC(M),writable:!0})}:h2;function Fl(L){return C9(B0(L))}function U2(L,M,a){var A=-1,u=L.length;M<0&&(M=-M>u?0:u+M),a=a>u?u:a,a<0&&(a+=u),u=M>a?0:a-M>>>0,M>>>=0;for(var x=k(u);++A<u;)x[A]=L[A+M];return x}function Dl(L,M){var a;return A3(L,function(A,u,x){return a=M(A,u,x),!a}),!!a}function G4(L,M,a){var A=0,u=L==null?A:L.length;if(typeof M=="number"&&M===M&&u<=i7){for(;A<u;){var x=A+u>>>1,v=L[x];v!==null&&!E2(v)&&(a?v<=M:v<M)?A=x+1:u=x}return u}return F8(L,M,h2,a)}function F8(L,M,a,A){var u=0,x=L==null?0:L.length;if(x===0)return 0;M=a(M);for(var v=M!==M,Z=M===null,y=E2(M),w=M===H;u<x;){var T=F4((u+x)/2),P=a(L[T]),I=P!==H,G=P===null,q=P===P,t1=E2(P);if(v)var j=A||q;else w?j=q&&(A||I):Z?j=q&&I&&(A||!G):y?j=q&&I&&!G&&(A||!t1):G||t1?j=!1:j=A?P<=M:P<M;j?u=T+1:x=T}return L2(x,u0)}function Vt(L,M){for(var a=-1,A=L.length,u=0,x=[];++a<A;){var v=L[a],Z=M?M(v):v;if(!a||!o5(Z,y)){var y=Z;x[u++]=v===0?0:v}}return x}function tt(L){return typeof L=="number"?L:E2(L)?T5:+L}function B2(L){if(typeof L=="string")return L;if(C1(L))return Z1(L,B2)+"";if(E2(L))return RV?RV.call(L):"";var M=L+"";return M=="0"&&1/L==-B1?"-0":M}function d3(L,M,a){var A=-1,u=Z4,x=L.length,v=!0,Z=[],y=Z;if(a)v=!1,u=l8;else if(x>=e){var w=M?null:ql(L);if(w)return g4(w);v=!1,u=n7,y=new F3}else y=M?[]:Z;C:for(;++A<x;){var T=L[A],P=M?M(T):T;if(T=a||T!==0?T:0,v&&P===P){for(var I=y.length;I--;)if(y[I]===P)continue C;M&&y.push(P),Z.push(T)}else u(y,P,a)||(y!==Z&&y.push(P),Z.push(T))}return Z}function D8(L,M){return M=p3(M,L),L=Tt(L,M),L==null||delete L[v5(G2(M))]}function Lt(L,M,a,A){return f7(L,M,a(N3(L,M)),A)}function $4(L,M,a,A){for(var u=L.length,x=A?u:-1;(A?x--:++x<u)&&M(L[x],x,L););return a?U2(L,A?0:x,A?x+1:u):U2(L,A?x+1:0,A?u:x)}function rt(L,M){var a=L;return a instanceof o1&&(a=a.value()),s8(M,function(A,u){return u.func.apply(u.thisArg,n3([A],u.args))},a)}function N8(L,M,a){var A=L.length;if(A<2)return A?d3(L[0]):[];for(var u=-1,x=k(A);++u<A;)for(var v=L[u],Z=-1;++Z<A;)Z!=u&&(x[u]=u7(x[u]||v,L[Z],M,a));return d3(C2(x,1),M,a)}function it(L,M,a){for(var A=-1,u=L.length,x=M.length,v={};++A<u;){var Z=A<x?M[A]:H;a(v,L[A],Z)}return v}function I8(L){return k1(L)?L:[]}function _8(L){return typeof L=="function"?L:h2}function p3(L,M){return C1(L)?L:j8(L,M)?[L]:Rt(A1(L))}var Nl=r1;function u3(L,M,a){var A=L.length;return a=a===H?A:a,!M&&a>=A?L:U2(L,M,a)}var Mt=ga||function(L){return Q1.clearTimeout(L)};function ot(L,M){if(M)return L.slice();var a=L.length,A=bV?bV(a):new L.constructor(a);return L.copy(A),A}function W8(L){var M=new L.constructor(L.byteLength);return new T4(M).set(new T4(L)),M}function Il(L,M){var a=M?W8(L.buffer):L.buffer;return new L.constructor(a,L.byteOffset,L.byteLength)}function _l(L){var M=new L.constructor(L.source,$H.exec(L));return M.lastIndex=L.lastIndex,M}function Wl(L){return d7?u1(d7.call(L)):{}}function nt(L,M){var a=M?W8(L.buffer):L.buffer;return new L.constructor(a,L.byteOffset,L.length)}function at(L,M){if(L!==M){var a=L!==H,A=L===null,u=L===L,x=E2(L),v=M!==H,Z=M===null,y=M===M,w=E2(M);if(!Z&&!w&&!x&&L>M||x&&v&&y&&!Z&&!w||A&&v&&y||!a&&y||!u)return 1;if(!A&&!x&&!w&&L<M||w&&a&&u&&!A&&!x||Z&&a&&u||!v&&u||!y)return-1}return 0}function zl(L,M,a){for(var A=-1,u=L.criteria,x=M.criteria,v=u.length,Z=a.length;++A<v;){var y=at(u[A],x[A]);if(y){if(A>=Z)return y;var w=a[A];return y*(w=="desc"?-1:1)}}return L.index-M.index}function lt(L,M,a,A){for(var u=-1,x=L.length,v=a.length,Z=-1,y=M.length,w=I1(x-v,0),T=k(y+w),P=!A;++Z<y;)T[Z]=M[Z];for(;++u<v;)(P||u<x)&&(T[a[u]]=L[u]);for(;w--;)T[Z++]=L[u++];return T}function st(L,M,a,A){for(var u=-1,x=L.length,v=-1,Z=a.length,y=-1,w=M.length,T=I1(x-Z,0),P=k(T+w),I=!A;++u<T;)P[u]=L[u];for(var G=u;++y<w;)P[G+y]=M[y];for(;++v<Z;)(I||u<x)&&(P[G+a[v]]=L[u++]);return P}function f2(L,M){var a=-1,A=L.length;for(M||(M=k(A));++a<A;)M[a]=L[a];return M}function x5(L,M,a,A){var u=!a;a||(a={});for(var x=-1,v=M.length;++x<v;){var Z=M[x],y=A?A(a[Z],L[Z],Z,a,L):H;y===H&&(y=L[Z]),u?D5(a,Z,y):p7(a,Z,y)}return a}function Ul(L,M){return x5(L,q8(L),M)}function Gl(L,M){return x5(L,gt(L),M)}function K4(L,M){return function(a,A){var u=C1(a)?jn:sl,x=M?M():{};return u(a,L,Q(A,2),x)}}function b0(L){return r1(function(M,a){var A=-1,u=a.length,x=u>1?a[u-1]:H,v=u>2?a[2]:H;for(x=L.length>3&&typeof x=="function"?(u--,x):H,v&&A2(a[0],a[1],v)&&(x=u<3?H:x,u=1),M=u1(M);++A<u;){var Z=a[A];Z&&L(M,Z,A,x)}return M})}function At(L,M){return function(a,A){if(a==null)return a;if(!x2(a))return L(a,A);for(var u=a.length,x=M?u:-1,v=u1(a);(M?x--:++x<u)&&A(v[x],x,v)!==!1;);return a}}function dt(L){return function(M,a,A){for(var u=-1,x=u1(M),v=A(M),Z=v.length;Z--;){var y=v[L?Z:++u];if(a(x[y],y,x)===!1)break}return M}}function $l(L,M,a){var A=M&c,u=x7(L);function x(){var v=this&&this!==Q1&&this instanceof x?u:L;return v.apply(A?a:this,arguments)}return x}function pt(L){return function(M){M=A1(M);var a=Z0(M)?i5(M):H,A=a?a[0]:M.charAt(0),u=a?u3(a,1).join(""):M.slice(1);return A[L]()+u}}function w0(L){return function(M){return s8(AL(sL(M).replace(Rn,"")),L,"")}}function x7(L){return function(){var M=arguments;switch(M.length){case 0:return new L;case 1:return new L(M[0]);case 2:return new L(M[0],M[1]);case 3:return new L(M[0],M[1],M[2]);case 4:return new L(M[0],M[1],M[2],M[3]);case 5:return new L(M[0],M[1],M[2],M[3],M[4]);case 6:return new L(M[0],M[1],M[2],M[3],M[4],M[5]);case 7:return new L(M[0],M[1],M[2],M[3],M[4],M[5],M[6])}var a=k0(L.prototype),A=L.apply(a,M);return g1(A)?A:a}}function Kl(L,M,a){var A=x7(L);function u(){for(var x=arguments.length,v=k(x),Z=x,y=T0(u);Z--;)v[Z]=arguments[Z];var w=x<3&&v[0]!==y&&v[x-1]!==y?[]:a3(v,y);if(x-=w.length,x<a)return xt(L,M,Q4,u.placeholder,H,v,w,H,H,a-x);var T=this&&this!==Q1&&this instanceof u?A:L;return T2(T,this,v)}return u}function ut(L){return function(M,a,A){var u=u1(M);if(!x2(M)){var x=Q(a,3);M=q1(M),a=function(Z){return x(u[Z],Z,u)}}var v=L(M,a,A);return v>-1?u[x?M[v]:v]:H}}function mt(L){return I5(function(M){var a=M.length,A=a,u=W2.prototype.thru;for(L&&M.reverse();A--;){var x=M[A];if(typeof x!="function")throw new _2(t);if(u&&!v&&X4(x)=="wrapper")var v=new W2([],!0)}for(A=v?A:a;++A<a;){x=M[A];var Z=X4(x),y=Z=="wrapper"?K8(x):H;y&&J8(y[0])&&y[1]==(R|O|D|W)&&!y[4].length&&y[9]==1?v=v[X4(y[0])].apply(v,y[3]):v=x.length==1&&J8(x)?v[Z]():v.thru(x)}return function(){var w=arguments,T=w[0];if(v&&w.length==1&&C1(T))return v.plant(T).value();for(var P=0,I=a?M[P].apply(this,w):T;++P<a;)I=M[P].call(this,I);return I}})}function Q4(L,M,a,A,u,x,v,Z,y,w){var T=M&R,P=M&c,I=M&h,G=M&(O|E),q=M&X,t1=I?H:x7(L);function j(){for(var M1=arguments.length,n1=k(M1),R2=M1;R2--;)n1[R2]=arguments[R2];if(G)var d2=T0(j),F2=La(n1,d2);if(A&&(n1=lt(n1,A,u,G)),x&&(n1=st(n1,x,v,G)),M1-=F2,G&&M1<w){var b1=a3(n1,d2);return xt(L,M,Q4,j.placeholder,a,n1,b1,Z,y,w-M1)}var n5=P?a:this,U5=I?n5[L]:L;return M1=n1.length,Z?n1=As(n1,Z):q&&M1>1&&n1.reverse(),T&&y<M1&&(n1.length=y),this&&this!==Q1&&this instanceof j&&(U5=t1||x7(U5)),U5.apply(n5,n1)}return j}function ct(L,M){return function(a,A){return xl(a,L,M(A),{})}}function q4(L,M){return function(a,A){var u;if(a===H&&A===H)return M;if(a!==H&&(u=a),A!==H){if(u===H)return A;typeof a=="string"||typeof A=="string"?(a=B2(a),A=B2(A)):(a=tt(a),A=tt(A)),u=L(a,A)}return u}}function z8(L){return I5(function(M){return M=Z1(M,P2(Q())),r1(function(a){var A=this;return L(M,function(u){return T2(u,A,a)})})})}function j4(L,M){M=M===H?" ":B2(M);var a=M.length;if(a<2)return a?R8(M,L):M;var A=R8(M,R4(L/S0(M)));return Z0(M)?u3(i5(A),0,L).join(""):A.slice(0,L)}function Ql(L,M,a,A){var u=M&c,x=x7(L);function v(){for(var Z=-1,y=arguments.length,w=-1,T=A.length,P=k(T+y),I=this&&this!==Q1&&this instanceof v?x:L;++w<T;)P[w]=A[w];for(;y--;)P[w++]=arguments[++Z];return T2(I,u?a:this,P)}return v}function ft(L){return function(M,a,A){return A&&typeof A!="number"&&A2(M,a,A)&&(a=A=H),M=z5(M),a===H?(a=M,M=0):a=z5(a),A=A===H?M<a?1:-1:z5(A),Pl(M,a,A,L)}}function J4(L){return function(M,a){return typeof M=="string"&&typeof a=="string"||(M=$2(M),a=$2(a)),L(M,a)}}function xt(L,M,a,A,u,x,v,Z,y,w){var T=M&O,P=T?v:H,I=T?H:v,G=T?x:H,q=T?H:x;M|=T?D:N,M&=~(T?N:D),M&S||(M&=~(c|h));var t1=[L,M,u,G,P,q,I,Z,y,w],j=a.apply(H,t1);return J8(L)&&Pt(j,t1),j.placeholder=A,Bt(j,L,M)}function U8(L){var M=N1[L];return function(a,A){if(a=$2(a),A=A==null?0:L2(V1(A),292),A&&BV(a)){var u=(A1(a)+"e").split("e"),x=M(u[0]+"e"+(+u[1]+A));return u=(A1(x)+"e").split("e"),+(u[0]+"e"+(+u[1]-A))}return M(a)}}var ql=O0&&1/g4(new O0([,-0]))[1]==B1?function(L){return new O0(L)}:lC;function vt(L){return function(M){var a=r2(M);return a==k2?f8(M):a==b2?la(M):ta(M,L(M))}}function N5(L,M,a,A,u,x,v,Z){var y=M&h;if(!y&&typeof L!="function")throw new _2(t);var w=A?A.length:0;if(w||(M&=~(D|N),A=u=H),v=v===H?v:I1(V1(v),0),Z=Z===H?Z:V1(Z),w-=u?u.length:0,M&N){var T=A,P=u;A=u=H}var I=y?H:K8(L),G=[L,M,a,A,u,T,P,x,v,Z];if(I&&as(G,I),L=G[0],M=G[1],a=G[2],A=G[3],u=G[4],Z=G[9]=G[9]===H?y?0:L.length:I1(G[9]-w,0),!Z&&M&(O|E)&&(M&=~(O|E)),!M||M==c)var q=$l(L,M,a);else M==O||M==E?q=Kl(L,M,Z):(M==D||M==(c|D))&&!u.length?q=Ql(L,M,a,A):q=Q4.apply(H,G);var t1=I?Ht:Pt;return Bt(t1(q,G),L,M)}function ht(L,M,a,A){return L===H||o5(L,g0[a])&&!p1.call(A,a)?M:L}function Zt(L,M,a,A,u,x){return g1(L)&&g1(M)&&(x.set(M,L),U4(L,M,H,Zt,x),x.delete(M)),L}function jl(L){return Z7(L)?H:L}function St(L,M,a,A,u,x){var v=a&p,Z=L.length,y=M.length;if(Z!=y&&!(v&&y>Z))return!1;var w=x.get(L),T=x.get(M);if(w&&T)return w==M&&T==L;var P=-1,I=!0,G=a&m?new F3:H;for(x.set(L,M),x.set(M,L);++P<Z;){var q=L[P],t1=M[P];if(A)var j=v?A(t1,q,P,M,L,x):A(q,t1,P,L,M,x);if(j!==H){if(j)continue;I=!1;break}if(G){if(!A8(M,function(M1,n1){if(!n7(G,n1)&&(q===M1||u(q,M1,a,A,x)))return G.push(n1)})){I=!1;break}}else if(!(q===t1||u(q,t1,a,A,x))){I=!1;break}}return x.delete(L),x.delete(M),I}function Jl(L,M,a,A,u,x,v){switch(a){case E5:if(L.byteLength!=M.byteLength||L.byteOffset!=M.byteOffset)return!1;L=L.buffer,M=M.buffer;case M3:return!(L.byteLength!=M.byteLength||!x(new T4(L),new T4(M)));case L5:case c5:case r3:return o5(+L,+M);case L3:return L.name==M.name&&L.message==M.message;case P3:case w2:return L==M+"";case k2:var Z=f8;case b2:var y=A&p;if(Z||(Z=g4),L.size!=M.size&&!y)return!1;var w=v.get(L);if(w)return w==M;A|=m,v.set(L,M);var T=St(Z(L),Z(M),A,u,x,v);return v.delete(L),T;case B5:if(d7)return d7.call(L)==d7.call(M)}return!1}function Xl(L,M,a,A,u,x){var v=a&p,Z=G8(L),y=Z.length,w=G8(M),T=w.length;if(y!=T&&!v)return!1;for(var P=y;P--;){var I=Z[P];if(!(v?I in M:p1.call(M,I)))return!1}var G=x.get(L),q=x.get(M);if(G&&q)return G==M&&q==L;var t1=!0;x.set(L,M),x.set(M,L);for(var j=v;++P<y;){I=Z[P];var M1=L[I],n1=M[I];if(A)var R2=v?A(n1,M1,I,M,L,x):A(M1,n1,I,L,M,x);if(!(R2===H?M1===n1||u(M1,n1,a,A,x):R2)){t1=!1;break}j||(j=I=="constructor")}if(t1&&!j){var d2=L.constructor,F2=M.constructor;d2!=F2&&"constructor"in L&&"constructor"in M&&!(typeof d2=="function"&&d2 instanceof d2&&typeof F2=="function"&&F2 instanceof F2)&&(t1=!1)}return x.delete(L),x.delete(M),t1}function I5(L){return Y8(wt(L,H,It),L+"")}function G8(L){return GV(L,q1,q8)}function $8(L){return GV(L,v2,gt)}var K8=D4?function(L){return D4.get(L)}:lC;function X4(L){for(var M=L.name+"",a=y0[M],A=p1.call(y0,M)?a.length:0;A--;){var u=a[A],x=u.func;if(x==null||x==L)return u.name}return M}function T0(L){var M=p1.call(f,"placeholder")?f:L;return M.placeholder}function Q(){var L=f.iteratee||nC;return L=L===nC?QV:L,arguments.length?L(arguments[0],arguments[1]):L}function Y4(L,M){var a=L.__data__;return rs(M)?a[typeof M=="string"?"string":"hash"]:a.map}function Q8(L){for(var M=q1(L),a=M.length;a--;){var A=M[a],u=L[A];M[a]=[A,u,kt(u)]}return M}function I3(L,M){var a=oa(L,M);return KV(a)?a:H}function Yl(L){var M=p1.call(L,E3),a=L[E3];try{L[E3]=H;var A=!0}catch{}var u=b4.call(L);return A&&(M?L[E3]=a:delete L[E3]),u}var q8=v8?function(L){return L==null?[]:(L=u1(L),o3(v8(L),function(M){return TV.call(L,M)}))}:sC,gt=v8?function(L){for(var M=[];L;)n3(M,q8(L)),L=P4(L);return M}:sC,r2=s2;(h8&&r2(new h8(new ArrayBuffer(1)))!=E5||l7&&r2(new l7)!=k2||Z8&&r2(Z8.resolve())!=M7||O0&&r2(new O0)!=b2||s7&&r2(new s7)!=i3)&&(r2=function(L){var M=s2(L),a=M==r5?L.constructor:H,A=a?_3(a):"";if(A)switch(A){case Ea:return E5;case Ra:return k2;case Fa:return M7;case Da:return b2;case Na:return i3}return M});function Cs(L,M,a){for(var A=-1,u=a.length;++A<u;){var x=a[A],v=x.size;switch(x.type){case"drop":L+=v;break;case"dropRight":M-=v;break;case"take":M=L2(M,L+v);break;case"takeRight":L=I1(L,M-v);break}}return{start:L,end:M}}function es(L){var M=L.match(rn);return M?M[1].split(Mn):[]}function Ot(L,M,a){M=p3(M,L);for(var A=-1,u=M.length,x=!1;++A<u;){var v=v5(M[A]);if(!(x=L!=null&&a(L,v)))break;L=L[v]}return x||++A!=u?x:(u=L==null?0:L.length,!!u&&r9(u)&&_5(v,u)&&(C1(L)||W3(L)))}function Hs(L){var M=L.length,a=new L.constructor(M);return M&&typeof L[0]=="string"&&p1.call(L,"index")&&(a.index=L.index,a.input=L.input),a}function yt(L){return typeof L.constructor=="function"&&!v7(L)?k0(P4(L)):{}}function Vs(L,M,a){var A=L.constructor;switch(M){case M3:return W8(L);case L5:case c5:return new A(+L);case E5:return Il(L,a);case f0:case x0:case j6:case J6:case X6:case Y6:case C8:case e8:case H8:return nt(L,a);case k2:return new A;case r3:case w2:return new A(L);case P3:return _l(L);case b2:return new A;case B5:return Wl(L)}}function ts(L,M){var a=M.length;if(!a)return L;var A=a-1;return M[A]=(a>1?"& ":"")+M[A],M=M.join(a>2?", ":" "),L.replace(Ln,`{
/* [wrapped with `+M+`] */
`)}function Ls(L){return C1(L)||W3(L)||!!(PV&&L&&L[PV])}function _5(L,M){var a=typeof L;return M=M??d1,!!M&&(a=="number"||a!="symbol"&&un.test(L))&&L>-1&&L%1==0&&L<M}function A2(L,M,a){if(!g1(a))return!1;var A=typeof M;return(A=="number"?x2(a)&&_5(M,a.length):A=="string"&&M in a)?o5(a[M],L):!1}function j8(L,M){if(C1(L))return!1;var a=typeof L;return a=="number"||a=="symbol"||a=="boolean"||L==null||E2(L)?!0:en.test(L)||!Cn.test(L)||M!=null&&L in u1(M)}function rs(L){var M=typeof L;return M=="string"||M=="number"||M=="symbol"||M=="boolean"?L!=="__proto__":L===null}function J8(L){var M=X4(L),a=f[M];if(typeof a!="function"||!(M in o1.prototype))return!1;if(L===a)return!0;var A=K8(a);return!!A&&L===A[0]}function is(L){return!!kV&&kV in L}var Ms=y4?W5:AC;function v7(L){var M=L&&L.constructor,a=typeof M=="function"&&M.prototype||g0;return L===a}function kt(L){return L===L&&!g1(L)}function bt(L,M){return function(a){return a==null?!1:a[L]===M&&(M!==H||L in u1(a))}}function ns(L){var M=t9(L,function(A){return a.size===o&&a.clear(),A}),a=M.cache;return M}function as(L,M){var a=L[1],A=M[1],u=a|A,x=u<(c|h|R),v=A==R&&a==O||A==R&&a==W&&L[7].length<=M[8]||A==(R|W)&&M[7].length<=M[8]&&a==O;if(!(x||v))return L;A&c&&(L[2]=M[2],u|=a&c?0:S);var Z=M[3];if(Z){var y=L[3];L[3]=y?lt(y,Z,M[4]):Z,L[4]=y?a3(L[3],n):M[4]}return Z=M[5],Z&&(y=L[5],L[5]=y?st(y,Z,M[6]):Z,L[6]=y?a3(L[5],n):M[6]),Z=M[7],Z&&(L[7]=Z),A&R&&(L[8]=L[8]==null?M[8]:L2(L[8],M[8])),L[9]==null&&(L[9]=M[9]),L[0]=M[0],L[1]=u,L}function ls(L){var M=[];if(L!=null)for(var a in u1(L))M.push(a);return M}function ss(L){return b4.call(L)}function wt(L,M,a){return M=I1(M===H?L.length-1:M,0),function(){for(var A=arguments,u=-1,x=I1(A.length-M,0),v=k(x);++u<x;)v[u]=A[M+u];u=-1;for(var Z=k(M+1);++u<M;)Z[u]=A[u];return Z[M]=a(v),T2(L,this,Z)}}function Tt(L,M){return M.length<2?L:N3(L,U2(M,0,-1))}function As(L,M){for(var a=L.length,A=L2(M.length,a),u=f2(L);A--;){var x=M[A];L[A]=_5(x,a)?u[x]:H}return L}function X8(L,M){if(!(M==="constructor"&&typeof L[M]=="function")&&M!="__proto__")return L[M]}var Pt=Et(Ht),h7=ya||function(L,M){return Q1.setTimeout(L,M)},Y8=Et(Rl);function Bt(L,M,a){var A=M+"";return Y8(L,ts(A,ds(es(A),a)))}function Et(L){var M=0,a=0;return function(){var A=Ta(),u=m1-(A-a);if(a=A,u>0){if(++M>=a1)return arguments[0]}else M=0;return L.apply(H,arguments)}}function C9(L,M){var a=-1,A=L.length,u=A-1;for(M=M===H?A:M;++a<M;){var x=E8(a,u),v=L[x];L[x]=L[a],L[a]=v}return L.length=M,L}var Rt=ns(function(L){var M=[];return L.charCodeAt(0)===46&&M.push(""),L.replace(Hn,function(a,A,u,x){M.push(u?x.replace(an,"$1"):A||a)}),M});function v5(L){if(typeof L=="string"||E2(L))return L;var M=L+"";return M=="0"&&1/L==-B1?"-0":M}function _3(L){if(L!=null){try{return k4.call(L)}catch{}try{return L+""}catch{}}return""}function ds(L,M){return I2(T3,function(a){var A="_."+a[0];M&a[1]&&!Z4(L,A)&&L.push(A)}),L.sort()}function Ft(L){if(L instanceof o1)return L.clone();var M=new W2(L.__wrapped__,L.__chain__);return M.__actions__=f2(L.__actions__),M.__index__=L.__index__,M.__values__=L.__values__,M}function ps(L,M,a){(a?A2(L,M,a):M===H)?M=1:M=I1(V1(M),0);var A=L==null?0:L.length;if(!A||M<1)return[];for(var u=0,x=0,v=k(R4(A/M));u<A;)v[x++]=U2(L,u,u+=M);return v}function us(L){for(var M=-1,a=L==null?0:L.length,A=0,u=[];++M<a;){var x=L[M];x&&(u[A++]=x)}return u}function ms(){var L=arguments.length;if(!L)return[];for(var M=k(L-1),a=arguments[0],A=L;A--;)M[A-1]=arguments[A];return n3(C1(a)?f2(a):[a],C2(M,1))}var cs=r1(function(L,M){return k1(L)?u7(L,C2(M,1,k1,!0)):[]}),fs=r1(function(L,M){var a=G2(M);return k1(a)&&(a=H),k1(L)?u7(L,C2(M,1,k1,!0),Q(a,2)):[]}),xs=r1(function(L,M){var a=G2(M);return k1(a)&&(a=H),k1(L)?u7(L,C2(M,1,k1,!0),H,a):[]});function vs(L,M,a){var A=L==null?0:L.length;return A?(M=a||M===H?1:V1(M),U2(L,M<0?0:M,A)):[]}function hs(L,M,a){var A=L==null?0:L.length;return A?(M=a||M===H?1:V1(M),M=A-M,U2(L,0,M<0?0:M)):[]}function Zs(L,M){return L&&L.length?$4(L,Q(M,3),!0,!0):[]}function Ss(L,M){return L&&L.length?$4(L,Q(M,3),!0):[]}function gs(L,M,a,A){var u=L==null?0:L.length;return u?(a&&typeof a!="number"&&A2(L,M,a)&&(a=0,A=u),ul(L,M,a,A)):[]}function Dt(L,M,a){var A=L==null?0:L.length;if(!A)return-1;var u=a==null?0:V1(a);return u<0&&(u=I1(A+u,0)),S4(L,Q(M,3),u)}function Nt(L,M,a){var A=L==null?0:L.length;if(!A)return-1;var u=A-1;return a!==H&&(u=V1(a),u=a<0?I1(A+u,0):L2(u,A-1)),S4(L,Q(M,3),u,!0)}function It(L){var M=L==null?0:L.length;return M?C2(L,1):[]}function Os(L){var M=L==null?0:L.length;return M?C2(L,B1):[]}function ys(L,M){var a=L==null?0:L.length;return a?(M=M===H?1:V1(M),C2(L,M)):[]}function ks(L){for(var M=-1,a=L==null?0:L.length,A={};++M<a;){var u=L[M];A[u[0]]=u[1]}return A}function _t(L){return L&&L.length?L[0]:H}function bs(L,M,a){var A=L==null?0:L.length;if(!A)return-1;var u=a==null?0:V1(a);return u<0&&(u=I1(A+u,0)),h0(L,M,u)}function ws(L){var M=L==null?0:L.length;return M?U2(L,0,-1):[]}var Ts=r1(function(L){var M=Z1(L,I8);return M.length&&M[0]===L[0]?b8(M):[]}),Ps=r1(function(L){var M=G2(L),a=Z1(L,I8);return M===G2(a)?M=H:a.pop(),a.length&&a[0]===L[0]?b8(a,Q(M,2)):[]}),Bs=r1(function(L){var M=G2(L),a=Z1(L,I8);return M=typeof M=="function"?M:H,M&&a.pop(),a.length&&a[0]===L[0]?b8(a,H,M):[]});function Es(L,M){return L==null?"":ba.call(L,M)}function G2(L){var M=L==null?0:L.length;return M?L[M-1]:H}function Rs(L,M,a){var A=L==null?0:L.length;if(!A)return-1;var u=A;return a!==H&&(u=V1(a),u=u<0?I1(A+u,0):L2(u,A-1)),M===M?Aa(L,M,u):S4(L,xV,u,!0)}function Fs(L,M){return L&&L.length?XV(L,V1(M)):H}var Ds=r1(Wt);function Wt(L,M){return L&&L.length&&M&&M.length?B8(L,M):L}function Ns(L,M,a){return L&&L.length&&M&&M.length?B8(L,M,Q(a,2)):L}function Is(L,M,a){return L&&L.length&&M&&M.length?B8(L,M,H,a):L}var _s=I5(function(L,M){var a=L==null?0:L.length,A=g8(L,M);return et(L,Z1(M,function(u){return _5(u,a)?+u:u}).sort(at)),A});function Ws(L,M){var a=[];if(!(L&&L.length))return a;var A=-1,u=[],x=L.length;for(M=Q(M,3);++A<x;){var v=L[A];M(v,A,L)&&(a.push(v),u.push(A))}return et(L,u),a}function CC(L){return L==null?L:Ba.call(L)}function zs(L,M,a){var A=L==null?0:L.length;return A?(a&&typeof a!="number"&&A2(L,M,a)?(M=0,a=A):(M=M==null?0:V1(M),a=a===H?A:V1(a)),U2(L,M,a)):[]}function Us(L,M){return G4(L,M)}function Gs(L,M,a){return F8(L,M,Q(a,2))}function $s(L,M){var a=L==null?0:L.length;if(a){var A=G4(L,M);if(A<a&&o5(L[A],M))return A}return-1}function Ks(L,M){return G4(L,M,!0)}function Qs(L,M,a){return F8(L,M,Q(a,2),!0)}function qs(L,M){var a=L==null?0:L.length;if(a){var A=G4(L,M,!0)-1;if(o5(L[A],M))return A}return-1}function js(L){return L&&L.length?Vt(L):[]}function Js(L,M){return L&&L.length?Vt(L,Q(M,2)):[]}function Xs(L){var M=L==null?0:L.length;return M?U2(L,1,M):[]}function Ys(L,M,a){return L&&L.length?(M=a||M===H?1:V1(M),U2(L,0,M<0?0:M)):[]}function CA(L,M,a){var A=L==null?0:L.length;return A?(M=a||M===H?1:V1(M),M=A-M,U2(L,M<0?0:M,A)):[]}function eA(L,M){return L&&L.length?$4(L,Q(M,3),!1,!0):[]}function HA(L,M){return L&&L.length?$4(L,Q(M,3)):[]}var VA=r1(function(L){return d3(C2(L,1,k1,!0))}),tA=r1(function(L){var M=G2(L);return k1(M)&&(M=H),d3(C2(L,1,k1,!0),Q(M,2))}),LA=r1(function(L){var M=G2(L);return M=typeof M=="function"?M:H,d3(C2(L,1,k1,!0),H,M)});function rA(L){return L&&L.length?d3(L):[]}function iA(L,M){return L&&L.length?d3(L,Q(M,2)):[]}function MA(L,M){return M=typeof M=="function"?M:H,L&&L.length?d3(L,H,M):[]}function eC(L){if(!(L&&L.length))return[];var M=0;return L=o3(L,function(a){if(k1(a))return M=I1(a.length,M),!0}),m8(M,function(a){return Z1(L,d8(a))})}function zt(L,M){if(!(L&&L.length))return[];var a=eC(L);return M==null?a:Z1(a,function(A){return T2(M,H,A)})}var oA=r1(function(L,M){return k1(L)?u7(L,M):[]}),nA=r1(function(L){return N8(o3(L,k1))}),aA=r1(function(L){var M=G2(L);return k1(M)&&(M=H),N8(o3(L,k1),Q(M,2))}),lA=r1(function(L){var M=G2(L);return M=typeof M=="function"?M:H,N8(o3(L,k1),H,M)}),sA=r1(eC);function AA(L,M){return it(L||[],M||[],p7)}function dA(L,M){return it(L||[],M||[],f7)}var pA=r1(function(L){var M=L.length,a=M>1?L[M-1]:H;return a=typeof a=="function"?(L.pop(),a):H,zt(L,a)});function Ut(L){var M=f(L);return M.__chain__=!0,M}function uA(L,M){return M(L),L}function e9(L,M){return M(L)}var mA=I5(function(L){var M=L.length,a=M?L[0]:0,A=this.__wrapped__,u=function(x){return g8(x,L)};return M>1||this.__actions__.length||!(A instanceof o1)||!_5(a)?this.thru(u):(A=A.slice(a,+a+(M?1:0)),A.__actions__.push({func:e9,args:[u],thisArg:H}),new W2(A,this.__chain__).thru(function(x){return M&&!x.length&&x.push(H),x}))});function cA(){return Ut(this)}function fA(){return new W2(this.value(),this.__chain__)}function xA(){this.__values__===H&&(this.__values__=tL(this.value()));var L=this.__index__>=this.__values__.length,M=L?H:this.__values__[this.__index__++];return{done:L,value:M}}function vA(){return this}function hA(L){for(var M,a=this;a instanceof I4;){var A=Ft(a);A.__index__=0,A.__values__=H,M?u.__wrapped__=A:M=A;var u=A;a=a.__wrapped__}return u.__wrapped__=L,M}function ZA(){var L=this.__wrapped__;if(L instanceof o1){var M=L;return this.__actions__.length&&(M=new o1(this)),M=M.reverse(),M.__actions__.push({func:e9,args:[CC],thisArg:H}),new W2(M,this.__chain__)}return this.thru(CC)}function SA(){return rt(this.__wrapped__,this.__actions__)}var gA=K4(function(L,M,a){p1.call(L,a)?++L[a]:D5(L,a,1)});function OA(L,M,a){var A=C1(L)?cV:pl;return a&&A2(L,M,a)&&(M=H),A(L,Q(M,3))}function yA(L,M){var a=C1(L)?o3:zV;return a(L,Q(M,3))}var kA=ut(Dt),bA=ut(Nt);function wA(L,M){return C2(H9(L,M),1)}function TA(L,M){return C2(H9(L,M),B1)}function PA(L,M,a){return a=a===H?1:V1(a),C2(H9(L,M),a)}function Gt(L,M){var a=C1(L)?I2:A3;return a(L,Q(M,3))}function $t(L,M){var a=C1(L)?Jn:WV;return a(L,Q(M,3))}var BA=K4(function(L,M,a){p1.call(L,a)?L[a].push(M):D5(L,a,[M])});function EA(L,M,a,A){L=x2(L)?L:B0(L),a=a&&!A?V1(a):0;var u=L.length;return a<0&&(a=I1(u+a,0)),i9(L)?a<=u&&L.indexOf(M,a)>-1:!!u&&h0(L,M,a)>-1}var RA=r1(function(L,M,a){var A=-1,u=typeof M=="function",x=x2(L)?k(L.length):[];return A3(L,function(v){x[++A]=u?T2(M,v,a):m7(v,M,a)}),x}),FA=K4(function(L,M,a){D5(L,a,M)});function H9(L,M){var a=C1(L)?Z1:qV;return a(L,Q(M,3))}function DA(L,M,a,A){return L==null?[]:(C1(M)||(M=M==null?[]:[M]),a=A?H:a,C1(a)||(a=a==null?[]:[a]),YV(L,M,a))}var NA=K4(function(L,M,a){L[a?0:1].push(M)},function(){return[[],[]]});function IA(L,M,a){var A=C1(L)?s8:hV,u=arguments.length<3;return A(L,Q(M,4),a,u,A3)}function _A(L,M,a){var A=C1(L)?Xn:hV,u=arguments.length<3;return A(L,Q(M,4),a,u,WV)}function WA(L,M){var a=C1(L)?o3:zV;return a(L,L9(Q(M,3)))}function zA(L){var M=C1(L)?DV:Bl;return M(L)}function UA(L,M,a){(a?A2(L,M,a):M===H)?M=1:M=V1(M);var A=C1(L)?al:El;return A(L,M)}function GA(L){var M=C1(L)?ll:Fl;return M(L)}function $A(L){if(L==null)return 0;if(x2(L))return i9(L)?S0(L):L.length;var M=r2(L);return M==k2||M==b2?L.size:T8(L).length}function KA(L,M,a){var A=C1(L)?A8:Dl;return a&&A2(L,M,a)&&(M=H),A(L,Q(M,3))}var QA=r1(function(L,M){if(L==null)return[];var a=M.length;return a>1&&A2(L,M[0],M[1])?M=[]:a>2&&A2(M[0],M[1],M[2])&&(M=[M[0]]),YV(L,C2(M,1),[])}),V9=Oa||function(){return Q1.Date.now()};function qA(L,M){if(typeof M!="function")throw new _2(t);return L=V1(L),function(){if(--L<1)return M.apply(this,arguments)}}function Kt(L,M,a){return M=a?H:M,M=L&&M==null?L.length:M,N5(L,R,H,H,H,H,M)}function Qt(L,M){var a;if(typeof M!="function")throw new _2(t);return L=V1(L),function(){return--L>0&&(a=M.apply(this,arguments)),L<=1&&(M=H),a}}var HC=r1(function(L,M,a){var A=c;if(a.length){var u=a3(a,T0(HC));A|=D}return N5(L,A,M,a,u)}),qt=r1(function(L,M,a){var A=c|h;if(a.length){var u=a3(a,T0(qt));A|=D}return N5(M,A,L,a,u)});function jt(L,M,a){M=a?H:M;var A=N5(L,O,H,H,H,H,H,M);return A.placeholder=jt.placeholder,A}function Jt(L,M,a){M=a?H:M;var A=N5(L,E,H,H,H,H,H,M);return A.placeholder=Jt.placeholder,A}function Xt(L,M,a){var A,u,x,v,Z,y,w=0,T=!1,P=!1,I=!0;if(typeof L!="function")throw new _2(t);M=$2(M)||0,g1(a)&&(T=!!a.leading,P="maxWait"in a,x=P?I1($2(a.maxWait)||0,M):x,I="trailing"in a?!!a.trailing:I);function G(b1){var n5=A,U5=u;return A=u=H,w=b1,v=L.apply(U5,n5),v}function q(b1){return w=b1,Z=h7(M1,M),T?G(b1):v}function t1(b1){var n5=b1-y,U5=b1-w,uL=M-n5;return P?L2(uL,x-U5):uL}function j(b1){var n5=b1-y,U5=b1-w;return y===H||n5>=M||n5<0||P&&U5>=x}function M1(){var b1=V9();if(j(b1))return n1(b1);Z=h7(M1,t1(b1))}function n1(b1){return Z=H,I&&A?G(b1):(A=u=H,v)}function R2(){Z!==H&&Mt(Z),w=0,A=y=u=Z=H}function d2(){return Z===H?v:n1(V9())}function F2(){var b1=V9(),n5=j(b1);if(A=arguments,u=this,y=b1,n5){if(Z===H)return q(y);if(P)return Mt(Z),Z=h7(M1,M),G(y)}return Z===H&&(Z=h7(M1,M)),v}return F2.cancel=R2,F2.flush=d2,F2}var jA=r1(function(L,M){return _V(L,1,M)}),JA=r1(function(L,M,a){return _V(L,$2(M)||0,a)});function XA(L){return N5(L,X)}function t9(L,M){if(typeof L!="function"||M!=null&&typeof M!="function")throw new _2(t);var a=function(){var A=arguments,u=M?M.apply(this,A):A[0],x=a.cache;if(x.has(u))return x.get(u);var v=L.apply(this,A);return a.cache=x.set(u,v)||x,v};return a.cache=new(t9.Cache||F5),a}t9.Cache=F5;function L9(L){if(typeof L!="function")throw new _2(t);return function(){var M=arguments;switch(M.length){case 0:return!L.call(this);case 1:return!L.call(this,M[0]);case 2:return!L.call(this,M[0],M[1]);case 3:return!L.call(this,M[0],M[1],M[2])}return!L.apply(this,M)}}function YA(L){return Qt(2,L)}var Cd=Nl(function(L,M){M=M.length==1&&C1(M[0])?Z1(M[0],P2(Q())):Z1(C2(M,1),P2(Q()));var a=M.length;return r1(function(A){for(var u=-1,x=L2(A.length,a);++u<x;)A[u]=M[u].call(this,A[u]);return T2(L,this,A)})}),VC=r1(function(L,M){var a=a3(M,T0(VC));return N5(L,D,H,M,a)}),Yt=r1(function(L,M){var a=a3(M,T0(Yt));return N5(L,N,H,M,a)}),ed=I5(function(L,M){return N5(L,W,H,H,H,M)});function Hd(L,M){if(typeof L!="function")throw new _2(t);return M=M===H?M:V1(M),r1(L,M)}function Vd(L,M){if(typeof L!="function")throw new _2(t);return M=M==null?0:I1(V1(M),0),r1(function(a){var A=a[M],u=u3(a,0,M);return A&&n3(u,A),T2(L,this,u)})}function td(L,M,a){var A=!0,u=!0;if(typeof L!="function")throw new _2(t);return g1(a)&&(A="leading"in a?!!a.leading:A,u="trailing"in a?!!a.trailing:u),Xt(L,M,{leading:A,maxWait:M,trailing:u})}function Ld(L){return Kt(L,1)}function rd(L,M){return VC(_8(M),L)}function id(){if(!arguments.length)return[];var L=arguments[0];return C1(L)?L:[L]}function Md(L){return z2(L,d)}function od(L,M){return M=typeof M=="function"?M:H,z2(L,d,M)}function nd(L){return z2(L,l|d)}function ad(L,M){return M=typeof M=="function"?M:H,z2(L,l|d,M)}function ld(L,M){return M==null||IV(L,M,q1(M))}function o5(L,M){return L===M||L!==L&&M!==M}var sd=J4(k8),Ad=J4(function(L,M){return L>=M}),W3=$V(function(){return arguments}())?$V:function(L){return O1(L)&&p1.call(L,"callee")&&!TV.call(L,"callee")},C1=k.isArray,dd=sV?P2(sV):vl;function x2(L){return L!=null&&r9(L.length)&&!W5(L)}function k1(L){return O1(L)&&x2(L)}function pd(L){return L===!0||L===!1||O1(L)&&s2(L)==L5}var m3=ka||AC,ud=AV?P2(AV):hl;function md(L){return O1(L)&&L.nodeType===1&&!Z7(L)}function cd(L){if(L==null)return!0;if(x2(L)&&(C1(L)||typeof L=="string"||typeof L.splice=="function"||m3(L)||P0(L)||W3(L)))return!L.length;var M=r2(L);if(M==k2||M==b2)return!L.size;if(v7(L))return!T8(L).length;for(var a in L)if(p1.call(L,a))return!1;return!0}function fd(L,M){return c7(L,M)}function xd(L,M,a){a=typeof a=="function"?a:H;var A=a?a(L,M):H;return A===H?c7(L,M,H,a):!!A}function tC(L){if(!O1(L))return!1;var M=s2(L);return M==L3||M==P5||typeof L.message=="string"&&typeof L.name=="string"&&!Z7(L)}function vd(L){return typeof L=="number"&&BV(L)}function W5(L){if(!g1(L))return!1;var M=s2(L);return M==m0||M==c0||M==m5||M==c4}function CL(L){return typeof L=="number"&&L==V1(L)}function r9(L){return typeof L=="number"&&L>-1&&L%1==0&&L<=d1}function g1(L){var M=typeof L;return L!=null&&(M=="object"||M=="function")}function O1(L){return L!=null&&typeof L=="object"}var eL=dV?P2(dV):Sl;function hd(L,M){return L===M||w8(L,M,Q8(M))}function Zd(L,M,a){return a=typeof a=="function"?a:H,w8(L,M,Q8(M),a)}function Sd(L){return HL(L)&&L!=+L}function gd(L){if(Ms(L))throw new Y(V);return KV(L)}function Od(L){return L===null}function yd(L){return L==null}function HL(L){return typeof L=="number"||O1(L)&&s2(L)==r3}function Z7(L){if(!O1(L)||s2(L)!=r5)return!1;var M=P4(L);if(M===null)return!0;var a=p1.call(M,"constructor")&&M.constructor;return typeof a=="function"&&a instanceof a&&k4.call(a)==ha}var LC=pV?P2(pV):gl;function kd(L){return CL(L)&&L>=-d1&&L<=d1}var VL=uV?P2(uV):Ol;function i9(L){return typeof L=="string"||!C1(L)&&O1(L)&&s2(L)==w2}function E2(L){return typeof L=="symbol"||O1(L)&&s2(L)==B5}var P0=mV?P2(mV):yl;function bd(L){return L===H}function wd(L){return O1(L)&&r2(L)==i3}function Td(L){return O1(L)&&s2(L)==o7}var Pd=J4(P8),Bd=J4(function(L,M){return L<=M});function tL(L){if(!L)return[];if(x2(L))return i9(L)?i5(L):f2(L);if(a7&&L[a7])return aa(L[a7]());var M=r2(L),a=M==k2?f8:M==b2?g4:B0;return a(L)}function z5(L){if(!L)return L===0?L:0;if(L=$2(L),L===B1||L===-B1){var M=L<0?-1:1;return M*D1}return L===L?L:0}function V1(L){var M=z5(L),a=M%1;return M===M?a?M-a:M:0}function LL(L){return L?D3(V1(L),0,K1):0}function $2(L){if(typeof L=="number")return L;if(E2(L))return T5;if(g1(L)){var M=typeof L.valueOf=="function"?L.valueOf():L;L=g1(M)?M+"":M}if(typeof L!="string")return L===0?L:+L;L=ZV(L);var a=An.test(L);return a||pn.test(L)?Qn(L.slice(2),a?2:8):sn.test(L)?T5:+L}function rL(L){return x5(L,v2(L))}function Ed(L){return L?D3(V1(L),-d1,d1):L===0?L:0}function A1(L){return L==null?"":B2(L)}var Rd=b0(function(L,M){if(v7(M)||x2(M)){x5(M,q1(M),L);return}for(var a in M)p1.call(M,a)&&p7(L,a,M[a])}),iL=b0(function(L,M){x5(M,v2(M),L)}),M9=b0(function(L,M,a,A){x5(M,v2(M),L,A)}),Fd=b0(function(L,M,a,A){x5(M,q1(M),L,A)}),Dd=I5(g8);function Nd(L,M){var a=k0(L);return M==null?a:NV(a,M)}var Id=r1(function(L,M){L=u1(L);var a=-1,A=M.length,u=A>2?M[2]:H;for(u&&A2(M[0],M[1],u)&&(A=1);++a<A;)for(var x=M[a],v=v2(x),Z=-1,y=v.length;++Z<y;){var w=v[Z],T=L[w];(T===H||o5(T,g0[w])&&!p1.call(L,w))&&(L[w]=x[w])}return L}),_d=r1(function(L){return L.push(H,Zt),T2(ML,H,L)});function Wd(L,M){return fV(L,Q(M,3),f5)}function zd(L,M){return fV(L,Q(M,3),y8)}function Ud(L,M){return L==null?L:O8(L,Q(M,3),v2)}function Gd(L,M){return L==null?L:UV(L,Q(M,3),v2)}function $d(L,M){return L&&f5(L,Q(M,3))}function Kd(L,M){return L&&y8(L,Q(M,3))}function Qd(L){return L==null?[]:z4(L,q1(L))}function qd(L){return L==null?[]:z4(L,v2(L))}function rC(L,M,a){var A=L==null?H:N3(L,M);return A===H?a:A}function jd(L,M){return L!=null&&Ot(L,M,ml)}function iC(L,M){return L!=null&&Ot(L,M,cl)}var Jd=ct(function(L,M,a){M!=null&&typeof M.toString!="function"&&(M=b4.call(M)),L[M]=a},oC(h2)),Xd=ct(function(L,M,a){M!=null&&typeof M.toString!="function"&&(M=b4.call(M)),p1.call(L,M)?L[M].push(a):L[M]=[a]},Q),Yd=r1(m7);function q1(L){return x2(L)?FV(L):T8(L)}function v2(L){return x2(L)?FV(L,!0):kl(L)}function Cp(L,M){var a={};return M=Q(M,3),f5(L,function(A,u,x){D5(a,M(A,u,x),A)}),a}function ep(L,M){var a={};return M=Q(M,3),f5(L,function(A,u,x){D5(a,u,M(A,u,x))}),a}var Hp=b0(function(L,M,a){U4(L,M,a)}),ML=b0(function(L,M,a,A){U4(L,M,a,A)}),Vp=I5(function(L,M){var a={};if(L==null)return a;var A=!1;M=Z1(M,function(x){return x=p3(x,L),A||(A=x.length>1),x}),x5(L,$8(L),a),A&&(a=z2(a,l|s|d,jl));for(var u=M.length;u--;)D8(a,M[u]);return a});function tp(L,M){return oL(L,L9(Q(M)))}var Lp=I5(function(L,M){return L==null?{}:wl(L,M)});function oL(L,M){if(L==null)return{};var a=Z1($8(L),function(A){return[A]});return M=Q(M),Ct(L,a,function(A,u){return M(A,u[0])})}function rp(L,M,a){M=p3(M,L);var A=-1,u=M.length;for(u||(u=1,L=H);++A<u;){var x=L==null?H:L[v5(M[A])];x===H&&(A=u,x=a),L=W5(x)?x.call(L):x}return L}function ip(L,M,a){return L==null?L:f7(L,M,a)}function Mp(L,M,a,A){return A=typeof A=="function"?A:H,L==null?L:f7(L,M,a,A)}var nL=vt(q1),aL=vt(v2);function op(L,M,a){var A=C1(L),u=A||m3(L)||P0(L);if(M=Q(M,4),a==null){var x=L&&L.constructor;u?a=A?new x:[]:g1(L)?a=W5(x)?k0(P4(L)):{}:a={}}return(u?I2:f5)(L,function(v,Z,y){return M(a,v,Z,y)}),a}function np(L,M){return L==null?!0:D8(L,M)}function ap(L,M,a){return L==null?L:Lt(L,M,_8(a))}function lp(L,M,a,A){return A=typeof A=="function"?A:H,L==null?L:Lt(L,M,_8(a),A)}function B0(L){return L==null?[]:c8(L,q1(L))}function sp(L){return L==null?[]:c8(L,v2(L))}function Ap(L,M,a){return a===H&&(a=M,M=H),a!==H&&(a=$2(a),a=a===a?a:0),M!==H&&(M=$2(M),M=M===M?M:0),D3($2(L),M,a)}function dp(L,M,a){return M=z5(M),a===H?(a=M,M=0):a=z5(a),L=$2(L),fl(L,M,a)}function pp(L,M,a){if(a&&typeof a!="boolean"&&A2(L,M,a)&&(M=a=H),a===H&&(typeof M=="boolean"?(a=M,M=H):typeof L=="boolean"&&(a=L,L=H)),L===H&&M===H?(L=0,M=1):(L=z5(L),M===H?(M=L,L=0):M=z5(M)),L>M){var A=L;L=M,M=A}if(a||L%1||M%1){var u=EV();return L2(L+u*(M-L+Kn("1e-"+((u+"").length-1))),M)}return E8(L,M)}var up=w0(function(L,M,a){return M=M.toLowerCase(),L+(a?lL(M):M)});function lL(L){return MC(A1(L).toLowerCase())}function sL(L){return L=A1(L),L&&L.replace(mn,ra).replace(Fn,"")}function mp(L,M,a){L=A1(L),M=B2(M);var A=L.length;a=a===H?A:D3(V1(a),0,A);var u=a;return a-=M.length,a>=0&&L.slice(a,u)==M}function cp(L){return L=A1(L),L&&Jo.test(L)?L.replace(UH,ia):L}function fp(L){return L=A1(L),L&&Vn.test(L)?L.replace(V8,"\\$&"):L}var xp=w0(function(L,M,a){return L+(a?"-":"")+M.toLowerCase()}),vp=w0(function(L,M,a){return L+(a?" ":"")+M.toLowerCase()}),hp=pt("toLowerCase");function Zp(L,M,a){L=A1(L),M=V1(M);var A=M?S0(L):0;if(!M||A>=M)return L;var u=(M-A)/2;return j4(F4(u),a)+L+j4(R4(u),a)}function Sp(L,M,a){L=A1(L),M=V1(M);var A=M?S0(L):0;return M&&A<M?L+j4(M-A,a):L}function gp(L,M,a){L=A1(L),M=V1(M);var A=M?S0(L):0;return M&&A<M?j4(M-A,a)+L:L}function Op(L,M,a){return a||M==null?M=0:M&&(M=+M),Pa(A1(L).replace(t8,""),M||0)}function yp(L,M,a){return(a?A2(L,M,a):M===H)?M=1:M=V1(M),R8(A1(L),M)}function kp(){var L=arguments,M=A1(L[0]);return L.length<3?M:M.replace(L[1],L[2])}var bp=w0(function(L,M,a){return L+(a?"_":"")+M.toLowerCase()});function wp(L,M,a){return a&&typeof a!="number"&&A2(L,M,a)&&(M=a=H),a=a===H?K1:a>>>0,a?(L=A1(L),L&&(typeof M=="string"||M!=null&&!LC(M))&&(M=B2(M),!M&&Z0(L))?u3(i5(L),0,a):L.split(M,a)):[]}var Tp=w0(function(L,M,a){return L+(a?" ":"")+MC(M)});function Pp(L,M,a){return L=A1(L),a=a==null?0:D3(V1(a),0,L.length),M=B2(M),L.slice(a,a+M.length)==M}function Bp(L,M,a){var A=f.templateSettings;a&&A2(L,M,a)&&(M=H),L=A1(L),M=M9({},M,A,ht);var u=M9({},M.imports,A.imports,ht),x=q1(u),v=c8(u,x),Z,y,w=0,T=M.interpolate||x4,P="__p += '",I=x8((M.escape||x4).source+"|"+T.source+"|"+(T===GH?ln:x4).source+"|"+(M.evaluate||x4).source+"|$","g"),G="//# sourceURL="+(p1.call(M,"sourceURL")?(M.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Wn+"]")+`
`;L.replace(I,function(j,M1,n1,R2,d2,F2){return n1||(n1=R2),P+=L.slice(w,F2).replace(cn,Ma),M1&&(Z=!0,P+=`' +
__e(`+M1+`) +
'`),d2&&(y=!0,P+=`';
`+d2+`;
__p += '`),n1&&(P+=`' +
((__t = (`+n1+`)) == null ? '' : __t) +
'`),w=F2+j.length,j}),P+=`';
`;var q=p1.call(M,"variable")&&M.variable;if(!q)P=`with (obj) {
`+P+`
}
`;else if(nn.test(q))throw new Y(r);P=(y?P.replace(Ko,""):P).replace(Qo,"$1").replace(qo,"$1;"),P="function("+(q||"obj")+`) {
`+(q?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Z?", __e = _.escape":"")+(y?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+P+`return __p
}`;var t1=dL(function(){return s1(x,G+"return "+P).apply(H,v)});if(t1.source=P,tC(t1))throw t1;return t1}function Ep(L){return A1(L).toLowerCase()}function Rp(L){return A1(L).toUpperCase()}function Fp(L,M,a){if(L=A1(L),L&&(a||M===H))return ZV(L);if(!L||!(M=B2(M)))return L;var A=i5(L),u=i5(M),x=SV(A,u),v=gV(A,u)+1;return u3(A,x,v).join("")}function Dp(L,M,a){if(L=A1(L),L&&(a||M===H))return L.slice(0,yV(L)+1);if(!L||!(M=B2(M)))return L;var A=i5(L),u=gV(A,i5(M))+1;return u3(A,0,u).join("")}function Np(L,M,a){if(L=A1(L),L&&(a||M===H))return L.replace(t8,"");if(!L||!(M=B2(M)))return L;var A=i5(L),u=SV(A,i5(M));return u3(A,u).join("")}function Ip(L,M){var a=i1,A=$;if(g1(M)){var u="separator"in M?M.separator:u;a="length"in M?V1(M.length):a,A="omission"in M?B2(M.omission):A}L=A1(L);var x=L.length;if(Z0(L)){var v=i5(L);x=v.length}if(a>=x)return L;var Z=a-S0(A);if(Z<1)return A;var y=v?u3(v,0,Z).join(""):L.slice(0,Z);if(u===H)return y+A;if(v&&(Z+=y.length-Z),LC(u)){if(L.slice(Z).search(u)){var w,T=y;for(u.global||(u=x8(u.source,A1($H.exec(u))+"g")),u.lastIndex=0;w=u.exec(T);)var P=w.index;y=y.slice(0,P===H?Z:P)}}else if(L.indexOf(B2(u),Z)!=Z){var I=y.lastIndexOf(u);I>-1&&(y=y.slice(0,I))}return y+A}function _p(L){return L=A1(L),L&&jo.test(L)?L.replace(zH,da):L}var Wp=w0(function(L,M,a){return L+(a?" ":"")+M.toUpperCase()}),MC=pt("toUpperCase");function AL(L,M,a){return L=A1(L),M=a?H:M,M===H?na(L)?ma(L):ea(L):L.match(M)||[]}var dL=r1(function(L,M){try{return T2(L,H,M)}catch(a){return tC(a)?a:new Y(a)}}),zp=I5(function(L,M){return I2(M,function(a){a=v5(a),D5(L,a,HC(L[a],L))}),L});function Up(L){var M=L==null?0:L.length,a=Q();return L=M?Z1(L,function(A){if(typeof A[1]!="function")throw new _2(t);return[a(A[0]),A[1]]}):[],r1(function(A){for(var u=-1;++u<M;){var x=L[u];if(T2(x[0],this,A))return T2(x[1],this,A)}})}function Gp(L){return dl(z2(L,l))}function oC(L){return function(){return L}}function $p(L,M){return L==null||L!==L?M:L}var Kp=mt(),Qp=mt(!0);function h2(L){return L}function nC(L){return QV(typeof L=="function"?L:z2(L,l))}function qp(L){return jV(z2(L,l))}function jp(L,M){return JV(L,z2(M,l))}var Jp=r1(function(L,M){return function(a){return m7(a,L,M)}}),Xp=r1(function(L,M){return function(a){return m7(L,a,M)}});function aC(L,M,a){var A=q1(M),u=z4(M,A);a==null&&!(g1(M)&&(u.length||!A.length))&&(a=M,M=L,L=this,u=z4(M,q1(M)));var x=!(g1(a)&&"chain"in a)||!!a.chain,v=W5(L);return I2(u,function(Z){var y=M[Z];L[Z]=y,v&&(L.prototype[Z]=function(){var w=this.__chain__;if(x||w){var T=L(this.__wrapped__),P=T.__actions__=f2(this.__actions__);return P.push({func:y,args:arguments,thisArg:L}),T.__chain__=w,T}return y.apply(L,n3([this.value()],arguments))})}),L}function Yp(){return Q1._===this&&(Q1._=Za),this}function lC(){}function Cu(L){return L=V1(L),r1(function(M){return XV(M,L)})}var eu=z8(Z1),Hu=z8(cV),Vu=z8(A8);function pL(L){return j8(L)?d8(v5(L)):Tl(L)}function tu(L){return function(M){return L==null?H:N3(L,M)}}var Lu=ft(),ru=ft(!0);function sC(){return[]}function AC(){return!1}function iu(){return{}}function Mu(){return""}function ou(){return!0}function nu(L,M){if(L=V1(L),L<1||L>d1)return[];var a=K1,A=L2(L,K1);M=Q(M),L-=K1;for(var u=m8(A,M);++a<L;)M(a);return u}function au(L){return C1(L)?Z1(L,v5):E2(L)?[L]:f2(Rt(A1(L)))}function lu(L){var M=++va;return A1(L)+M}var su=q4(function(L,M){return L+M},0),Au=U8("ceil"),du=q4(function(L,M){return L/M},1),pu=U8("floor");function uu(L){return L&&L.length?W4(L,h2,k8):H}function mu(L,M){return L&&L.length?W4(L,Q(M,2),k8):H}function cu(L){return vV(L,h2)}function fu(L,M){return vV(L,Q(M,2))}function xu(L){return L&&L.length?W4(L,h2,P8):H}function vu(L,M){return L&&L.length?W4(L,Q(M,2),P8):H}var hu=q4(function(L,M){return L*M},1),Zu=U8("round"),Su=q4(function(L,M){return L-M},0);function gu(L){return L&&L.length?u8(L,h2):0}function Ou(L,M){return L&&L.length?u8(L,Q(M,2)):0}return f.after=qA,f.ary=Kt,f.assign=Rd,f.assignIn=iL,f.assignInWith=M9,f.assignWith=Fd,f.at=Dd,f.before=Qt,f.bind=HC,f.bindAll=zp,f.bindKey=qt,f.castArray=id,f.chain=Ut,f.chunk=ps,f.compact=us,f.concat=ms,f.cond=Up,f.conforms=Gp,f.constant=oC,f.countBy=gA,f.create=Nd,f.curry=jt,f.curryRight=Jt,f.debounce=Xt,f.defaults=Id,f.defaultsDeep=_d,f.defer=jA,f.delay=JA,f.difference=cs,f.differenceBy=fs,f.differenceWith=xs,f.drop=vs,f.dropRight=hs,f.dropRightWhile=Zs,f.dropWhile=Ss,f.fill=gs,f.filter=yA,f.flatMap=wA,f.flatMapDeep=TA,f.flatMapDepth=PA,f.flatten=It,f.flattenDeep=Os,f.flattenDepth=ys,f.flip=XA,f.flow=Kp,f.flowRight=Qp,f.fromPairs=ks,f.functions=Qd,f.functionsIn=qd,f.groupBy=BA,f.initial=ws,f.intersection=Ts,f.intersectionBy=Ps,f.intersectionWith=Bs,f.invert=Jd,f.invertBy=Xd,f.invokeMap=RA,f.iteratee=nC,f.keyBy=FA,f.keys=q1,f.keysIn=v2,f.map=H9,f.mapKeys=Cp,f.mapValues=ep,f.matches=qp,f.matchesProperty=jp,f.memoize=t9,f.merge=Hp,f.mergeWith=ML,f.method=Jp,f.methodOf=Xp,f.mixin=aC,f.negate=L9,f.nthArg=Cu,f.omit=Vp,f.omitBy=tp,f.once=YA,f.orderBy=DA,f.over=eu,f.overArgs=Cd,f.overEvery=Hu,f.overSome=Vu,f.partial=VC,f.partialRight=Yt,f.partition=NA,f.pick=Lp,f.pickBy=oL,f.property=pL,f.propertyOf=tu,f.pull=Ds,f.pullAll=Wt,f.pullAllBy=Ns,f.pullAllWith=Is,f.pullAt=_s,f.range=Lu,f.rangeRight=ru,f.rearg=ed,f.reject=WA,f.remove=Ws,f.rest=Hd,f.reverse=CC,f.sampleSize=UA,f.set=ip,f.setWith=Mp,f.shuffle=GA,f.slice=zs,f.sortBy=QA,f.sortedUniq=js,f.sortedUniqBy=Js,f.split=wp,f.spread=Vd,f.tail=Xs,f.take=Ys,f.takeRight=CA,f.takeRightWhile=eA,f.takeWhile=HA,f.tap=uA,f.throttle=td,f.thru=e9,f.toArray=tL,f.toPairs=nL,f.toPairsIn=aL,f.toPath=au,f.toPlainObject=rL,f.transform=op,f.unary=Ld,f.union=VA,f.unionBy=tA,f.unionWith=LA,f.uniq=rA,f.uniqBy=iA,f.uniqWith=MA,f.unset=np,f.unzip=eC,f.unzipWith=zt,f.update=ap,f.updateWith=lp,f.values=B0,f.valuesIn=sp,f.without=oA,f.words=AL,f.wrap=rd,f.xor=nA,f.xorBy=aA,f.xorWith=lA,f.zip=sA,f.zipObject=AA,f.zipObjectDeep=dA,f.zipWith=pA,f.entries=nL,f.entriesIn=aL,f.extend=iL,f.extendWith=M9,aC(f,f),f.add=su,f.attempt=dL,f.camelCase=up,f.capitalize=lL,f.ceil=Au,f.clamp=Ap,f.clone=Md,f.cloneDeep=nd,f.cloneDeepWith=ad,f.cloneWith=od,f.conformsTo=ld,f.deburr=sL,f.defaultTo=$p,f.divide=du,f.endsWith=mp,f.eq=o5,f.escape=cp,f.escapeRegExp=fp,f.every=OA,f.find=kA,f.findIndex=Dt,f.findKey=Wd,f.findLast=bA,f.findLastIndex=Nt,f.findLastKey=zd,f.floor=pu,f.forEach=Gt,f.forEachRight=$t,f.forIn=Ud,f.forInRight=Gd,f.forOwn=$d,f.forOwnRight=Kd,f.get=rC,f.gt=sd,f.gte=Ad,f.has=jd,f.hasIn=iC,f.head=_t,f.identity=h2,f.includes=EA,f.indexOf=bs,f.inRange=dp,f.invoke=Yd,f.isArguments=W3,f.isArray=C1,f.isArrayBuffer=dd,f.isArrayLike=x2,f.isArrayLikeObject=k1,f.isBoolean=pd,f.isBuffer=m3,f.isDate=ud,f.isElement=md,f.isEmpty=cd,f.isEqual=fd,f.isEqualWith=xd,f.isError=tC,f.isFinite=vd,f.isFunction=W5,f.isInteger=CL,f.isLength=r9,f.isMap=eL,f.isMatch=hd,f.isMatchWith=Zd,f.isNaN=Sd,f.isNative=gd,f.isNil=yd,f.isNull=Od,f.isNumber=HL,f.isObject=g1,f.isObjectLike=O1,f.isPlainObject=Z7,f.isRegExp=LC,f.isSafeInteger=kd,f.isSet=VL,f.isString=i9,f.isSymbol=E2,f.isTypedArray=P0,f.isUndefined=bd,f.isWeakMap=wd,f.isWeakSet=Td,f.join=Es,f.kebabCase=xp,f.last=G2,f.lastIndexOf=Rs,f.lowerCase=vp,f.lowerFirst=hp,f.lt=Pd,f.lte=Bd,f.max=uu,f.maxBy=mu,f.mean=cu,f.meanBy=fu,f.min=xu,f.minBy=vu,f.stubArray=sC,f.stubFalse=AC,f.stubObject=iu,f.stubString=Mu,f.stubTrue=ou,f.multiply=hu,f.nth=Fs,f.noConflict=Yp,f.noop=lC,f.now=V9,f.pad=Zp,f.padEnd=Sp,f.padStart=gp,f.parseInt=Op,f.random=pp,f.reduce=IA,f.reduceRight=_A,f.repeat=yp,f.replace=kp,f.result=rp,f.round=Zu,f.runInContext=g,f.sample=zA,f.size=$A,f.snakeCase=bp,f.some=KA,f.sortedIndex=Us,f.sortedIndexBy=Gs,f.sortedIndexOf=$s,f.sortedLastIndex=Ks,f.sortedLastIndexBy=Qs,f.sortedLastIndexOf=qs,f.startCase=Tp,f.startsWith=Pp,f.subtract=Su,f.sum=gu,f.sumBy=Ou,f.template=Bp,f.times=nu,f.toFinite=z5,f.toInteger=V1,f.toLength=LL,f.toLower=Ep,f.toNumber=$2,f.toSafeInteger=Ed,f.toString=A1,f.toUpper=Rp,f.trim=Fp,f.trimEnd=Dp,f.trimStart=Np,f.truncate=Ip,f.unescape=_p,f.uniqueId=lu,f.upperCase=Wp,f.upperFirst=MC,f.each=Gt,f.eachRight=$t,f.first=_t,aC(f,function(){var L={};return f5(f,function(M,a){p1.call(f.prototype,a)||(L[a]=M)}),L}(),{chain:!1}),f.VERSION=C,I2(["bind","bindKey","curry","curryRight","partial","partialRight"],function(L){f[L].placeholder=f}),I2(["drop","take"],function(L,M){o1.prototype[L]=function(a){a=a===H?1:I1(V1(a),0);var A=this.__filtered__&&!M?new o1(this):this.clone();return A.__filtered__?A.__takeCount__=L2(a,A.__takeCount__):A.__views__.push({size:L2(a,K1),type:L+(A.__dir__<0?"Right":"")}),A},o1.prototype[L+"Right"]=function(a){return this.reverse()[L](a).reverse()}}),I2(["filter","map","takeWhile"],function(L,M){var a=M+1,A=a==T1||a==y2;o1.prototype[L]=function(u){var x=this.clone();return x.__iteratees__.push({iteratee:Q(u,3),type:a}),x.__filtered__=x.__filtered__||A,x}}),I2(["head","last"],function(L,M){var a="take"+(M?"Right":"");o1.prototype[L]=function(){return this[a](1).value()[0]}}),I2(["initial","tail"],function(L,M){var a="drop"+(M?"":"Right");o1.prototype[L]=function(){return this.__filtered__?new o1(this):this[a](1)}}),o1.prototype.compact=function(){return this.filter(h2)},o1.prototype.find=function(L){return this.filter(L).head()},o1.prototype.findLast=function(L){return this.reverse().find(L)},o1.prototype.invokeMap=r1(function(L,M){return typeof L=="function"?new o1(this):this.map(function(a){return m7(a,L,M)})}),o1.prototype.reject=function(L){return this.filter(L9(Q(L)))},o1.prototype.slice=function(L,M){L=V1(L);var a=this;return a.__filtered__&&(L>0||M<0)?new o1(a):(L<0?a=a.takeRight(-L):L&&(a=a.drop(L)),M!==H&&(M=V1(M),a=M<0?a.dropRight(-M):a.take(M-L)),a)},o1.prototype.takeRightWhile=function(L){return this.reverse().takeWhile(L).reverse()},o1.prototype.toArray=function(){return this.take(K1)},f5(o1.prototype,function(L,M){var a=/^(?:filter|find|map|reject)|While$/.test(M),A=/^(?:head|last)$/.test(M),u=f[A?"take"+(M=="last"?"Right":""):M],x=A||/^find/.test(M);u&&(f.prototype[M]=function(){var v=this.__wrapped__,Z=A?[1]:arguments,y=v instanceof o1,w=Z[0],T=y||C1(v),P=function(M1){var n1=u.apply(f,n3([M1],Z));return A&&I?n1[0]:n1};T&&a&&typeof w=="function"&&w.length!=1&&(y=T=!1);var I=this.__chain__,G=!!this.__actions__.length,q=x&&!I,t1=y&&!G;if(!x&&T){v=t1?v:new o1(this);var j=L.apply(v,Z);return j.__actions__.push({func:e9,args:[P],thisArg:H}),new W2(j,I)}return q&&t1?L.apply(this,Z):(j=this.thru(P),q?A?j.value()[0]:j.value():j)})}),I2(["pop","push","shift","sort","splice","unshift"],function(L){var M=O4[L],a=/^(?:push|sort|unshift)$/.test(L)?"tap":"thru",A=/^(?:pop|shift)$/.test(L);f.prototype[L]=function(){var u=arguments;if(A&&!this.__chain__){var x=this.value();return M.apply(C1(x)?x:[],u)}return this[a](function(v){return M.apply(C1(v)?v:[],u)})}}),f5(o1.prototype,function(L,M){var a=f[M];if(a){var A=a.name+"";p1.call(y0,A)||(y0[A]=[]),y0[A].push({name:M,func:a})}}),y0[Q4(H,h).name]=[{name:"wrapper",func:H}],o1.prototype.clone=Ia,o1.prototype.reverse=_a,o1.prototype.value=Wa,f.prototype.at=mA,f.prototype.chain=cA,f.prototype.commit=fA,f.prototype.next=xA,f.prototype.plant=hA,f.prototype.reverse=ZA,f.prototype.toJSON=f.prototype.valueOf=f.prototype.value=SA,f.prototype.first=f.prototype.head,a7&&(f.prototype[a7]=vA),f},l3=ca();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Q1._=l3,define(function(){return l3})):B3?((B3.exports=l3)._=l3,n8._=l3):Q1._=l3}).call(r7)});var qe={};Eu(qe,{CommandManager:()=>t0,Editor:()=>J7,Extension:()=>z1,InputRule:()=>g3,Mark:()=>g2,Node:()=>U1,NodePos:()=>q9,NodeView:()=>Ee,PasteRule:()=>q0,Tracker:()=>Re,callOrReturn:()=>e1,combineTransactionSteps:()=>Ge,createChainableState:()=>X7,createDocument:()=>K9,createNodeFromContent:()=>j7,createStyleTag:()=>lM,defaultBlockAt:()=>Yi,deleteProps:()=>Pe,elementFromString:()=>Q0,escapeForRegEx:()=>Wx,extensions:()=>Rx,findChildren:()=>rx,findChildrenInRange:()=>$e,findDuplicates:()=>Qi,findParentNode:()=>t4,findParentNodeClosestToPos:()=>CM,fromString:()=>zi,generateHTML:()=>ix,generateJSON:()=>Mx,generateText:()=>ox,getAttributes:()=>C6,getAttributesFromExtensions:()=>Fe,getChangedRanges:()=>Qe,getDebugJSON:()=>VM,getExtensionField:()=>U,getHTMLFromFragment:()=>C4,getMarkAttributes:()=>Ue,getMarkRange:()=>X9,getMarkType:()=>X5,getMarksBetween:()=>L4,getNodeAtPosition:()=>ax,getNodeAttributes:()=>eM,getNodeType:()=>W1,getRenderedAttributes:()=>G9,getSchema:()=>Y9,getSchemaByResolvedExtensions:()=>Ne,getSchemaTypeByName:()=>U9,getSchemaTypeNameByName:()=>V4,getSplittedAttributes:()=>Q7,getText:()=>Ke,getTextBetween:()=>Ie,getTextContentFromNodes:()=>Ui,getTextSerializersFromSchema:()=>J9,injectExtensionAttributesToParseRule:()=>we,inputRulesPlugin:()=>Gi,isActive:()=>tM,isAtEndOfNode:()=>lx,isAtStartOfNode:()=>sx,isEmptyObject:()=>Wi,isExtensionRulesEnabled:()=>Te,isFunction:()=>De,isList:()=>Be,isMacOS:()=>ze,isMarkActive:()=>Q9,isNodeActive:()=>j0,isNodeEmpty:()=>J0,isNodeSelection:()=>Ax,isNumber:()=>$i,isPlainObject:()=>K7,isRegExp:()=>j9,isString:()=>zx,isTextSelection:()=>_e,isiOS:()=>H4,markInputRule:()=>Y5,markPasteRule:()=>A5,mergeAttributes:()=>x1,mergeDeep:()=>e4,minMax:()=>g5,nodeInputRule:()=>Dx,nodePasteRule:()=>Ux,objectIncludes:()=>q7,pasteRulesPlugin:()=>Ki,posToDOMRect:()=>dx,removeDuplicates:()=>HM,resolveFocusPosition:()=>We,selectionToInsertionEnd:()=>Xi,splitExtensions:()=>Y7,textInputRule:()=>Ix,textPasteRule:()=>Gx,textblockTypeInputRule:()=>Nx,wrappingInputRule:()=>C3});function i2(H){this.content=H}i2.prototype={constructor:i2,find:function(H){for(var C=0;C<this.content.length;C+=2)if(this.content[C]===H)return C;return-1},get:function(H){var C=this.find(H);return C==-1?void 0:this.content[C+1]},update:function(H,C,e){var V=e&&e!=H?this.remove(e):this,t=V.find(H),r=V.content.slice();return t==-1?r.push(e||H,C):(r[t+1]=C,e&&(r[t]=e)),new i2(r)},remove:function(H){var C=this.find(H);if(C==-1)return this;var e=this.content.slice();return e.splice(C,2),new i2(e)},addToStart:function(H,C){return new i2([H,C].concat(this.remove(H).content))},addToEnd:function(H,C){var e=this.remove(H).content.slice();return e.push(H,C),new i2(e)},addBefore:function(H,C,e){var V=this.remove(C),t=V.content.slice(),r=V.find(H);return t.splice(r==-1?t.length:r,0,C,e),new i2(t)},forEach:function(H){for(var C=0;C<this.content.length;C+=2)H(this.content[C],this.content[C+1])},prepend:function(H){return H=i2.from(H),H.size?new i2(H.content.concat(this.subtract(H).content)):this},append:function(H){return H=i2.from(H),H.size?new i2(this.subtract(H).content.concat(H.content)):this},subtract:function(H){var C=this;H=i2.from(H);for(var e=0;e<H.content.length;e+=2)C=C.remove(H.content[e]);return C},toObject:function(){var H={};return this.forEach(function(C,e){H[C]=e}),H},get size(){return this.content.length>>1}};i2.from=function(H){if(H instanceof i2)return H;var C=[];if(H)for(var e in H)C.push(e,H[e]);return new i2(C)};var dC=i2;function OL(H,C,e){for(let V=0;;V++){if(V==H.childCount||V==C.childCount)return H.childCount==C.childCount?null:e;let t=H.child(V),r=C.child(V);if(t==r){e+=t.nodeSize;continue}if(!t.sameMarkup(r))return e;if(t.isText&&t.text!=r.text){for(let i=0;t.text[i]==r.text[i];i++)e++;return e}if(t.content.size||r.content.size){let i=OL(t.content,r.content,e+1);if(i!=null)return i}e+=t.nodeSize}}function yL(H,C,e,V){for(let t=H.childCount,r=C.childCount;;){if(t==0||r==0)return t==r?null:{a:e,b:V};let i=H.child(--t),o=C.child(--r),n=i.nodeSize;if(i==o){e-=n,V-=n;continue}if(!i.sameMarkup(o))return{a:e,b:V};if(i.isText&&i.text!=o.text){let l=0,s=Math.min(i.text.length,o.text.length);for(;l<s&&i.text[i.text.length-l-1]==o.text[o.text.length-l-1];)l++,e--,V--;return{a:e,b:V}}if(i.content.size||o.content.size){let l=yL(i.content,o.content,e-1,V-1);if(l)return l}e-=n,V-=n}}var B=class H{constructor(C,e){if(this.content=C,this.size=e||0,e==null)for(let V=0;V<C.length;V++)this.size+=C[V].nodeSize}nodesBetween(C,e,V,t=0,r){for(let i=0,o=0;o<e;i++){let n=this.content[i],l=o+n.nodeSize;if(l>C&&V(n,t+o,r||null,i)!==!1&&n.content.size){let s=o+1;n.nodesBetween(Math.max(0,C-s),Math.min(n.content.size,e-s),V,t+s)}o=l}}descendants(C){this.nodesBetween(0,this.size,C)}textBetween(C,e,V,t){let r="",i=!0;return this.nodesBetween(C,e,(o,n)=>{let l=o.isText?o.text.slice(Math.max(C,n)-n,e-n):o.isLeaf?t?typeof t=="function"?t(o):t:o.type.spec.leafText?o.type.spec.leafText(o):"":"";o.isBlock&&(o.isLeaf&&l||o.isTextblock)&&V&&(i?i=!1:r+=V),r+=l},0),r}append(C){if(!C.size)return this;if(!this.size)return C;let e=this.lastChild,V=C.firstChild,t=this.content.slice(),r=0;for(e.isText&&e.sameMarkup(V)&&(t[t.length-1]=e.withText(e.text+V.text),r=1);r<C.content.length;r++)t.push(C.content[r]);return new H(t,this.size+C.size)}cut(C,e=this.size){if(C==0&&e==this.size)return this;let V=[],t=0;if(e>C)for(let r=0,i=0;i<e;r++){let o=this.content[r],n=i+o.nodeSize;n>C&&((i<C||n>e)&&(o.isText?o=o.cut(Math.max(0,C-i),Math.min(o.text.length,e-i)):o=o.cut(Math.max(0,C-i-1),Math.min(o.content.size,e-i-1))),V.push(o),t+=o.nodeSize),i=n}return new H(V,t)}cutByIndex(C,e){return C==e?H.empty:C==0&&e==this.content.length?this:new H(this.content.slice(C,e))}replaceChild(C,e){let V=this.content[C];if(V==e)return this;let t=this.content.slice(),r=this.size+e.nodeSize-V.nodeSize;return t[C]=e,new H(t,r)}addToStart(C){return new H([C].concat(this.content),this.size+C.nodeSize)}addToEnd(C){return new H(this.content.concat(C),this.size+C.nodeSize)}eq(C){if(this.content.length!=C.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(C.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(C){let e=this.content[C];if(!e)throw new RangeError("Index "+C+" out of range for "+this);return e}maybeChild(C){return this.content[C]||null}forEach(C){for(let e=0,V=0;e<this.content.length;e++){let t=this.content[e];C(t,V,e),V+=t.nodeSize}}findDiffStart(C,e=0){return OL(this,C,e)}findDiffEnd(C,e=this.size,V=C.size){return yL(this,C,e,V)}findIndex(C,e=-1){if(C==0)return n9(0,C);if(C==this.size)return n9(this.content.length,C);if(C>this.size||C<0)throw new RangeError(`Position ${C} outside of fragment (${this})`);for(let V=0,t=0;;V++){let r=this.child(V),i=t+r.nodeSize;if(i>=C)return i==C||e>0?n9(V+1,i):n9(V,t);t=i}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(C=>C.toJSON()):null}static fromJSON(C,e){if(!e)return H.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new H(e.map(C.nodeFromJSON))}static fromArray(C){if(!C.length)return H.empty;let e,V=0;for(let t=0;t<C.length;t++){let r=C[t];V+=r.nodeSize,t&&r.isText&&C[t-1].sameMarkup(r)?(e||(e=C.slice(0,t)),e[e.length-1]=r.withText(e[e.length-1].text+r.text)):e&&e.push(r)}return new H(e||C,V)}static from(C){if(!C)return H.empty;if(C instanceof H)return C;if(Array.isArray(C))return this.fromArray(C);if(C.attrs)return new H([C],C.nodeSize);throw new RangeError("Can not convert "+C+" to a Fragment"+(C.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};B.empty=new B([],0);var pC={index:0,offset:0};function n9(H,C){return pC.index=H,pC.offset=C,pC}function l9(H,C){if(H===C)return!0;if(!(H&&typeof H=="object")||!(C&&typeof C=="object"))return!1;let e=Array.isArray(H);if(Array.isArray(C)!=e)return!1;if(e){if(H.length!=C.length)return!1;for(let V=0;V<H.length;V++)if(!l9(H[V],C[V]))return!1}else{for(let V in H)if(!(V in C)||!l9(H[V],C[V]))return!1;for(let V in C)if(!(V in H))return!1}return!0}var l1=class H{constructor(C,e){this.type=C,this.attrs=e}addToSet(C){let e,V=!1;for(let t=0;t<C.length;t++){let r=C[t];if(this.eq(r))return C;if(this.type.excludes(r.type))e||(e=C.slice(0,t));else{if(r.type.excludes(this.type))return C;!V&&r.type.rank>this.type.rank&&(e||(e=C.slice(0,t)),e.push(this),V=!0),e&&e.push(r)}}return e||(e=C.slice()),V||e.push(this),e}removeFromSet(C){for(let e=0;e<C.length;e++)if(this.eq(C[e]))return C.slice(0,e).concat(C.slice(e+1));return C}isInSet(C){for(let e=0;e<C.length;e++)if(this.eq(C[e]))return!0;return!1}eq(C){return this==C||this.type==C.type&&l9(this.attrs,C.attrs)}toJSON(){let C={type:this.type.name};for(let e in this.attrs){C.attrs=this.attrs;break}return C}static fromJSON(C,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");let V=C.marks[e.type];if(!V)throw new RangeError(`There is no mark type ${e.type} in this schema`);let t=V.create(e.attrs);return V.checkAttrs(t.attrs),t}static sameSet(C,e){if(C==e)return!0;if(C.length!=e.length)return!1;for(let V=0;V<C.length;V++)if(!C[V].eq(e[V]))return!1;return!0}static setFrom(C){if(!C||Array.isArray(C)&&C.length==0)return H.none;if(C instanceof H)return[C];let e=C.slice();return e.sort((V,t)=>V.type.rank-t.type.rank),e}};l1.none=[];var G3=class extends Error{},_=class H{constructor(C,e,V){this.content=C,this.openStart=e,this.openEnd=V}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(C,e){let V=bL(this.content,C+this.openStart,e);return V&&new H(V,this.openStart,this.openEnd)}removeBetween(C,e){return new H(kL(this.content,C+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(C){return this.content.eq(C.content)&&this.openStart==C.openStart&&this.openEnd==C.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let C={content:this.content.toJSON()};return this.openStart>0&&(C.openStart=this.openStart),this.openEnd>0&&(C.openEnd=this.openEnd),C}static fromJSON(C,e){if(!e)return H.empty;let V=e.openStart||0,t=e.openEnd||0;if(typeof V!="number"||typeof t!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new H(B.fromJSON(C,e.content),V,t)}static maxOpen(C,e=!0){let V=0,t=0;for(let r=C.firstChild;r&&!r.isLeaf&&(e||!r.type.spec.isolating);r=r.firstChild)V++;for(let r=C.lastChild;r&&!r.isLeaf&&(e||!r.type.spec.isolating);r=r.lastChild)t++;return new H(C,V,t)}};_.empty=new _(B.empty,0,0);function kL(H,C,e){let{index:V,offset:t}=H.findIndex(C),r=H.maybeChild(V),{index:i,offset:o}=H.findIndex(e);if(t==C||r.isText){if(o!=e&&!H.child(i).isText)throw new RangeError("Removing non-flat range");return H.cut(0,C).append(H.cut(e))}if(V!=i)throw new RangeError("Removing non-flat range");return H.replaceChild(V,r.copy(kL(r.content,C-t-1,e-t-1)))}function bL(H,C,e,V){let{index:t,offset:r}=H.findIndex(C),i=H.maybeChild(t);if(r==C||i.isText)return V&&!V.canReplace(t,t,e)?null:H.cut(0,C).append(e).append(H.cut(C));let o=bL(i.content,C-r-1,e);return o&&H.replaceChild(t,i.copy(o))}function Du(H,C,e){if(e.openStart>H.depth)throw new G3("Inserted content deeper than insertion position");if(H.depth-e.openStart!=C.depth-e.openEnd)throw new G3("Inconsistent open depths");return wL(H,C,e,0)}function wL(H,C,e,V){let t=H.index(V),r=H.node(V);if(t==C.index(V)&&V<H.depth-e.openStart){let i=wL(H,C,e,V+1);return r.copy(r.content.replaceChild(t,i))}else if(e.content.size)if(!e.openStart&&!e.openEnd&&H.depth==V&&C.depth==V){let i=H.parent,o=i.content;return U3(i,o.cut(0,H.parentOffset).append(e.content).append(o.cut(C.parentOffset)))}else{let{start:i,end:o}=Nu(e,H);return U3(r,PL(H,i,o,C,V))}else return U3(r,s9(H,C,V))}function TL(H,C){if(!C.type.compatibleContent(H.type))throw new G3("Cannot join "+C.type.name+" onto "+H.type.name)}function mC(H,C,e){let V=H.node(e);return TL(V,C.node(e)),V}function z3(H,C){let e=C.length-1;e>=0&&H.isText&&H.sameMarkup(C[e])?C[e]=H.withText(C[e].text+H.text):C.push(H)}function S7(H,C,e,V){let t=(C||H).node(e),r=0,i=C?C.index(e):t.childCount;H&&(r=H.index(e),H.depth>e?r++:H.textOffset&&(z3(H.nodeAfter,V),r++));for(let o=r;o<i;o++)z3(t.child(o),V);C&&C.depth==e&&C.textOffset&&z3(C.nodeBefore,V)}function U3(H,C){return H.type.checkContent(C),H.copy(C)}function PL(H,C,e,V,t){let r=H.depth>t&&mC(H,C,t+1),i=V.depth>t&&mC(e,V,t+1),o=[];return S7(null,H,t,o),r&&i&&C.index(t)==e.index(t)?(TL(r,i),z3(U3(r,PL(H,C,e,V,t+1)),o)):(r&&z3(U3(r,s9(H,C,t+1)),o),S7(C,e,t,o),i&&z3(U3(i,s9(e,V,t+1)),o)),S7(V,null,t,o),new B(o)}function s9(H,C,e){let V=[];if(S7(null,H,e,V),H.depth>e){let t=mC(H,C,e+1);z3(U3(t,s9(H,C,e+1)),V)}return S7(C,null,e,V),new B(V)}function Nu(H,C){let e=C.depth-H.openStart,t=C.node(e).copy(H.content);for(let r=e-1;r>=0;r--)t=C.node(r).copy(B.from(t));return{start:t.resolveNoCache(H.openStart+e),end:t.resolveNoCache(t.content.size-H.openEnd-e)}}var A9=class H{constructor(C,e,V){this.pos=C,this.path=e,this.parentOffset=V,this.depth=e.length/3-1}resolveDepth(C){return C==null?this.depth:C<0?this.depth+C:C}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(C){return this.path[this.resolveDepth(C)*3]}index(C){return this.path[this.resolveDepth(C)*3+1]}indexAfter(C){return C=this.resolveDepth(C),this.index(C)+(C==this.depth&&!this.textOffset?0:1)}start(C){return C=this.resolveDepth(C),C==0?0:this.path[C*3-1]+1}end(C){return C=this.resolveDepth(C),this.start(C)+this.node(C).content.size}before(C){if(C=this.resolveDepth(C),!C)throw new RangeError("There is no position before the top-level node");return C==this.depth+1?this.pos:this.path[C*3-1]}after(C){if(C=this.resolveDepth(C),!C)throw new RangeError("There is no position after the top-level node");return C==this.depth+1?this.pos:this.path[C*3-1]+this.path[C*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let C=this.parent,e=this.index(this.depth);if(e==C.childCount)return null;let V=this.pos-this.path[this.path.length-1],t=C.child(e);return V?C.child(e).cut(V):t}get nodeBefore(){let C=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(C).cut(0,e):C==0?null:this.parent.child(C-1)}posAtIndex(C,e){e=this.resolveDepth(e);let V=this.path[e*3],t=e==0?0:this.path[e*3-1]+1;for(let r=0;r<C;r++)t+=V.child(r).nodeSize;return t}marks(){let C=this.parent,e=this.index();if(C.content.size==0)return l1.none;if(this.textOffset)return C.child(e).marks;let V=C.maybeChild(e-1),t=C.maybeChild(e);if(!V){let o=V;V=t,t=o}let r=V.marks;for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!t||!r[i].isInSet(t.marks))&&(r=r[i--].removeFromSet(r));return r}marksAcross(C){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let V=e.marks,t=C.parent.maybeChild(C.index());for(var r=0;r<V.length;r++)V[r].type.spec.inclusive===!1&&(!t||!V[r].isInSet(t.marks))&&(V=V[r--].removeFromSet(V));return V}sharedDepth(C){for(let e=this.depth;e>0;e--)if(this.start(e)<=C&&this.end(e)>=C)return e;return 0}blockRange(C=this,e){if(C.pos<this.pos)return C.blockRange(this);for(let V=this.depth-(this.parent.inlineContent||this.pos==C.pos?1:0);V>=0;V--)if(C.pos<=this.end(V)&&(!e||e(this.node(V))))return new $3(this,C,V);return null}sameParent(C){return this.pos-this.parentOffset==C.pos-C.parentOffset}max(C){return C.pos>this.pos?C:this}min(C){return C.pos<this.pos?C:this}toString(){let C="";for(let e=1;e<=this.depth;e++)C+=(C?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return C+":"+this.parentOffset}static resolve(C,e){if(!(e>=0&&e<=C.content.size))throw new RangeError("Position "+e+" out of range");let V=[],t=0,r=e;for(let i=C;;){let{index:o,offset:n}=i.content.findIndex(r),l=r-n;if(V.push(i,o,t+n),!l||(i=i.child(o),i.isText))break;r=l-1,t+=n+1}return new H(e,V,r)}static resolveCached(C,e){let V=mL.get(C);if(V)for(let r=0;r<V.elts.length;r++){let i=V.elts[r];if(i.pos==e)return i}else mL.set(C,V=new cC);let t=V.elts[V.i]=H.resolve(C,e);return V.i=(V.i+1)%Iu,t}},cC=class{constructor(){this.elts=[],this.i=0}},Iu=12,mL=new WeakMap,$3=class{constructor(C,e,V){this.$from=C,this.$to=e,this.depth=V}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}},_u=Object.create(null),Z2=class H{constructor(C,e,V,t=l1.none){this.type=C,this.attrs=e,this.marks=t,this.content=V||B.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(C){return this.content.child(C)}maybeChild(C){return this.content.maybeChild(C)}forEach(C){this.content.forEach(C)}nodesBetween(C,e,V,t=0){this.content.nodesBetween(C,e,V,t,this)}descendants(C){this.nodesBetween(0,this.content.size,C)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(C,e,V,t){return this.content.textBetween(C,e,V,t)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(C){return this==C||this.sameMarkup(C)&&this.content.eq(C.content)}sameMarkup(C){return this.hasMarkup(C.type,C.attrs,C.marks)}hasMarkup(C,e,V){return this.type==C&&l9(this.attrs,e||C.defaultAttrs||_u)&&l1.sameSet(this.marks,V||l1.none)}copy(C=null){return C==this.content?this:new H(this.type,this.attrs,C,this.marks)}mark(C){return C==this.marks?this:new H(this.type,this.attrs,this.content,C)}cut(C,e=this.content.size){return C==0&&e==this.content.size?this:this.copy(this.content.cut(C,e))}slice(C,e=this.content.size,V=!1){if(C==e)return _.empty;let t=this.resolve(C),r=this.resolve(e),i=V?0:t.sharedDepth(e),o=t.start(i),l=t.node(i).content.cut(t.pos-o,r.pos-o);return new _(l,t.depth-i,r.depth-i)}replace(C,e,V){return Du(this.resolve(C),this.resolve(e),V)}nodeAt(C){for(let e=this;;){let{index:V,offset:t}=e.content.findIndex(C);if(e=e.maybeChild(V),!e)return null;if(t==C||e.isText)return e;C-=t+1}}childAfter(C){let{index:e,offset:V}=this.content.findIndex(C);return{node:this.content.maybeChild(e),index:e,offset:V}}childBefore(C){if(C==0)return{node:null,index:0,offset:0};let{index:e,offset:V}=this.content.findIndex(C);if(V<C)return{node:this.content.child(e),index:e,offset:V};let t=this.content.child(e-1);return{node:t,index:e-1,offset:V-t.nodeSize}}resolve(C){return A9.resolveCached(this,C)}resolveNoCache(C){return A9.resolve(this,C)}rangeHasMark(C,e,V){let t=!1;return e>C&&this.nodesBetween(C,e,r=>(V.isInSet(r.marks)&&(t=!0),!t)),t}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let C=this.type.name;return this.content.size&&(C+="("+this.content.toStringInner()+")"),BL(this.marks,C)}contentMatchAt(C){let e=this.type.contentMatch.matchFragment(this.content,0,C);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(C,e,V=B.empty,t=0,r=V.childCount){let i=this.contentMatchAt(C).matchFragment(V,t,r),o=i&&i.matchFragment(this.content,e);if(!o||!o.validEnd)return!1;for(let n=t;n<r;n++)if(!this.type.allowsMarks(V.child(n).marks))return!1;return!0}canReplaceWith(C,e,V,t){if(t&&!this.type.allowsMarks(t))return!1;let r=this.contentMatchAt(C).matchType(V),i=r&&r.matchFragment(this.content,e);return i?i.validEnd:!1}canAppend(C){return C.content.size?this.canReplace(this.childCount,this.childCount,C.content):this.type.compatibleContent(C.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let C=l1.none;for(let e=0;e<this.marks.length;e++){let V=this.marks[e];V.type.checkAttrs(V.attrs),C=V.addToSet(C)}if(!l1.sameSet(C,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(e=>e.type.name)}`);this.content.forEach(e=>e.check())}toJSON(){let C={type:this.type.name};for(let e in this.attrs){C.attrs=this.attrs;break}return this.content.size&&(C.content=this.content.toJSON()),this.marks.length&&(C.marks=this.marks.map(e=>e.toJSON())),C}static fromJSON(C,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let V;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");V=e.marks.map(C.markFromJSON)}if(e.type=="text"){if(typeof e.text!="string")throw new RangeError("Invalid text node in JSON");return C.text(e.text,V)}let t=B.fromJSON(C,e.content),r=C.nodeType(e.type).create(e.attrs,t,V);return r.type.checkAttrs(r.attrs),r}};Z2.prototype.text=void 0;var fC=class H extends Z2{constructor(C,e,V,t){if(super(C,e,null,t),!V)throw new RangeError("Empty text nodes are not allowed");this.text=V}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):BL(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(C,e){return this.text.slice(C,e)}get nodeSize(){return this.text.length}mark(C){return C==this.marks?this:new H(this.type,this.attrs,this.text,C)}withText(C){return C==this.text?this:new H(this.type,this.attrs,C,this.marks)}cut(C=0,e=this.text.length){return C==0&&e==this.text.length?this:this.withText(this.text.slice(C,e))}eq(C){return this.sameMarkup(C)&&this.text==C.text}toJSON(){let C=super.toJSON();return C.text=this.text,C}};function BL(H,C){for(let e=H.length-1;e>=0;e--)C=H[e].type.name+"("+C+")";return C}var K3=class H{constructor(C){this.validEnd=C,this.next=[],this.wrapCache=[]}static parse(C,e){let V=new xC(C,e);if(V.next==null)return H.empty;let t=EL(V);V.next&&V.err("Unexpected trailing text");let r=Qu(Ku(t));return qu(r,V),r}matchType(C){for(let e=0;e<this.next.length;e++)if(this.next[e].type==C)return this.next[e].next;return null}matchFragment(C,e=0,V=C.childCount){let t=this;for(let r=e;t&&r<V;r++)t=t.matchType(C.child(r).type);return t}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let C=0;C<this.next.length;C++){let{type:e}=this.next[C];if(!(e.isText||e.hasRequiredAttrs()))return e}return null}compatible(C){for(let e=0;e<this.next.length;e++)for(let V=0;V<C.next.length;V++)if(this.next[e].type==C.next[V].type)return!0;return!1}fillBefore(C,e=!1,V=0){let t=[this];function r(i,o){let n=i.matchFragment(C,V);if(n&&(!e||n.validEnd))return B.from(o.map(l=>l.createAndFill()));for(let l=0;l<i.next.length;l++){let{type:s,next:d}=i.next[l];if(!(s.isText||s.hasRequiredAttrs())&&t.indexOf(d)==-1){t.push(d);let p=r(d,o.concat(s));if(p)return p}}return null}return r(this,[])}findWrapping(C){for(let V=0;V<this.wrapCache.length;V+=2)if(this.wrapCache[V]==C)return this.wrapCache[V+1];let e=this.computeWrapping(C);return this.wrapCache.push(C,e),e}computeWrapping(C){let e=Object.create(null),V=[{match:this,type:null,via:null}];for(;V.length;){let t=V.shift(),r=t.match;if(r.matchType(C)){let i=[];for(let o=t;o.type;o=o.via)i.push(o.type);return i.reverse()}for(let i=0;i<r.next.length;i++){let{type:o,next:n}=r.next[i];!o.isLeaf&&!o.hasRequiredAttrs()&&!(o.name in e)&&(!t.type||n.validEnd)&&(V.push({match:o.contentMatch,type:o,via:t}),e[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(C){if(C>=this.next.length)throw new RangeError(`There's no ${C}th edge in this content match`);return this.next[C]}toString(){let C=[];function e(V){C.push(V);for(let t=0;t<V.next.length;t++)C.indexOf(V.next[t].next)==-1&&e(V.next[t].next)}return e(this),C.map((V,t)=>{let r=t+(V.validEnd?"*":" ")+" ";for(let i=0;i<V.next.length;i++)r+=(i?", ":"")+V.next[i].type.name+"->"+C.indexOf(V.next[i].next);return r}).join(`
`)}};K3.empty=new K3(!0);var xC=class{constructor(C,e){this.string=C,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=C.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(C){return this.next==C&&(this.pos++||!0)}err(C){throw new SyntaxError(C+" (in content expression '"+this.string+"')")}};function EL(H){let C=[];do C.push(Wu(H));while(H.eat("|"));return C.length==1?C[0]:{type:"choice",exprs:C}}function Wu(H){let C=[];do C.push(zu(H));while(H.next&&H.next!=")"&&H.next!="|");return C.length==1?C[0]:{type:"seq",exprs:C}}function zu(H){let C=$u(H);for(;;)if(H.eat("+"))C={type:"plus",expr:C};else if(H.eat("*"))C={type:"star",expr:C};else if(H.eat("?"))C={type:"opt",expr:C};else if(H.eat("{"))C=Uu(H,C);else break;return C}function cL(H){/\D/.test(H.next)&&H.err("Expected number, got '"+H.next+"'");let C=Number(H.next);return H.pos++,C}function Uu(H,C){let e=cL(H),V=e;return H.eat(",")&&(H.next!="}"?V=cL(H):V=-1),H.eat("}")||H.err("Unclosed braced range"),{type:"range",min:e,max:V,expr:C}}function Gu(H,C){let e=H.nodeTypes,V=e[C];if(V)return[V];let t=[];for(let r in e){let i=e[r];i.isInGroup(C)&&t.push(i)}return t.length==0&&H.err("No node type or group '"+C+"' found"),t}function $u(H){if(H.eat("(")){let C=EL(H);return H.eat(")")||H.err("Missing closing paren"),C}else if(/\W/.test(H.next))H.err("Unexpected token '"+H.next+"'");else{let C=Gu(H,H.next).map(e=>(H.inline==null?H.inline=e.isInline:H.inline!=e.isInline&&H.err("Mixing inline and block content"),{type:"name",value:e}));return H.pos++,C.length==1?C[0]:{type:"choice",exprs:C}}}function Ku(H){let C=[[]];return t(r(H,0),e()),C;function e(){return C.push([])-1}function V(i,o,n){let l={term:n,to:o};return C[i].push(l),l}function t(i,o){i.forEach(n=>n.to=o)}function r(i,o){if(i.type=="choice")return i.exprs.reduce((n,l)=>n.concat(r(l,o)),[]);if(i.type=="seq")for(let n=0;;n++){let l=r(i.exprs[n],o);if(n==i.exprs.length-1)return l;t(l,o=e())}else if(i.type=="star"){let n=e();return V(o,n),t(r(i.expr,n),n),[V(n)]}else if(i.type=="plus"){let n=e();return t(r(i.expr,o),n),t(r(i.expr,n),n),[V(n)]}else{if(i.type=="opt")return[V(o)].concat(r(i.expr,o));if(i.type=="range"){let n=o;for(let l=0;l<i.min;l++){let s=e();t(r(i.expr,n),s),n=s}if(i.max==-1)t(r(i.expr,n),n);else for(let l=i.min;l<i.max;l++){let s=e();V(n,s),t(r(i.expr,n),s),n=s}return[V(n)]}else{if(i.type=="name")return[V(o,void 0,i.value)];throw new Error("Unknown expr type")}}}}function RL(H,C){return C-H}function fL(H,C){let e=[];return V(C),e.sort(RL);function V(t){let r=H[t];if(r.length==1&&!r[0].term)return V(r[0].to);e.push(t);for(let i=0;i<r.length;i++){let{term:o,to:n}=r[i];!o&&e.indexOf(n)==-1&&V(n)}}}function Qu(H){let C=Object.create(null);return e(fL(H,0));function e(V){let t=[];V.forEach(i=>{H[i].forEach(({term:o,to:n})=>{if(!o)return;let l;for(let s=0;s<t.length;s++)t[s][0]==o&&(l=t[s][1]);fL(H,n).forEach(s=>{l||t.push([o,l=[]]),l.indexOf(s)==-1&&l.push(s)})})});let r=C[V.join(",")]=new K3(V.indexOf(H.length-1)>-1);for(let i=0;i<t.length;i++){let o=t[i][1].sort(RL);r.next.push({type:t[i][0],next:C[o.join(",")]||e(o)})}return r}}function qu(H,C){for(let e=0,V=[H];e<V.length;e++){let t=V[e],r=!t.validEnd,i=[];for(let o=0;o<t.next.length;o++){let{type:n,next:l}=t.next[o];i.push(n.name),r&&!(n.isText||n.hasRequiredAttrs())&&(r=!1),V.indexOf(l)==-1&&V.push(l)}r&&C.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function FL(H){let C=Object.create(null);for(let e in H){let V=H[e];if(!V.hasDefault)return null;C[e]=V.default}return C}function DL(H,C){let e=Object.create(null);for(let V in H){let t=C&&C[V];if(t===void 0){let r=H[V];if(r.hasDefault)t=r.default;else throw new RangeError("No value supplied for attribute "+V)}e[V]=t}return e}function NL(H,C,e,V){for(let t in C)if(!(t in H))throw new RangeError(`Unsupported attribute ${t} for ${e} of type ${t}`);for(let t in H){let r=H[t];r.validate&&r.validate(C[t])}}function IL(H,C){let e=Object.create(null);if(C)for(let V in C)e[V]=new vC(H,V,C[V]);return e}var d9=class H{constructor(C,e,V){this.name=C,this.schema=e,this.spec=V,this.markSet=null,this.groups=V.group?V.group.split(" "):[],this.attrs=IL(C,V.attrs),this.defaultAttrs=FL(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(V.inline||C=="text"),this.isText=C=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==K3.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(C){return this.groups.indexOf(C)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let C in this.attrs)if(this.attrs[C].isRequired)return!0;return!1}compatibleContent(C){return this==C||this.contentMatch.compatible(C.contentMatch)}computeAttrs(C){return!C&&this.defaultAttrs?this.defaultAttrs:DL(this.attrs,C)}create(C=null,e,V){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Z2(this,this.computeAttrs(C),B.from(e),l1.setFrom(V))}createChecked(C=null,e,V){return e=B.from(e),this.checkContent(e),new Z2(this,this.computeAttrs(C),e,l1.setFrom(V))}createAndFill(C=null,e,V){if(C=this.computeAttrs(C),e=B.from(e),e.size){let i=this.contentMatch.fillBefore(e);if(!i)return null;e=i.append(e)}let t=this.contentMatch.matchFragment(e),r=t&&t.fillBefore(B.empty,!0);return r?new Z2(this,C,e.append(r),l1.setFrom(V)):null}validContent(C){let e=this.contentMatch.matchFragment(C);if(!e||!e.validEnd)return!1;for(let V=0;V<C.childCount;V++)if(!this.allowsMarks(C.child(V).marks))return!1;return!0}checkContent(C){if(!this.validContent(C))throw new RangeError(`Invalid content for node ${this.name}: ${C.toString().slice(0,50)}`)}checkAttrs(C){NL(this.attrs,C,"node",this.name)}allowsMarkType(C){return this.markSet==null||this.markSet.indexOf(C)>-1}allowsMarks(C){if(this.markSet==null)return!0;for(let e=0;e<C.length;e++)if(!this.allowsMarkType(C[e].type))return!1;return!0}allowedMarks(C){if(this.markSet==null)return C;let e;for(let V=0;V<C.length;V++)this.allowsMarkType(C[V].type)?e&&e.push(C[V]):e||(e=C.slice(0,V));return e?e.length?e:l1.none:C}static compile(C,e){let V=Object.create(null);C.forEach((r,i)=>V[r]=new H(r,e,i));let t=e.spec.topNode||"doc";if(!V[t])throw new RangeError("Schema is missing its top node type ('"+t+"')");if(!V.text)throw new RangeError("Every schema needs a 'text' type");for(let r in V.text.attrs)throw new RangeError("The text node type should not have attributes");return V}};function ju(H,C,e){let V=e.split("|");return t=>{let r=t===null?"null":typeof t;if(V.indexOf(r)<0)throw new RangeError(`Expected value of type ${V} for attribute ${C} on type ${H}, got ${r}`)}}var vC=class{constructor(C,e,V){this.hasDefault=Object.prototype.hasOwnProperty.call(V,"default"),this.default=V.default,this.validate=typeof V.validate=="string"?ju(C,e,V.validate):V.validate}get isRequired(){return!this.hasDefault}},O7=class H{constructor(C,e,V,t){this.name=C,this.rank=e,this.schema=V,this.spec=t,this.attrs=IL(C,t.attrs),this.excluded=null;let r=FL(this.attrs);this.instance=r?new l1(this,r):null}create(C=null){return!C&&this.instance?this.instance:new l1(this,DL(this.attrs,C))}static compile(C,e){let V=Object.create(null),t=0;return C.forEach((r,i)=>V[r]=new H(r,t++,e,i)),V}removeFromSet(C){for(var e=0;e<C.length;e++)C[e].type==this&&(C=C.slice(0,e).concat(C.slice(e+1)),e--);return C}isInSet(C){for(let e=0;e<C.length;e++)if(C[e].type==this)return C[e]}checkAttrs(C){NL(this.attrs,C,"mark",this.name)}excludes(C){return this.excluded.indexOf(C)>-1}},y7=class{constructor(C){this.linebreakReplacement=null,this.cached=Object.create(null);let e=this.spec={};for(let t in C)e[t]=C[t];e.nodes=dC.from(C.nodes),e.marks=dC.from(C.marks||{}),this.nodes=d9.compile(this.spec.nodes,this),this.marks=O7.compile(this.spec.marks,this);let V=Object.create(null);for(let t in this.nodes){if(t in this.marks)throw new RangeError(t+" can not be both a node and a mark");let r=this.nodes[t],i=r.spec.content||"",o=r.spec.marks;if(r.contentMatch=V[i]||(V[i]=K3.parse(i,this.nodes)),r.inlineContent=r.contentMatch.inlineContent,r.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!r.isInline||!r.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=r}r.markSet=o=="_"?null:o?xL(this,o.split(" ")):o==""||!r.inlineContent?[]:null}for(let t in this.marks){let r=this.marks[t],i=r.spec.excludes;r.excluded=i==null?[r]:i==""?[]:xL(this,i.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(C,e=null,V,t){if(typeof C=="string")C=this.nodeType(C);else if(C instanceof d9){if(C.schema!=this)throw new RangeError("Node type from different schema used ("+C.name+")")}else throw new RangeError("Invalid node type: "+C);return C.createChecked(e,V,t)}text(C,e){let V=this.nodes.text;return new fC(V,V.defaultAttrs,C,l1.setFrom(e))}mark(C,e){return typeof C=="string"&&(C=this.marks[C]),C.create(e)}nodeFromJSON(C){return Z2.fromJSON(this,C)}markFromJSON(C){return l1.fromJSON(this,C)}nodeType(C){let e=this.nodes[C];if(!e)throw new RangeError("Unknown node type: "+C);return e}};function xL(H,C){let e=[];for(let V=0;V<C.length;V++){let t=C[V],r=H.marks[t],i=r;if(r)e.push(r);else for(let o in H.marks){let n=H.marks[o];(t=="_"||n.spec.group&&n.spec.group.split(" ").indexOf(t)>-1)&&e.push(i=n)}if(!i)throw new SyntaxError("Unknown mark type: '"+C[V]+"'")}return e}function Ju(H){return H.tag!=null}function Xu(H){return H.style!=null}var h5=class H{constructor(C,e){this.schema=C,this.rules=e,this.tags=[],this.styles=[];let V=this.matchedStyles=[];e.forEach(t=>{if(Ju(t))this.tags.push(t);else if(Xu(t)){let r=/[^=]*/.exec(t.style)[0];V.indexOf(r)<0&&V.push(r),this.styles.push(t)}}),this.normalizeLists=!this.tags.some(t=>{if(!/^(ul|ol)\b/.test(t.tag)||!t.node)return!1;let r=C.nodes[t.node];return r.contentMatch.matchType(r)})}parse(C,e={}){let V=new m9(this,e,!1);return V.addAll(C,l1.none,e.from,e.to),V.finish()}parseSlice(C,e={}){let V=new m9(this,e,!0);return V.addAll(C,l1.none,e.from,e.to),_.maxOpen(V.finish())}matchTag(C,e,V){for(let t=V?this.tags.indexOf(V)+1:0;t<this.tags.length;t++){let r=this.tags[t];if(em(C,r.tag)&&(r.namespace===void 0||C.namespaceURI==r.namespace)&&(!r.context||e.matchesContext(r.context))){if(r.getAttrs){let i=r.getAttrs(C);if(i===!1)continue;r.attrs=i||void 0}return r}}}matchStyle(C,e,V,t){for(let r=t?this.styles.indexOf(t)+1:0;r<this.styles.length;r++){let i=this.styles[r],o=i.style;if(!(o.indexOf(C)!=0||i.context&&!V.matchesContext(i.context)||o.length>C.length&&(o.charCodeAt(C.length)!=61||o.slice(C.length+1)!=e))){if(i.getAttrs){let n=i.getAttrs(e);if(n===!1)continue;i.attrs=n||void 0}return i}}}static schemaRules(C){let e=[];function V(t){let r=t.priority==null?50:t.priority,i=0;for(;i<e.length;i++){let o=e[i];if((o.priority==null?50:o.priority)<r)break}e.splice(i,0,t)}for(let t in C.marks){let r=C.marks[t].spec.parseDOM;r&&r.forEach(i=>{V(i=hL(i)),i.mark||i.ignore||i.clearMark||(i.mark=t)})}for(let t in C.nodes){let r=C.nodes[t].spec.parseDOM;r&&r.forEach(i=>{V(i=hL(i)),i.node||i.ignore||i.mark||(i.node=t)})}return e}static fromSchema(C){return C.cached.domParser||(C.cached.domParser=new H(C,H.schemaRules(C)))}},_L={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Yu={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},WL={ol:!0,ul:!0},p9=1,u9=2,g7=4;function vL(H,C,e){return C!=null?(C?p9:0)|(C==="full"?u9:0):H&&H.whitespace=="pre"?p9|u9:e&~g7}var E0=class{constructor(C,e,V,t,r,i){this.type=C,this.attrs=e,this.marks=V,this.solid=t,this.options=i,this.content=[],this.activeMarks=l1.none,this.match=r||(i&g7?null:C.contentMatch)}findWrapping(C){if(!this.match){if(!this.type)return[];let e=this.type.contentMatch.fillBefore(B.from(C));if(e)this.match=this.type.contentMatch.matchFragment(e);else{let V=this.type.contentMatch,t;return(t=V.findWrapping(C.type))?(this.match=V,t):null}}return this.match.findWrapping(C.type)}finish(C){if(!(this.options&p9)){let V=this.content[this.content.length-1],t;if(V&&V.isText&&(t=/[ \t\r\n\u000c]+$/.exec(V.text))){let r=V;V.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=r.withText(r.text.slice(0,r.text.length-t[0].length))}}let e=B.from(this.content);return!C&&this.match&&(e=e.append(this.match.fillBefore(B.empty,!0))),this.type?this.type.create(this.attrs,e,this.marks):e}inlineContext(C){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:C.parentNode&&!_L.hasOwnProperty(C.parentNode.nodeName.toLowerCase())}},m9=class{constructor(C,e,V){this.parser=C,this.options=e,this.isOpen=V,this.open=0;let t=e.topNode,r,i=vL(null,e.preserveWhitespace,0)|(V?g7:0);t?r=new E0(t.type,t.attrs,l1.none,!0,e.topMatch||t.type.contentMatch,i):V?r=new E0(null,null,l1.none,!0,null,i):r=new E0(C.schema.topNodeType,null,l1.none,!0,null,i),this.nodes=[r],this.find=e.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(C,e){C.nodeType==3?this.addTextNode(C,e):C.nodeType==1&&this.addElement(C,e)}addTextNode(C,e){let V=C.nodeValue,t=this.top;if(t.options&u9||t.inlineContext(C)||/[^ \t\r\n\u000c]/.test(V)){if(t.options&p9)t.options&u9?V=V.replace(/\r\n?/g,`
`):V=V.replace(/\r?\n|\r/g," ");else if(V=V.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(V)&&this.open==this.nodes.length-1){let r=t.content[t.content.length-1],i=C.previousSibling;(!r||i&&i.nodeName=="BR"||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(V=V.slice(1))}V&&this.insertNode(this.parser.schema.text(V),e),this.findInText(C)}else this.findInside(C)}addElement(C,e,V){let t=C.nodeName.toLowerCase(),r;WL.hasOwnProperty(t)&&this.parser.normalizeLists&&Cm(C);let i=this.options.ruleFromNode&&this.options.ruleFromNode(C)||(r=this.parser.matchTag(C,this,V));if(i?i.ignore:Yu.hasOwnProperty(t))this.findInside(C),this.ignoreFallback(C,e);else if(!i||i.skip||i.closeParent){i&&i.closeParent?this.open=Math.max(0,this.open-1):i&&i.skip.nodeType&&(C=i.skip);let o,n=this.top,l=this.needsBlock;if(_L.hasOwnProperty(t))n.content.length&&n.content[0].isInline&&this.open&&(this.open--,n=this.top),o=!0,n.type||(this.needsBlock=!0);else if(!C.firstChild){this.leafFallback(C,e);return}let s=i&&i.skip?e:this.readStyles(C,e);s&&this.addAll(C,s),o&&this.sync(n),this.needsBlock=l}else{let o=this.readStyles(C,e);o&&this.addElementByRule(C,i,o,i.consuming===!1?r:void 0)}}leafFallback(C,e){C.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(C.ownerDocument.createTextNode(`
`),e)}ignoreFallback(C,e){C.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),e)}readStyles(C,e){let V=C.style;if(V&&V.length)for(let t=0;t<this.parser.matchedStyles.length;t++){let r=this.parser.matchedStyles[t],i=V.getPropertyValue(r);if(i)for(let o=void 0;;){let n=this.parser.matchStyle(r,i,this,o);if(!n)break;if(n.ignore)return null;if(n.clearMark?e=e.filter(l=>!n.clearMark(l)):e=e.concat(this.parser.schema.marks[n.mark].create(n.attrs)),n.consuming===!1)o=n;else break}}return e}addElementByRule(C,e,V,t){let r,i;if(e.node)if(i=this.parser.schema.nodes[e.node],i.isLeaf)this.insertNode(i.create(e.attrs),V)||this.leafFallback(C,V);else{let n=this.enter(i,e.attrs||null,V,e.preserveWhitespace);n&&(r=!0,V=n)}else{let n=this.parser.schema.marks[e.mark];V=V.concat(n.create(e.attrs))}let o=this.top;if(i&&i.isLeaf)this.findInside(C);else if(t)this.addElement(C,V,t);else if(e.getContent)this.findInside(C),e.getContent(C,this.parser.schema).forEach(n=>this.insertNode(n,V));else{let n=C;typeof e.contentElement=="string"?n=C.querySelector(e.contentElement):typeof e.contentElement=="function"?n=e.contentElement(C):e.contentElement&&(n=e.contentElement),this.findAround(C,n,!0),this.addAll(n,V),this.findAround(C,n,!1)}r&&this.sync(o)&&this.open--}addAll(C,e,V,t){let r=V||0;for(let i=V?C.childNodes[V]:C.firstChild,o=t==null?null:C.childNodes[t];i!=o;i=i.nextSibling,++r)this.findAtPoint(C,r),this.addDOM(i,e);this.findAtPoint(C,r)}findPlace(C,e){let V,t;for(let r=this.open;r>=0;r--){let i=this.nodes[r],o=i.findWrapping(C);if(o&&(!V||V.length>o.length)&&(V=o,t=i,!o.length)||i.solid)break}if(!V)return null;this.sync(t);for(let r=0;r<V.length;r++)e=this.enterInner(V[r],null,e,!1);return e}insertNode(C,e){if(C.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&(e=this.enterInner(t,null,e))}let V=this.findPlace(C,e);if(V){this.closeExtra();let t=this.top;t.match&&(t.match=t.match.matchType(C.type));let r=l1.none;for(let i of V.concat(C.marks))(t.type?t.type.allowsMarkType(i.type):ZL(i.type,C.type))&&(r=i.addToSet(r));return t.content.push(C.mark(r)),!0}return!1}enter(C,e,V,t){let r=this.findPlace(C.create(e),V);return r&&(r=this.enterInner(C,e,V,!0,t)),r}enterInner(C,e,V,t=!1,r){this.closeExtra();let i=this.top;i.match=i.match&&i.match.matchType(C);let o=vL(C,r,i.options);i.options&g7&&i.content.length==0&&(o|=g7);let n=l1.none;return V=V.filter(l=>(i.type?i.type.allowsMarkType(l.type):ZL(l.type,C))?(n=l.addToSet(n),!1):!0),this.nodes.push(new E0(C,e,n,t,null,o)),this.open++,V}closeExtra(C=!1){let e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(C));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(C){for(let e=this.open;e>=0;e--)if(this.nodes[e]==C)return this.open=e,!0;return!1}get currentPos(){this.closeExtra();let C=0;for(let e=this.open;e>=0;e--){let V=this.nodes[e].content;for(let t=V.length-1;t>=0;t--)C+=V[t].nodeSize;e&&C++}return C}findAtPoint(C,e){if(this.find)for(let V=0;V<this.find.length;V++)this.find[V].node==C&&this.find[V].offset==e&&(this.find[V].pos=this.currentPos)}findInside(C){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].pos==null&&C.nodeType==1&&C.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}findAround(C,e,V){if(C!=e&&this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&C.nodeType==1&&C.contains(this.find[t].node)&&e.compareDocumentPosition(this.find[t].node)&(V?2:4)&&(this.find[t].pos=this.currentPos)}findInText(C){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==C&&(this.find[e].pos=this.currentPos-(C.nodeValue.length-this.find[e].offset))}matchesContext(C){if(C.indexOf("|")>-1)return C.split(/\s*\|\s*/).some(this.matchesContext,this);let e=C.split("/"),V=this.options.context,t=!this.isOpen&&(!V||V.parent.type==this.nodes[0].type),r=-(V?V.depth+1:0)+(t?0:1),i=(o,n)=>{for(;o>=0;o--){let l=e[o];if(l==""){if(o==e.length-1||o==0)continue;for(;n>=r;n--)if(i(o-1,n))return!0;return!1}else{let s=n>0||n==0&&t?this.nodes[n].type:V&&n>=r?V.node(n-r).type:null;if(!s||s.name!=l&&!s.isInGroup(l))return!1;n--}}return!0};return i(e.length-1,this.open)}textblockFromContext(){let C=this.options.context;if(C)for(let e=C.depth;e>=0;e--){let V=C.node(e).contentMatchAt(C.indexAfter(e)).defaultType;if(V&&V.isTextblock&&V.defaultAttrs)return V}for(let e in this.parser.schema.nodes){let V=this.parser.schema.nodes[e];if(V.isTextblock&&V.defaultAttrs)return V}}};function Cm(H){for(let C=H.firstChild,e=null;C;C=C.nextSibling){let V=C.nodeType==1?C.nodeName.toLowerCase():null;V&&WL.hasOwnProperty(V)&&e?(e.appendChild(C),C=e):V=="li"?e=C:V&&(e=null)}}function em(H,C){return(H.matches||H.msMatchesSelector||H.webkitMatchesSelector||H.mozMatchesSelector).call(H,C)}function hL(H){let C={};for(let e in H)C[e]=H[e];return C}function ZL(H,C){let e=C.schema.nodes;for(let V in e){let t=e[V];if(!t.allowsMarkType(H))continue;let r=[],i=o=>{r.push(o);for(let n=0;n<o.edgeCount;n++){let{type:l,next:s}=o.edge(n);if(l==C||r.indexOf(s)<0&&i(s))return!0}};if(i(t.contentMatch))return!0}}var G5=class H{constructor(C,e){this.nodes=C,this.marks=e}serializeFragment(C,e={},V){V||(V=uC(e).createDocumentFragment());let t=V,r=[];return C.forEach(i=>{if(r.length||i.marks.length){let o=0,n=0;for(;o<r.length&&n<i.marks.length;){let l=i.marks[n];if(!this.marks[l.type.name]){n++;continue}if(!l.eq(r[o][0])||l.type.spec.spanning===!1)break;o++,n++}for(;o<r.length;)t=r.pop()[1];for(;n<i.marks.length;){let l=i.marks[n++],s=this.serializeMark(l,i.isInline,e);s&&(r.push([l,t]),t.appendChild(s.dom),t=s.contentDOM||s.dom)}}t.appendChild(this.serializeNodeInner(i,e))}),V}serializeNodeInner(C,e){let{dom:V,contentDOM:t}=a9(uC(e),this.nodes[C.type.name](C),null,C.attrs);if(t){if(C.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(C.content,e,t)}return V}serializeNode(C,e={}){let V=this.serializeNodeInner(C,e);for(let t=C.marks.length-1;t>=0;t--){let r=this.serializeMark(C.marks[t],C.isInline,e);r&&((r.contentDOM||r.dom).appendChild(V),V=r.dom)}return V}serializeMark(C,e,V={}){let t=this.marks[C.type.name];return t&&a9(uC(V),t(C,e),null,C.attrs)}static renderSpec(C,e,V=null,t){return a9(C,e,V,t)}static fromSchema(C){return C.cached.domSerializer||(C.cached.domSerializer=new H(this.nodesFromSchema(C),this.marksFromSchema(C)))}static nodesFromSchema(C){let e=SL(C.nodes);return e.text||(e.text=V=>V.text),e}static marksFromSchema(C){return SL(C.marks)}};function SL(H){let C={};for(let e in H){let V=H[e].spec.toDOM;V&&(C[e]=V)}return C}function uC(H){return H.document||window.document}var gL=new WeakMap;function Hm(H){let C=gL.get(H);return C===void 0&&gL.set(H,C=Vm(H)),C}function Vm(H){let C=null;function e(V){if(V&&typeof V=="object")if(Array.isArray(V))if(typeof V[0]=="string")C||(C=[]),C.push(V);else for(let t=0;t<V.length;t++)e(V[t]);else for(let t in V)e(V[t])}return e(H),C}function a9(H,C,e,V){if(typeof C=="string")return{dom:H.createTextNode(C)};if(C.nodeType!=null)return{dom:C};if(C.dom&&C.dom.nodeType!=null)return C;let t=C[0],r;if(typeof t!="string")throw new RangeError("Invalid array passed to renderSpec");if(V&&(r=Hm(V))&&r.indexOf(C)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let i=t.indexOf(" ");i>0&&(e=t.slice(0,i),t=t.slice(i+1));let o,n=e?H.createElementNS(e,t):H.createElement(t),l=C[1],s=1;if(l&&typeof l=="object"&&l.nodeType==null&&!Array.isArray(l)){s=2;for(let d in l)if(l[d]!=null){let p=d.indexOf(" ");p>0?n.setAttributeNS(d.slice(0,p),d.slice(p+1),l[d]):n.setAttribute(d,l[d])}}for(let d=s;d<C.length;d++){let p=C[d];if(p===0){if(d<C.length-1||d>s)throw new RangeError("Content hole must be the only child of its parent node");return{dom:n,contentDOM:n}}else{let{dom:m,contentDOM:c}=a9(H,p,e,V);if(n.appendChild(m),c){if(o)throw new RangeError("Multiple content holes");o=c}}}return{dom:n,contentDOM:o}}var GL=65535,$L=Math.pow(2,16);function tm(H,C){return H+C*$L}function zL(H){return H&GL}function Lm(H){return(H-(H&GL))/$L}var KL=1,QL=2,c9=4,qL=8,w7=class{constructor(C,e,V){this.pos=C,this.delInfo=e,this.recover=V}get deleted(){return(this.delInfo&qL)>0}get deletedBefore(){return(this.delInfo&(KL|c9))>0}get deletedAfter(){return(this.delInfo&(QL|c9))>0}get deletedAcross(){return(this.delInfo&c9)>0}},$5=class H{constructor(C,e=!1){if(this.ranges=C,this.inverted=e,!C.length&&H.empty)return H.empty}recover(C){let e=0,V=zL(C);if(!this.inverted)for(let t=0;t<V;t++)e+=this.ranges[t*3+2]-this.ranges[t*3+1];return this.ranges[V*3]+e+Lm(C)}mapResult(C,e=1){return this._map(C,e,!1)}map(C,e=1){return this._map(C,e,!0)}_map(C,e,V){let t=0,r=this.inverted?2:1,i=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let n=this.ranges[o]-(this.inverted?t:0);if(n>C)break;let l=this.ranges[o+r],s=this.ranges[o+i],d=n+l;if(C<=d){let p=l?C==n?-1:C==d?1:e:e,m=n+t+(p<0?0:s);if(V)return m;let c=C==(e<0?n:d)?null:tm(o/3,C-n),h=C==n?QL:C==d?KL:c9;return(e<0?C!=n:C!=d)&&(h|=qL),new w7(m,h,c)}t+=s-l}return V?C+t:new w7(C+t,0,null)}touches(C,e){let V=0,t=zL(e),r=this.inverted?2:1,i=this.inverted?1:2;for(let o=0;o<this.ranges.length;o+=3){let n=this.ranges[o]-(this.inverted?V:0);if(n>C)break;let l=this.ranges[o+r],s=n+l;if(C<=s&&o==t*3)return!0;V+=this.ranges[o+i]-l}return!1}forEach(C){let e=this.inverted?2:1,V=this.inverted?1:2;for(let t=0,r=0;t<this.ranges.length;t+=3){let i=this.ranges[t],o=i-(this.inverted?r:0),n=i+(this.inverted?0:r),l=this.ranges[t+e],s=this.ranges[t+V];C(o,o+l,n,n+s),r+=s-l}}invert(){return new H(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(C){return C==0?H.empty:new H(C<0?[0,-C,0]:[0,0,C])}};$5.empty=new $5([]);var T7=class H{constructor(C=[],e,V=0,t=C.length){this.maps=C,this.mirror=e,this.from=V,this.to=t}slice(C=0,e=this.maps.length){return new H(this.maps,this.mirror,C,e)}copy(){return new H(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(C,e){this.to=this.maps.push(C),e!=null&&this.setMirror(this.maps.length-1,e)}appendMapping(C){for(let e=0,V=this.maps.length;e<C.maps.length;e++){let t=C.getMirror(e);this.appendMap(C.maps[e],t!=null&&t<e?V+t:void 0)}}getMirror(C){if(this.mirror){for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==C)return this.mirror[e+(e%2?-1:1)]}}setMirror(C,e){this.mirror||(this.mirror=[]),this.mirror.push(C,e)}appendMappingInverted(C){for(let e=C.maps.length-1,V=this.maps.length+C.maps.length;e>=0;e--){let t=C.getMirror(e);this.appendMap(C.maps[e].invert(),t!=null&&t>e?V-t-1:void 0)}}invert(){let C=new H;return C.appendMappingInverted(this),C}map(C,e=1){if(this.mirror)return this._map(C,e,!0);for(let V=this.from;V<this.to;V++)C=this.maps[V].map(C,e);return C}mapResult(C,e=1){return this._map(C,e,!1)}_map(C,e,V){let t=0;for(let r=this.from;r<this.to;r++){let i=this.maps[r],o=i.mapResult(C,e);if(o.recover!=null){let n=this.getMirror(r);if(n!=null&&n>r&&n<this.to){r=n,C=this.maps[n].recover(o.recover);continue}}t|=o.delInfo,C=o.pos}return V?C:new w7(C,t,null)}},hC=Object.create(null),J1=class{getMap(){return $5.empty}merge(C){return null}static fromJSON(C,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let V=hC[e.stepType];if(!V)throw new RangeError(`No step type ${e.stepType} defined`);return V.fromJSON(C,e)}static jsonID(C,e){if(C in hC)throw new RangeError("Duplicate use of step JSON ID "+C);return hC[C]=e,e.prototype.jsonID=C,e}},e2=class H{constructor(C,e){this.doc=C,this.failed=e}static ok(C){return new H(C,null)}static fail(C){return new H(null,C)}static fromReplace(C,e,V,t){try{return H.ok(C.replace(e,V,t))}catch(r){if(r instanceof G3)return H.fail(r.message);throw r}}};function yC(H,C,e){let V=[];for(let t=0;t<H.childCount;t++){let r=H.child(t);r.content.size&&(r=r.copy(yC(r.content,C,r))),r.isInline&&(r=C(r,e,t)),V.push(r)}return B.fromArray(V)}var P7=class H extends J1{constructor(C,e,V){super(),this.from=C,this.to=e,this.mark=V}apply(C){let e=C.slice(this.from,this.to),V=C.resolve(this.from),t=V.node(V.sharedDepth(this.to)),r=new _(yC(e.content,(i,o)=>!i.isAtom||!o.type.allowsMarkType(this.mark.type)?i:i.mark(this.mark.addToSet(i.marks)),t),e.openStart,e.openEnd);return e2.fromReplace(C,this.from,this.to,r)}invert(){return new Q3(this.from,this.to,this.mark)}map(C){let e=C.mapResult(this.from,1),V=C.mapResult(this.to,-1);return e.deleted&&V.deleted||e.pos>=V.pos?null:new H(e.pos,V.pos,this.mark)}merge(C){return C instanceof H&&C.mark.eq(this.mark)&&this.from<=C.to&&this.to>=C.from?new H(Math.min(this.from,C.from),Math.max(this.to,C.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(C,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new H(e.from,e.to,C.markFromJSON(e.mark))}};J1.jsonID("addMark",P7);var Q3=class H extends J1{constructor(C,e,V){super(),this.from=C,this.to=e,this.mark=V}apply(C){let e=C.slice(this.from,this.to),V=new _(yC(e.content,t=>t.mark(this.mark.removeFromSet(t.marks)),C),e.openStart,e.openEnd);return e2.fromReplace(C,this.from,this.to,V)}invert(){return new P7(this.from,this.to,this.mark)}map(C){let e=C.mapResult(this.from,1),V=C.mapResult(this.to,-1);return e.deleted&&V.deleted||e.pos>=V.pos?null:new H(e.pos,V.pos,this.mark)}merge(C){return C instanceof H&&C.mark.eq(this.mark)&&this.from<=C.to&&this.to>=C.from?new H(Math.min(this.from,C.from),Math.max(this.to,C.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(C,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new H(e.from,e.to,C.markFromJSON(e.mark))}};J1.jsonID("removeMark",Q3);var B7=class H extends J1{constructor(C,e){super(),this.pos=C,this.mark=e}apply(C){let e=C.nodeAt(this.pos);if(!e)return e2.fail("No node at mark step's position");let V=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return e2.fromReplace(C,this.pos,this.pos+1,new _(B.from(V),0,e.isLeaf?0:1))}invert(C){let e=C.nodeAt(this.pos);if(e){let V=this.mark.addToSet(e.marks);if(V.length==e.marks.length){for(let t=0;t<e.marks.length;t++)if(!e.marks[t].isInSet(V))return new H(this.pos,e.marks[t]);return new H(this.pos,this.mark)}}return new E7(this.pos,this.mark)}map(C){let e=C.mapResult(this.pos,1);return e.deletedAfter?null:new H(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(C,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new H(e.pos,C.markFromJSON(e.mark))}};J1.jsonID("addNodeMark",B7);var E7=class H extends J1{constructor(C,e){super(),this.pos=C,this.mark=e}apply(C){let e=C.nodeAt(this.pos);if(!e)return e2.fail("No node at mark step's position");let V=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return e2.fromReplace(C,this.pos,this.pos+1,new _(B.from(V),0,e.isLeaf?0:1))}invert(C){let e=C.nodeAt(this.pos);return!e||!this.mark.isInSet(e.marks)?this:new B7(this.pos,this.mark)}map(C){let e=C.mapResult(this.pos,1);return e.deletedAfter?null:new H(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(C,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new H(e.pos,C.markFromJSON(e.mark))}};J1.jsonID("removeNodeMark",E7);var M2=class H extends J1{constructor(C,e,V,t=!1){super(),this.from=C,this.to=e,this.slice=V,this.structure=t}apply(C){return this.structure&&gC(C,this.from,this.to)?e2.fail("Structure replace would overwrite content"):e2.fromReplace(C,this.from,this.to,this.slice)}getMap(){return new $5([this.from,this.to-this.from,this.slice.size])}invert(C){return new H(this.from,this.from+this.slice.size,C.slice(this.from,this.to))}map(C){let e=C.mapResult(this.from,1),V=C.mapResult(this.to,-1);return e.deletedAcross&&V.deletedAcross?null:new H(e.pos,Math.max(e.pos,V.pos),this.slice)}merge(C){if(!(C instanceof H)||C.structure||this.structure)return null;if(this.from+this.slice.size==C.from&&!this.slice.openEnd&&!C.slice.openStart){let e=this.slice.size+C.slice.size==0?_.empty:new _(this.slice.content.append(C.slice.content),this.slice.openStart,C.slice.openEnd);return new H(this.from,this.to+(C.to-C.from),e,this.structure)}else if(C.to==this.from&&!this.slice.openStart&&!C.slice.openEnd){let e=this.slice.size+C.slice.size==0?_.empty:new _(C.slice.content.append(this.slice.content),C.slice.openStart,this.slice.openEnd);return new H(C.from,this.to,e,this.structure)}else return null}toJSON(){let C={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(C.slice=this.slice.toJSON()),this.structure&&(C.structure=!0),C}static fromJSON(C,e){if(typeof e.from!="number"||typeof e.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new H(e.from,e.to,_.fromJSON(C,e.slice),!!e.structure)}};J1.jsonID("replace",M2);var E1=class H extends J1{constructor(C,e,V,t,r,i,o=!1){super(),this.from=C,this.to=e,this.gapFrom=V,this.gapTo=t,this.slice=r,this.insert=i,this.structure=o}apply(C){if(this.structure&&(gC(C,this.from,this.gapFrom)||gC(C,this.gapTo,this.to)))return e2.fail("Structure gap-replace would overwrite content");let e=C.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return e2.fail("Gap is not a flat range");let V=this.slice.insertAt(this.insert,e.content);return V?e2.fromReplace(C,this.from,this.to,V):e2.fail("Content does not fit in gap")}getMap(){return new $5([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(C){let e=this.gapTo-this.gapFrom;return new H(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,C.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(C){let e=C.mapResult(this.from,1),V=C.mapResult(this.to,-1),t=this.from==this.gapFrom?e.pos:C.map(this.gapFrom,-1),r=this.to==this.gapTo?V.pos:C.map(this.gapTo,1);return e.deletedAcross&&V.deletedAcross||t<e.pos||r>V.pos?null:new H(e.pos,V.pos,t,r,this.slice,this.insert,this.structure)}toJSON(){let C={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(C.slice=this.slice.toJSON()),this.structure&&(C.structure=!0),C}static fromJSON(C,e){if(typeof e.from!="number"||typeof e.to!="number"||typeof e.gapFrom!="number"||typeof e.gapTo!="number"||typeof e.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new H(e.from,e.to,e.gapFrom,e.gapTo,_.fromJSON(C,e.slice),e.insert,!!e.structure)}};J1.jsonID("replaceAround",E1);function gC(H,C,e){let V=H.resolve(C),t=e-C,r=V.depth;for(;t>0&&r>0&&V.indexAfter(r)==V.node(r).childCount;)r--,t--;if(t>0){let i=V.node(r).maybeChild(V.indexAfter(r));for(;t>0;){if(!i||i.isLeaf)return!0;i=i.firstChild,t--}}return!1}function rm(H,C,e,V){let t=[],r=[],i,o;H.doc.nodesBetween(C,e,(n,l,s)=>{if(!n.isInline)return;let d=n.marks;if(!V.isInSet(d)&&s.type.allowsMarkType(V.type)){let p=Math.max(l,C),m=Math.min(l+n.nodeSize,e),c=V.addToSet(d);for(let h=0;h<d.length;h++)d[h].isInSet(c)||(i&&i.to==p&&i.mark.eq(d[h])?i.to=m:t.push(i=new Q3(p,m,d[h])));o&&o.to==p?o.to=m:r.push(o=new P7(p,m,V))}}),t.forEach(n=>H.step(n)),r.forEach(n=>H.step(n))}function im(H,C,e,V){let t=[],r=0;H.doc.nodesBetween(C,e,(i,o)=>{if(!i.isInline)return;r++;let n=null;if(V instanceof O7){let l=i.marks,s;for(;s=V.isInSet(l);)(n||(n=[])).push(s),l=s.removeFromSet(l)}else V?V.isInSet(i.marks)&&(n=[V]):n=i.marks;if(n&&n.length){let l=Math.min(o+i.nodeSize,e);for(let s=0;s<n.length;s++){let d=n[s],p;for(let m=0;m<t.length;m++){let c=t[m];c.step==r-1&&d.eq(t[m].style)&&(p=c)}p?(p.to=l,p.step=r):t.push({style:d,from:Math.max(o,C),to:l,step:r})}}}),t.forEach(i=>H.step(new Q3(i.from,i.to,i.style)))}function kC(H,C,e,V=e.contentMatch,t=!0){let r=H.doc.nodeAt(C),i=[],o=C+1;for(let n=0;n<r.childCount;n++){let l=r.child(n),s=o+l.nodeSize,d=V.matchType(l.type);if(!d)i.push(new M2(o,s,_.empty));else{V=d;for(let p=0;p<l.marks.length;p++)e.allowsMarkType(l.marks[p].type)||H.step(new Q3(o,s,l.marks[p]));if(t&&l.isText&&e.whitespace!="pre"){let p,m=/\r?\n|\r/g,c;for(;p=m.exec(l.text);)c||(c=new _(B.from(e.schema.text(" ",e.allowedMarks(l.marks))),0,0)),i.push(new M2(o+p.index,o+p.index+p[0].length,c))}}o=s}if(!V.validEnd){let n=V.fillBefore(B.empty,!0);H.replace(o,o,new _(n,0,0))}for(let n=i.length-1;n>=0;n--)H.step(i[n])}function Mm(H,C,e){return(C==0||H.canReplace(C,H.childCount))&&(e==H.childCount||H.canReplace(0,e))}function K5(H){let e=H.parent.content.cutByIndex(H.startIndex,H.endIndex);for(let V=H.depth;;--V){let t=H.$from.node(V),r=H.$from.index(V),i=H.$to.indexAfter(V);if(V<H.depth&&t.canReplace(r,i,e))return V;if(V==0||t.type.spec.isolating||!Mm(t,r,i))break}return null}function om(H,C,e){let{$from:V,$to:t,depth:r}=C,i=V.before(r+1),o=t.after(r+1),n=i,l=o,s=B.empty,d=0;for(let c=r,h=!1;c>e;c--)h||V.index(c)>0?(h=!0,s=B.from(V.node(c).copy(s)),d++):n--;let p=B.empty,m=0;for(let c=r,h=!1;c>e;c--)h||t.after(c+1)<t.end(c)?(h=!0,p=B.from(t.node(c).copy(p)),m++):l++;H.step(new E1(n,l,i,o,new _(s.append(p),d,m),s.size-d,!0))}function D0(H,C,e=null,V=H){let t=nm(H,C),r=t&&am(V,C);return r?t.map(UL).concat({type:C,attrs:e}).concat(r.map(UL)):null}function UL(H){return{type:H,attrs:null}}function nm(H,C){let{parent:e,startIndex:V,endIndex:t}=H,r=e.contentMatchAt(V).findWrapping(C);if(!r)return null;let i=r.length?r[0]:C;return e.canReplaceWith(V,t,i)?r:null}function am(H,C){let{parent:e,startIndex:V,endIndex:t}=H,r=e.child(V),i=C.contentMatch.findWrapping(r.type);if(!i)return null;let n=(i.length?i[i.length-1]:C).contentMatch;for(let l=V;n&&l<t;l++)n=n.matchType(e.child(l).type);return!n||!n.validEnd?null:i}function lm(H,C,e){let V=B.empty;for(let i=e.length-1;i>=0;i--){if(V.size){let o=e[i].type.contentMatch.matchFragment(V);if(!o||!o.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}V=B.from(e[i].type.create(e[i].attrs,V))}let t=C.start,r=C.end;H.step(new E1(t,r,t,r,new _(V,0,0),e.length,!0))}function sm(H,C,e,V,t){if(!V.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let r=H.steps.length;H.doc.nodesBetween(C,e,(i,o)=>{let n=typeof t=="function"?t(i):t;if(i.isTextblock&&!i.hasMarkup(V,n)&&Am(H.doc,H.mapping.slice(r).map(o),V)){let l=null;if(V.schema.linebreakReplacement){let m=V.whitespace=="pre",c=!!V.contentMatch.matchType(V.schema.linebreakReplacement);m&&!c?l=!1:!m&&c&&(l=!0)}l===!1&&JL(H,i,o,r),kC(H,H.mapping.slice(r).map(o,1),V,void 0,l===null);let s=H.mapping.slice(r),d=s.map(o,1),p=s.map(o+i.nodeSize,1);return H.step(new E1(d,p,d+1,p-1,new _(B.from(V.create(n,null,i.marks)),0,0),1,!0)),l===!0&&jL(H,i,o,r),!1}})}function jL(H,C,e,V){C.forEach((t,r)=>{if(t.isText){let i,o=/\r?\n|\r/g;for(;i=o.exec(t.text);){let n=H.mapping.slice(V).map(e+1+r+i.index);H.replaceWith(n,n+1,C.type.schema.linebreakReplacement.create())}}})}function JL(H,C,e,V){C.forEach((t,r)=>{if(t.type==t.type.schema.linebreakReplacement){let i=H.mapping.slice(V).map(e+1+r);H.replaceWith(i,i+1,C.type.schema.text(`
`))}})}function Am(H,C,e){let V=H.resolve(C),t=V.index();return V.parent.canReplaceWith(t,t+1,e)}function dm(H,C,e,V,t){let r=H.doc.nodeAt(C);if(!r)throw new RangeError("No node at given position");e||(e=r.type);let i=e.create(V,null,t||r.marks);if(r.isLeaf)return H.replaceWith(C,C+r.nodeSize,i);if(!e.validContent(r.content))throw new RangeError("Invalid content for node type "+e.name);H.step(new E1(C,C+r.nodeSize,C+1,C+r.nodeSize-1,new _(B.from(i),0,0),1,!0))}function K2(H,C,e=1,V){let t=H.resolve(C),r=t.depth-e,i=V&&V[V.length-1]||t.parent;if(r<0||t.parent.type.spec.isolating||!t.parent.canReplace(t.index(),t.parent.childCount)||!i.type.validContent(t.parent.content.cutByIndex(t.index(),t.parent.childCount)))return!1;for(let l=t.depth-1,s=e-2;l>r;l--,s--){let d=t.node(l),p=t.index(l);if(d.type.spec.isolating)return!1;let m=d.content.cutByIndex(p,d.childCount),c=V&&V[s+1];c&&(m=m.replaceChild(0,c.type.create(c.attrs)));let h=V&&V[s]||d;if(!d.canReplace(p+1,d.childCount)||!h.type.validContent(m))return!1}let o=t.indexAfter(r),n=V&&V[0];return t.node(r).canReplaceWith(o,o,n?n.type:t.node(r+1).type)}function pm(H,C,e=1,V){let t=H.doc.resolve(C),r=B.empty,i=B.empty;for(let o=t.depth,n=t.depth-e,l=e-1;o>n;o--,l--){r=B.from(t.node(o).copy(r));let s=V&&V[l];i=B.from(s?s.type.create(s.attrs,i):t.node(o).copy(i))}H.step(new M2(C,C,new _(r.append(i),e,e),!0))}function a5(H,C){let e=H.resolve(C),V=e.index();return XL(e.nodeBefore,e.nodeAfter)&&e.parent.canReplace(V,V+1)}function um(H,C){C.content.size||H.type.compatibleContent(C.type);let e=H.contentMatchAt(H.childCount),{linebreakReplacement:V}=H.type.schema;for(let t=0;t<C.childCount;t++){let r=C.child(t),i=r.type==V?H.type.schema.nodes.text:r.type;if(e=e.matchType(i),!e||!H.type.allowsMarks(r.marks))return!1}return e.validEnd}function XL(H,C){return!!(H&&C&&!H.isLeaf&&um(H,C))}function N0(H,C,e=-1){let V=H.resolve(C);for(let t=V.depth;;t--){let r,i,o=V.index(t);if(t==V.depth?(r=V.nodeBefore,i=V.nodeAfter):e>0?(r=V.node(t+1),o++,i=V.node(t).maybeChild(o)):(r=V.node(t).maybeChild(o-1),i=V.node(t+1)),r&&!r.isTextblock&&XL(r,i)&&V.node(t).canReplace(o,o+1))return C;if(t==0)break;C=e<0?V.before(t):V.after(t)}}function mm(H,C,e){let V=null,{linebreakReplacement:t}=H.doc.type.schema,r=H.doc.resolve(C-e),i=r.node().type;if(t&&i.inlineContent){let s=i.whitespace=="pre",d=!!i.contentMatch.matchType(t);s&&!d?V=!1:!s&&d&&(V=!0)}let o=H.steps.length;if(V===!1){let s=H.doc.resolve(C+e);JL(H,s.node(),s.before(),o)}i.inlineContent&&kC(H,C+e-1,i,r.node().contentMatchAt(r.index()),V==null);let n=H.mapping.slice(o),l=n.map(C-e);if(H.step(new M2(l,n.map(C+e,-1),_.empty,!0)),V===!0){let s=H.doc.resolve(l);jL(H,s.node(),s.before(),H.steps.length)}return H}function cm(H,C,e){let V=H.resolve(C);if(V.parent.canReplaceWith(V.index(),V.index(),e))return C;if(V.parentOffset==0)for(let t=V.depth-1;t>=0;t--){let r=V.index(t);if(V.node(t).canReplaceWith(r,r,e))return V.before(t+1);if(r>0)return null}if(V.parentOffset==V.parent.content.size)for(let t=V.depth-1;t>=0;t--){let r=V.indexAfter(t);if(V.node(t).canReplaceWith(r,r,e))return V.after(t+1);if(r<V.node(t).childCount)return null}return null}function v9(H,C,e){let V=H.resolve(C);if(!e.content.size)return C;let t=e.content;for(let r=0;r<e.openStart;r++)t=t.firstChild.content;for(let r=1;r<=(e.openStart==0&&e.size?2:1);r++)for(let i=V.depth;i>=0;i--){let o=i==V.depth?0:V.pos<=(V.start(i+1)+V.end(i+1))/2?-1:1,n=V.index(i)+(o>0?1:0),l=V.node(i),s=!1;if(r==1)s=l.canReplace(n,n,t);else{let d=l.contentMatchAt(n).findWrapping(t.firstChild.type);s=d&&l.canReplaceWith(n,n,d[0])}if(s)return o==0?V.pos:o<0?V.before(i+1):V.after(i+1)}return null}function R7(H,C,e=C,V=_.empty){if(C==e&&!V.size)return null;let t=H.resolve(C),r=H.resolve(e);return YL(t,r,V)?new M2(C,e,V):new OC(t,r,V).fit()}function YL(H,C,e){return!e.openStart&&!e.openEnd&&H.start()==C.start()&&H.parent.canReplace(H.index(),C.index(),e.content)}var OC=class{constructor(C,e,V){this.$from=C,this.$to=e,this.unplaced=V,this.frontier=[],this.placed=B.empty;for(let t=0;t<=C.depth;t++){let r=C.node(t);this.frontier.push({type:r.type,match:r.contentMatchAt(C.indexAfter(t))})}for(let t=C.depth;t>0;t--)this.placed=B.from(C.node(t).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let l=this.findFittable();l?this.placeNodes(l):this.openMore()||this.dropNode()}let C=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,V=this.$from,t=this.close(C<0?this.$to:V.doc.resolve(C));if(!t)return null;let r=this.placed,i=V.depth,o=t.depth;for(;i&&o&&r.childCount==1;)r=r.firstChild.content,i--,o--;let n=new _(r,i,o);return C>-1?new E1(V.pos,C,this.$to.pos,this.$to.end(),n,e):n.size||V.pos!=this.$to.pos?new M2(V.pos,t.pos,n):null}findFittable(){let C=this.unplaced.openStart;for(let e=this.unplaced.content,V=0,t=this.unplaced.openEnd;V<C;V++){let r=e.firstChild;if(e.childCount>1&&(t=0),r.type.spec.isolating&&t<=V){C=V;break}e=r.content}for(let e=1;e<=2;e++)for(let V=e==1?C:this.unplaced.openStart;V>=0;V--){let t,r=null;V?(r=ZC(this.unplaced.content,V-1).firstChild,t=r.content):t=this.unplaced.content;let i=t.firstChild;for(let o=this.depth;o>=0;o--){let{type:n,match:l}=this.frontier[o],s,d=null;if(e==1&&(i?l.matchType(i.type)||(d=l.fillBefore(B.from(i),!1)):r&&n.compatibleContent(r.type)))return{sliceDepth:V,frontierDepth:o,parent:r,inject:d};if(e==2&&i&&(s=l.findWrapping(i.type)))return{sliceDepth:V,frontierDepth:o,parent:r,wrap:s};if(r&&l.matchType(r.type))break}}}openMore(){let{content:C,openStart:e,openEnd:V}=this.unplaced,t=ZC(C,e);return!t.childCount||t.firstChild.isLeaf?!1:(this.unplaced=new _(C,e+1,Math.max(V,t.size+e>=C.size-V?e+1:0)),!0)}dropNode(){let{content:C,openStart:e,openEnd:V}=this.unplaced,t=ZC(C,e);if(t.childCount<=1&&e>0){let r=C.size-e<=e+t.size;this.unplaced=new _(k7(C,e-1,1),e-1,r?e-1:V)}else this.unplaced=new _(k7(C,e,1),e,V)}placeNodes({sliceDepth:C,frontierDepth:e,parent:V,inject:t,wrap:r}){for(;this.depth>e;)this.closeFrontierNode();if(r)for(let h=0;h<r.length;h++)this.openFrontierNode(r[h]);let i=this.unplaced,o=V?V.content:i.content,n=i.openStart-C,l=0,s=[],{match:d,type:p}=this.frontier[e];if(t){for(let h=0;h<t.childCount;h++)s.push(t.child(h));d=d.matchFragment(t)}let m=o.size+C-(i.content.size-i.openEnd);for(;l<o.childCount;){let h=o.child(l),S=d.matchType(h.type);if(!S)break;l++,(l>1||n==0||h.content.size)&&(d=S,s.push(Cr(h.mark(p.allowedMarks(h.marks)),l==1?n:0,l==o.childCount?m:-1)))}let c=l==o.childCount;c||(m=-1),this.placed=b7(this.placed,e,B.from(s)),this.frontier[e].match=d,c&&m<0&&V&&V.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let h=0,S=o;h<m;h++){let O=S.lastChild;this.frontier.push({type:O.type,match:O.contentMatchAt(O.childCount)}),S=O.content}this.unplaced=c?C==0?_.empty:new _(k7(i.content,C-1,1),C-1,m<0?i.openEnd:C-1):new _(k7(i.content,C,l),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let C=this.frontier[this.depth],e;if(!C.type.isTextblock||!SC(this.$to,this.$to.depth,C.type,C.match,!1)||this.$to.depth==this.depth&&(e=this.findCloseLevel(this.$to))&&e.depth==this.depth)return-1;let{depth:V}=this.$to,t=this.$to.after(V);for(;V>1&&t==this.$to.end(--V);)++t;return t}findCloseLevel(C){C:for(let e=Math.min(this.depth,C.depth);e>=0;e--){let{match:V,type:t}=this.frontier[e],r=e<C.depth&&C.end(e+1)==C.pos+(C.depth-(e+1)),i=SC(C,e,t,V,r);if(i){for(let o=e-1;o>=0;o--){let{match:n,type:l}=this.frontier[o],s=SC(C,o,l,n,!0);if(!s||s.childCount)continue C}return{depth:e,fit:i,move:r?C.doc.resolve(C.after(e+1)):C}}}}close(C){let e=this.findCloseLevel(C);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=b7(this.placed,e.depth,e.fit)),C=e.move;for(let V=e.depth+1;V<=C.depth;V++){let t=C.node(V),r=t.type.contentMatch.fillBefore(t.content,!0,C.index(V));this.openFrontierNode(t.type,t.attrs,r)}return C}openFrontierNode(C,e=null,V){let t=this.frontier[this.depth];t.match=t.match.matchType(C),this.placed=b7(this.placed,this.depth,B.from(C.create(e,V))),this.frontier.push({type:C,match:C.contentMatch})}closeFrontierNode(){let e=this.frontier.pop().match.fillBefore(B.empty,!0);e.childCount&&(this.placed=b7(this.placed,this.frontier.length,e))}};function k7(H,C,e){return C==0?H.cutByIndex(e,H.childCount):H.replaceChild(0,H.firstChild.copy(k7(H.firstChild.content,C-1,e)))}function b7(H,C,e){return C==0?H.append(e):H.replaceChild(H.childCount-1,H.lastChild.copy(b7(H.lastChild.content,C-1,e)))}function ZC(H,C){for(let e=0;e<C;e++)H=H.firstChild.content;return H}function Cr(H,C,e){if(C<=0)return H;let V=H.content;return C>1&&(V=V.replaceChild(0,Cr(V.firstChild,C-1,V.childCount==1?e-1:0))),C>0&&(V=H.type.contentMatch.fillBefore(V).append(V),e<=0&&(V=V.append(H.type.contentMatch.matchFragment(V).fillBefore(B.empty,!0)))),H.copy(V)}function SC(H,C,e,V,t){let r=H.node(C),i=t?H.indexAfter(C):H.index(C);if(i==r.childCount&&!e.compatibleContent(r.type))return null;let o=V.fillBefore(r.content,!0,i);return o&&!fm(e,r.content,i)?o:null}function fm(H,C,e){for(let V=e;V<C.childCount;V++)if(!H.allowsMarks(C.child(V).marks))return!0;return!1}function xm(H){return H.spec.defining||H.spec.definingForContent}function vm(H,C,e,V){if(!V.size)return H.deleteRange(C,e);let t=H.doc.resolve(C),r=H.doc.resolve(e);if(YL(t,r,V))return H.step(new M2(C,e,V));let i=Hr(t,H.doc.resolve(e));i[i.length-1]==0&&i.pop();let o=-(t.depth+1);i.unshift(o);for(let p=t.depth,m=t.pos-1;p>0;p--,m--){let c=t.node(p).type.spec;if(c.defining||c.definingAsContext||c.isolating)break;i.indexOf(p)>-1?o=p:t.before(p)==m&&i.splice(1,0,-p)}let n=i.indexOf(o),l=[],s=V.openStart;for(let p=V.content,m=0;;m++){let c=p.firstChild;if(l.push(c),m==V.openStart)break;p=c.content}for(let p=s-1;p>=0;p--){let m=l[p],c=xm(m.type);if(c&&!m.sameMarkup(t.node(Math.abs(o)-1)))s=p;else if(c||!m.type.isTextblock)break}for(let p=V.openStart;p>=0;p--){let m=(p+s+1)%(V.openStart+1),c=l[m];if(c)for(let h=0;h<i.length;h++){let S=i[(h+n)%i.length],O=!0;S<0&&(O=!1,S=-S);let E=t.node(S-1),D=t.index(S-1);if(E.canReplaceWith(D,D,c.type,c.marks))return H.replace(t.before(S),O?r.after(S):e,new _(er(V.content,0,V.openStart,m),m,V.openEnd))}}let d=H.steps.length;for(let p=i.length-1;p>=0&&(H.replace(C,e,V),!(H.steps.length>d));p--){let m=i[p];m<0||(C=t.before(m),e=r.after(m))}}function er(H,C,e,V,t){if(C<e){let r=H.firstChild;H=H.replaceChild(0,r.copy(er(r.content,C+1,e,V,r)))}if(C>V){let r=t.contentMatchAt(0),i=r.fillBefore(H).append(H);H=i.append(r.matchFragment(i).fillBefore(B.empty,!0))}return H}function hm(H,C,e,V){if(!V.isInline&&C==e&&H.doc.resolve(C).parent.content.size){let t=cm(H.doc,C,V.type);t!=null&&(C=e=t)}H.replaceRange(C,e,new _(B.from(V),0,0))}function Zm(H,C,e){let V=H.doc.resolve(C),t=H.doc.resolve(e),r=Hr(V,t);for(let i=0;i<r.length;i++){let o=r[i],n=i==r.length-1;if(n&&o==0||V.node(o).type.contentMatch.validEnd)return H.delete(V.start(o),t.end(o));if(o>0&&(n||V.node(o-1).canReplace(V.index(o-1),t.indexAfter(o-1))))return H.delete(V.before(o),t.after(o))}for(let i=1;i<=V.depth&&i<=t.depth;i++)if(C-V.start(i)==V.depth-i&&e>V.end(i)&&t.end(i)-e!=t.depth-i&&V.start(i-1)==t.start(i-1)&&V.node(i-1).canReplace(V.index(i-1),t.index(i-1)))return H.delete(V.before(i),e);H.delete(C,e)}function Hr(H,C){let e=[],V=Math.min(H.depth,C.depth);for(let t=V;t>=0;t--){let r=H.start(t);if(r<H.pos-(H.depth-t)||C.end(t)>C.pos+(C.depth-t)||H.node(t).type.spec.isolating||C.node(t).type.spec.isolating)break;(r==C.start(t)||t==H.depth&&t==C.depth&&H.parent.inlineContent&&C.parent.inlineContent&&t&&C.start(t-1)==r-1)&&e.push(t)}return e}var f9=class H extends J1{constructor(C,e,V){super(),this.pos=C,this.attr=e,this.value=V}apply(C){let e=C.nodeAt(this.pos);if(!e)return e2.fail("No node at attribute step's position");let V=Object.create(null);for(let r in e.attrs)V[r]=e.attrs[r];V[this.attr]=this.value;let t=e.type.create(V,null,e.marks);return e2.fromReplace(C,this.pos,this.pos+1,new _(B.from(t),0,e.isLeaf?0:1))}getMap(){return $5.empty}invert(C){return new H(this.pos,this.attr,C.nodeAt(this.pos).attrs[this.attr])}map(C){let e=C.mapResult(this.pos,1);return e.deletedAfter?null:new H(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(C,e){if(typeof e.pos!="number"||typeof e.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new H(e.pos,e.attr,e.value)}};J1.jsonID("attr",f9);var x9=class H extends J1{constructor(C,e){super(),this.attr=C,this.value=e}apply(C){let e=Object.create(null);for(let t in C.attrs)e[t]=C.attrs[t];e[this.attr]=this.value;let V=C.type.create(e,C.content,C.marks);return e2.ok(V)}getMap(){return $5.empty}invert(C){return new H(this.attr,C.attrs[this.attr])}map(C){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(C,e){if(typeof e.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new H(e.attr,e.value)}};J1.jsonID("docAttr",x9);var R0=class extends Error{};R0=function H(C){let e=Error.call(this,C);return e.__proto__=H.prototype,e};R0.prototype=Object.create(Error.prototype);R0.prototype.constructor=R0;R0.prototype.name="TransformError";var F0=class{constructor(C){this.doc=C,this.steps=[],this.docs=[],this.mapping=new T7}get before(){return this.docs.length?this.docs[0]:this.doc}step(C){let e=this.maybeStep(C);if(e.failed)throw new R0(e.failed);return this}maybeStep(C){let e=C.apply(this.doc);return e.failed||this.addStep(C,e.doc),e}get docChanged(){return this.steps.length>0}addStep(C,e){this.docs.push(this.doc),this.steps.push(C),this.mapping.appendMap(C.getMap()),this.doc=e}replace(C,e=C,V=_.empty){let t=R7(this.doc,C,e,V);return t&&this.step(t),this}replaceWith(C,e,V){return this.replace(C,e,new _(B.from(V),0,0))}delete(C,e){return this.replace(C,e,_.empty)}insert(C,e){return this.replaceWith(C,C,e)}replaceRange(C,e,V){return vm(this,C,e,V),this}replaceRangeWith(C,e,V){return hm(this,C,e,V),this}deleteRange(C,e){return Zm(this,C,e),this}lift(C,e){return om(this,C,e),this}join(C,e=1){return mm(this,C,e),this}wrap(C,e){return lm(this,C,e),this}setBlockType(C,e=C,V,t=null){return sm(this,C,e,V,t),this}setNodeMarkup(C,e,V=null,t){return dm(this,C,e,V,t),this}setNodeAttribute(C,e,V){return this.step(new f9(C,e,V)),this}setDocAttribute(C,e){return this.step(new x9(C,e)),this}addNodeMark(C,e){return this.step(new B7(C,e)),this}removeNodeMark(C,e){if(!(e instanceof l1)){let V=this.doc.nodeAt(C);if(!V)throw new RangeError("No node at position "+C);if(e=e.isInSet(V.marks),!e)return this}return this.step(new E7(C,e)),this}split(C,e=1,V){return pm(this,C,e,V),this}addMark(C,e,V){return rm(this,C,e,V),this}removeMark(C,e,V){return im(this,C,e,V),this}clearIncompatible(C,e,V){return kC(this,C,e,V),this}};var bC=Object.create(null),J=class{constructor(C,e,V){this.$anchor=C,this.$head=e,this.ranges=V||[new Z9(C.min(e),C.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let C=this.ranges;for(let e=0;e<C.length;e++)if(C[e].$from.pos!=C[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(C,e=_.empty){let V=e.content.lastChild,t=null;for(let o=0;o<e.openEnd;o++)t=V,V=V.lastChild;let r=C.steps.length,i=this.ranges;for(let o=0;o<i.length;o++){let{$from:n,$to:l}=i[o],s=C.mapping.slice(r);C.replaceRange(s.map(n.pos),s.map(l.pos),o?_.empty:e),o==0&&Lr(C,r,(V?V.isInline:t&&t.isTextblock)?-1:1)}}replaceWith(C,e){let V=C.steps.length,t=this.ranges;for(let r=0;r<t.length;r++){let{$from:i,$to:o}=t[r],n=C.mapping.slice(V),l=n.map(i.pos),s=n.map(o.pos);r?C.deleteRange(l,s):(C.replaceRangeWith(l,s,e),Lr(C,V,e.isInline?-1:1))}}static findFrom(C,e,V=!1){let t=C.parent.inlineContent?new H1(C):I0(C.node(0),C.parent,C.pos,C.index(),e,V);if(t)return t;for(let r=C.depth-1;r>=0;r--){let i=e<0?I0(C.node(0),C.node(r),C.before(r+1),C.index(r),e,V):I0(C.node(0),C.node(r),C.after(r+1),C.index(r)+1,e,V);if(i)return i}return null}static near(C,e=1){return this.findFrom(C,e)||this.findFrom(C,-e)||new D2(C.node(0))}static atStart(C){return I0(C,C,0,0,1)||new D2(C)}static atEnd(C){return I0(C,C,C.content.size,C.childCount,-1)||new D2(C)}static fromJSON(C,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let V=bC[e.type];if(!V)throw new RangeError(`No selection type ${e.type} defined`);return V.fromJSON(C,e)}static jsonID(C,e){if(C in bC)throw new RangeError("Duplicate use of selection JSON ID "+C);return bC[C]=e,e.prototype.jsonID=C,e}getBookmark(){return H1.between(this.$anchor,this.$head).getBookmark()}};J.prototype.visible=!0;var Z9=class{constructor(C,e){this.$from=C,this.$to=e}},Vr=!1;function tr(H){!Vr&&!H.parent.inlineContent&&(Vr=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+H.parent.type.name+")"))}var H1=class H extends J{constructor(C,e=C){tr(C),tr(e),super(C,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(C,e){let V=C.resolve(e.map(this.head));if(!V.parent.inlineContent)return J.near(V);let t=C.resolve(e.map(this.anchor));return new H(t.parent.inlineContent?t:V,V)}replace(C,e=_.empty){if(super.replace(C,e),e==_.empty){let V=this.$from.marksAcross(this.$to);V&&C.ensureMarks(V)}}eq(C){return C instanceof H&&C.anchor==this.anchor&&C.head==this.head}getBookmark(){return new S9(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(C,e){if(typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new H(C.resolve(e.anchor),C.resolve(e.head))}static create(C,e,V=e){let t=C.resolve(e);return new this(t,V==e?t:C.resolve(V))}static between(C,e,V){let t=C.pos-e.pos;if((!V||t)&&(V=t>=0?1:-1),!e.parent.inlineContent){let r=J.findFrom(e,V,!0)||J.findFrom(e,-V,!0);if(r)e=r.$head;else return J.near(e,V)}return C.parent.inlineContent||(t==0?C=e:(C=(J.findFrom(C,-V,!0)||J.findFrom(C,V,!0)).$anchor,C.pos<e.pos!=t<0&&(C=e))),new H(C,e)}};J.jsonID("text",H1);var S9=class H{constructor(C,e){this.anchor=C,this.head=e}map(C){return new H(C.map(this.anchor),C.map(this.head))}resolve(C){return H1.between(C.resolve(this.anchor),C.resolve(this.head))}},K=class H extends J{constructor(C){let e=C.nodeAfter,V=C.node(0).resolve(C.pos+e.nodeSize);super(C,V),this.node=e}map(C,e){let{deleted:V,pos:t}=e.mapResult(this.anchor),r=C.resolve(t);return V?J.near(r):new H(r)}content(){return new _(B.from(this.node),0,0)}eq(C){return C instanceof H&&C.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new TC(this.anchor)}static fromJSON(C,e){if(typeof e.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new H(C.resolve(e.anchor))}static create(C,e){return new H(C.resolve(e))}static isSelectable(C){return!C.isText&&C.type.spec.selectable!==!1}};K.prototype.visible=!1;J.jsonID("node",K);var TC=class H{constructor(C){this.anchor=C}map(C){let{deleted:e,pos:V}=C.mapResult(this.anchor);return e?new S9(V,V):new H(V)}resolve(C){let e=C.resolve(this.anchor),V=e.nodeAfter;return V&&K.isSelectable(V)?new K(e):J.near(e)}},D2=class H extends J{constructor(C){super(C.resolve(0),C.resolve(C.content.size))}replace(C,e=_.empty){if(e==_.empty){C.delete(0,C.doc.content.size);let V=J.atStart(C.doc);V.eq(C.selection)||C.setSelection(V)}else super.replace(C,e)}toJSON(){return{type:"all"}}static fromJSON(C){return new H(C)}map(C){return new H(C)}eq(C){return C instanceof H}getBookmark(){return Sm}};J.jsonID("all",D2);var Sm={map(){return this},resolve(H){return new D2(H)}};function I0(H,C,e,V,t,r=!1){if(C.inlineContent)return H1.create(H,e);for(let i=V-(t>0?0:1);t>0?i<C.childCount:i>=0;i+=t){let o=C.child(i);if(o.isAtom){if(!r&&K.isSelectable(o))return K.create(H,e-(t<0?o.nodeSize:0))}else{let n=I0(H,o,e+t,t<0?o.childCount:0,t,r);if(n)return n}e+=o.nodeSize*t}return null}function Lr(H,C,e){let V=H.steps.length-1;if(V<C)return;let t=H.steps[V];if(!(t instanceof M2||t instanceof E1))return;let r=H.mapping.maps[V],i;r.forEach((o,n,l,s)=>{i==null&&(i=s)}),H.setSelection(J.near(H.doc.resolve(i),e))}var rr=1,h9=2,ir=4,PC=class extends F0{constructor(C){super(C.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=C.selection,this.storedMarks=C.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(C){if(C.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=C,this.curSelectionFor=this.steps.length,this.updated=(this.updated|rr)&~h9,this.storedMarks=null,this}get selectionSet(){return(this.updated&rr)>0}setStoredMarks(C){return this.storedMarks=C,this.updated|=h9,this}ensureMarks(C){return l1.sameSet(this.storedMarks||this.selection.$from.marks(),C)||this.setStoredMarks(C),this}addStoredMark(C){return this.ensureMarks(C.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(C){return this.ensureMarks(C.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&h9)>0}addStep(C,e){super.addStep(C,e),this.updated=this.updated&~h9,this.storedMarks=null}setTime(C){return this.time=C,this}replaceSelection(C){return this.selection.replace(this,C),this}replaceSelectionWith(C,e=!0){let V=this.selection;return e&&(C=C.mark(this.storedMarks||(V.empty?V.$from.marks():V.$from.marksAcross(V.$to)||l1.none))),V.replaceWith(this,C),this}deleteSelection(){return this.selection.replace(this),this}insertText(C,e,V){let t=this.doc.type.schema;if(e==null)return C?this.replaceSelectionWith(t.text(C),!0):this.deleteSelection();{if(V==null&&(V=e),V=V??e,!C)return this.deleteRange(e,V);let r=this.storedMarks;if(!r){let i=this.doc.resolve(e);r=V==e?i.marks():i.marksAcross(this.doc.resolve(V))}return this.replaceRangeWith(e,V,t.text(C,r)),this.selection.empty||this.setSelection(J.near(this.selection.$to)),this}}setMeta(C,e){return this.meta[typeof C=="string"?C:C.key]=e,this}getMeta(C){return this.meta[typeof C=="string"?C:C.key]}get isGeneric(){for(let C in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=ir,this}get scrolledIntoView(){return(this.updated&ir)>0}};function Mr(H,C){return!C||!H?H:H.bind(C)}var q3=class{constructor(C,e,V){this.name=C,this.init=Mr(e.init,V),this.apply=Mr(e.apply,V)}},gm=[new q3("doc",{init(H){return H.doc||H.schema.topNodeType.createAndFill()},apply(H){return H.doc}}),new q3("selection",{init(H,C){return H.selection||J.atStart(C.doc)},apply(H){return H.selection}}),new q3("storedMarks",{init(H){return H.storedMarks||null},apply(H,C,e,V){return V.selection.$cursor?H.storedMarks:null}}),new q3("scrollToSelection",{init(){return 0},apply(H,C){return H.scrolledIntoView?C+1:C}})],F7=class{constructor(C,e){this.schema=C,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=gm.slice(),e&&e.forEach(V=>{if(this.pluginsByKey[V.key])throw new RangeError("Adding different instances of a keyed plugin ("+V.key+")");this.plugins.push(V),this.pluginsByKey[V.key]=V,V.spec.state&&this.fields.push(new q3(V.key,V.spec.state,V))})}},g9=class H{constructor(C){this.config=C}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(C){return this.applyTransaction(C).state}filterTransaction(C,e=-1){for(let V=0;V<this.config.plugins.length;V++)if(V!=e){let t=this.config.plugins[V];if(t.spec.filterTransaction&&!t.spec.filterTransaction.call(t,C,this))return!1}return!0}applyTransaction(C){if(!this.filterTransaction(C))return{state:this,transactions:[]};let e=[C],V=this.applyInner(C),t=null;for(;;){let r=!1;for(let i=0;i<this.config.plugins.length;i++){let o=this.config.plugins[i];if(o.spec.appendTransaction){let n=t?t[i].n:0,l=t?t[i].state:this,s=n<e.length&&o.spec.appendTransaction.call(o,n?e.slice(n):e,l,V);if(s&&V.filterTransaction(s,i)){if(s.setMeta("appendedTransaction",C),!t){t=[];for(let d=0;d<this.config.plugins.length;d++)t.push(d<i?{state:V,n:e.length}:{state:this,n:0})}e.push(s),V=V.applyInner(s),r=!0}t&&(t[i]={state:V,n:e.length})}}if(!r)return{state:V,transactions:e}}}applyInner(C){if(!C.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let e=new H(this.config),V=this.config.fields;for(let t=0;t<V.length;t++){let r=V[t];e[r.name]=r.apply(C,this[r.name],this,e)}return e}get tr(){return new PC(this)}static create(C){let e=new F7(C.doc?C.doc.type.schema:C.schema,C.plugins),V=new H(e);for(let t=0;t<e.fields.length;t++)V[e.fields[t].name]=e.fields[t].init(C,V);return V}reconfigure(C){let e=new F7(this.schema,C.plugins),V=e.fields,t=new H(e);for(let r=0;r<V.length;r++){let i=V[r].name;t[i]=this.hasOwnProperty(i)?this[i]:V[r].init(C,t)}return t}toJSON(C){let e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map(V=>V.toJSON())),C&&typeof C=="object")for(let V in C){if(V=="doc"||V=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let t=C[V],r=t.spec.state;r&&r.toJSON&&(e[V]=r.toJSON.call(t,this[t.key]))}return e}static fromJSON(C,e,V){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!C.schema)throw new RangeError("Required config field 'schema' missing");let t=new F7(C.schema,C.plugins),r=new H(t);return t.fields.forEach(i=>{if(i.name=="doc")r.doc=Z2.fromJSON(C.schema,e.doc);else if(i.name=="selection")r.selection=J.fromJSON(r.doc,e.selection);else if(i.name=="storedMarks")e.storedMarks&&(r.storedMarks=e.storedMarks.map(C.schema.markFromJSON));else{if(V)for(let o in V){let n=V[o],l=n.spec.state;if(n.key==i.name&&l&&l.fromJSON&&Object.prototype.hasOwnProperty.call(e,o)){r[i.name]=l.fromJSON.call(n,C,e[o],r);return}}r[i.name]=i.init(C,r)}}),r}};function or(H,C,e){for(let V in H){let t=H[V];t instanceof Function?t=t.bind(C):V=="handleDOMEvents"&&(t=or(t,C,{})),e[V]=t}return e}var f1=class{constructor(C){this.spec=C,this.props={},C.props&&or(C.props,this,this.props),this.key=C.key?C.key.key:nr("plugin")}getState(C){return C[this.key]}},wC=Object.create(null);function nr(H){return H in wC?H+"$"+ ++wC[H]:(wC[H]=0,H+"$")}var _1=class{constructor(C="key"){this.key=nr(C)}get(C){return C.config.pluginsByKey[this.key]}getState(C){return C[this.key]}};var H2=function(H){for(var C=0;;C++)if(H=H.previousSibling,!H)return C},_7=function(H){let C=H.assignedSlot||H.parentNode;return C&&C.nodeType==11?C.host:C},NC=null,q5=function(H,C,e){let V=NC||(NC=document.createRange());return V.setEnd(H,e??H.nodeValue.length),V.setStart(H,C||0),V},Om=function(){NC=null},H0=function(H,C,e,V){return e&&(ar(H,C,e,V,-1)||ar(H,C,e,V,1))},ym=/^(img|br|input|textarea|hr)$/i;function ar(H,C,e,V,t){for(;;){if(H==e&&C==V)return!0;if(C==(t<0?0:q2(H))){let r=H.parentNode;if(!r||r.nodeType!=1||G7(H)||ym.test(H.nodeName)||H.contentEditable=="false")return!1;C=H2(H)+(t<0?0:1),H=r}else if(H.nodeType==1){if(H=H.childNodes[C+(t<0?-1:0)],H.contentEditable=="false")return!1;C=t<0?q2(H):0}else return!1}}function q2(H){return H.nodeType==3?H.nodeValue.length:H.childNodes.length}function km(H,C){for(;;){if(H.nodeType==3&&C)return H;if(H.nodeType==1&&C>0){if(H.contentEditable=="false")return null;H=H.childNodes[C-1],C=q2(H)}else if(H.parentNode&&!G7(H))C=H2(H),H=H.parentNode;else return null}}function bm(H,C){for(;;){if(H.nodeType==3&&C<H.nodeValue.length)return H;if(H.nodeType==1&&C<H.childNodes.length){if(H.contentEditable=="false")return null;H=H.childNodes[C],C=0}else if(H.parentNode&&!G7(H))C=H2(H)+1,H=H.parentNode;else return null}}function wm(H,C,e){for(let V=C==0,t=C==q2(H);V||t;){if(H==e)return!0;let r=H2(H);if(H=H.parentNode,!H)return!1;V=V&&r==0,t=t&&r==q2(H)}}function G7(H){let C;for(let e=H;e&&!(C=e.pmViewDesc);e=e.parentNode);return C&&C.node&&C.node.isBlock&&(C.dom==H||C.contentDOM==H)}var D9=function(H){return H.focusNode&&H0(H.focusNode,H.focusOffset,H.anchorNode,H.anchorOffset)};function j3(H,C){let e=document.createEvent("Event");return e.initEvent("keydown",!0,!0),e.keyCode=H,e.key=e.code=C,e}function Tm(H){let C=H.activeElement;for(;C&&C.shadowRoot;)C=C.shadowRoot.activeElement;return C}function Pm(H,C,e){if(H.caretPositionFromPoint)try{let V=H.caretPositionFromPoint(C,e);if(V)return{node:V.offsetNode,offset:Math.min(q2(V.offsetNode),V.offset)}}catch{}if(H.caretRangeFromPoint){let V=H.caretRangeFromPoint(C,e);if(V)return{node:V.startContainer,offset:Math.min(q2(V.startContainer),V.startOffset)}}}var Z5=typeof navigator<"u"?navigator:null,lr=typeof document<"u"?document:null,Z3=Z5&&Z5.userAgent||"",IC=/Edge\/(\d+)/.exec(Z3),Ur=/MSIE \d/.exec(Z3),_C=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Z3),S2=!!(Ur||_C||IC),v3=Ur?document.documentMode:_C?+_C[1]:IC?+IC[1]:0,s5=!S2&&/gecko\/(\d+)/i.test(Z3);s5&&+(/Firefox\/(\d+)/.exec(Z3)||[0,0])[1];var WC=!S2&&/Chrome\/(\d+)/.exec(Z3),n2=!!WC,Gr=WC?+WC[1]:0,p2=!S2&&!!Z5&&/Apple Computer/.test(Z5.vendor),G0=p2&&(/Mobile\/\w+/.test(Z3)||!!Z5&&Z5.maxTouchPoints>2),Q2=G0||(Z5?/Mac/.test(Z5.platform):!1),Bm=Z5?/Win/.test(Z5.platform):!1,l5=/Android \d/.test(Z3),$7=!!lr&&"webkitFontSmoothing"in lr.documentElement.style,Em=$7?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function Rm(H){let C=H.defaultView&&H.defaultView.visualViewport;return C?{left:0,right:C.width,top:0,bottom:C.height}:{left:0,right:H.documentElement.clientWidth,top:0,bottom:H.documentElement.clientHeight}}function Q5(H,C){return typeof H=="number"?H:H[C]}function Fm(H){let C=H.getBoundingClientRect(),e=C.width/H.offsetWidth||1,V=C.height/H.offsetHeight||1;return{left:C.left,right:C.left+H.clientWidth*e,top:C.top,bottom:C.top+H.clientHeight*V}}function sr(H,C,e){let V=H.someProp("scrollThreshold")||0,t=H.someProp("scrollMargin")||5,r=H.dom.ownerDocument;for(let i=e||H.dom;i;i=_7(i)){if(i.nodeType!=1)continue;let o=i,n=o==r.body,l=n?Rm(r):Fm(o),s=0,d=0;if(C.top<l.top+Q5(V,"top")?d=-(l.top-C.top+Q5(t,"top")):C.bottom>l.bottom-Q5(V,"bottom")&&(d=C.bottom-C.top>l.bottom-l.top?C.top+Q5(t,"top")-l.top:C.bottom-l.bottom+Q5(t,"bottom")),C.left<l.left+Q5(V,"left")?s=-(l.left-C.left+Q5(t,"left")):C.right>l.right-Q5(V,"right")&&(s=C.right-l.right+Q5(t,"right")),s||d)if(n)r.defaultView.scrollBy(s,d);else{let p=o.scrollLeft,m=o.scrollTop;d&&(o.scrollTop+=d),s&&(o.scrollLeft+=s);let c=o.scrollLeft-p,h=o.scrollTop-m;C={left:C.left-c,top:C.top-h,right:C.right-c,bottom:C.bottom-h}}if(n||/^(fixed|sticky)$/.test(getComputedStyle(i).position))break}}function Dm(H){let C=H.dom.getBoundingClientRect(),e=Math.max(0,C.top),V,t;for(let r=(C.left+C.right)/2,i=e+1;i<Math.min(innerHeight,C.bottom);i+=5){let o=H.root.elementFromPoint(r,i);if(!o||o==H.dom||!H.dom.contains(o))continue;let n=o.getBoundingClientRect();if(n.top>=e-20){V=o,t=n.top;break}}return{refDOM:V,refTop:t,stack:$r(H.dom)}}function $r(H){let C=[],e=H.ownerDocument;for(let V=H;V&&(C.push({dom:V,top:V.scrollTop,left:V.scrollLeft}),H!=e);V=_7(V));return C}function Nm({refDOM:H,refTop:C,stack:e}){let V=H?H.getBoundingClientRect().top:0;Kr(e,V==0?0:V-C)}function Kr(H,C){for(let e=0;e<H.length;e++){let{dom:V,top:t,left:r}=H[e];V.scrollTop!=t+C&&(V.scrollTop=t+C),V.scrollLeft!=r&&(V.scrollLeft=r)}}var _0=null;function Im(H){if(H.setActive)return H.setActive();if(_0)return H.focus(_0);let C=$r(H);H.focus(_0==null?{get preventScroll(){return _0={preventScroll:!0},!0}}:void 0),_0||(_0=!1,Kr(C,0))}function Qr(H,C){let e,V=2e8,t,r=0,i=C.top,o=C.top,n,l;for(let s=H.firstChild,d=0;s;s=s.nextSibling,d++){let p;if(s.nodeType==1)p=s.getClientRects();else if(s.nodeType==3)p=q5(s).getClientRects();else continue;for(let m=0;m<p.length;m++){let c=p[m];if(c.top<=i&&c.bottom>=o){i=Math.max(c.bottom,i),o=Math.min(c.top,o);let h=c.left>C.left?c.left-C.left:c.right<C.left?C.left-c.right:0;if(h<V){e=s,V=h,t=h&&e.nodeType==3?{left:c.right<C.left?c.right:c.left,top:C.top}:C,s.nodeType==1&&h&&(r=d+(C.left>=(c.left+c.right)/2?1:0));continue}}else c.top>C.top&&!n&&c.left<=C.left&&c.right>=C.left&&(n=s,l={left:Math.max(c.left,Math.min(c.right,C.left)),top:c.top});!e&&(C.left>=c.right&&C.top>=c.top||C.left>=c.left&&C.top>=c.bottom)&&(r=d+1)}}return!e&&n&&(e=n,t=l,V=0),e&&e.nodeType==3?_m(e,t):!e||V&&e.nodeType==1?{node:H,offset:r}:Qr(e,t)}function _m(H,C){let e=H.nodeValue.length,V=document.createRange();for(let t=0;t<e;t++){V.setEnd(H,t+1),V.setStart(H,t);let r=c3(V,1);if(r.top!=r.bottom&&Ve(C,r))return{node:H,offset:t+(C.left>=(r.left+r.right)/2?1:0)}}return{node:H,offset:0}}function Ve(H,C){return H.left>=C.left-1&&H.left<=C.right+1&&H.top>=C.top-1&&H.top<=C.bottom+1}function Wm(H,C){let e=H.parentNode;return e&&/^li$/i.test(e.nodeName)&&C.left<H.getBoundingClientRect().left?e:H}function zm(H,C,e){let{node:V,offset:t}=Qr(C,e),r=-1;if(V.nodeType==1&&!V.firstChild){let i=V.getBoundingClientRect();r=i.left!=i.right&&e.left>(i.left+i.right)/2?1:-1}return H.docView.posFromDOM(V,t,r)}function Um(H,C,e,V){let t=-1;for(let r=C,i=!1;r!=H.dom;){let o=H.docView.nearestDesc(r,!0);if(!o)return null;if(o.dom.nodeType==1&&(o.node.isBlock&&o.parent||!o.contentDOM)){let n=o.dom.getBoundingClientRect();if(o.node.isBlock&&o.parent&&(!i&&n.left>V.left||n.top>V.top?t=o.posBefore:(!i&&n.right<V.left||n.bottom<V.top)&&(t=o.posAfter),i=!0),!o.contentDOM&&t<0&&!o.node.isText)return(o.node.isBlock?V.top<(n.top+n.bottom)/2:V.left<(n.left+n.right)/2)?o.posBefore:o.posAfter}r=o.dom.parentNode}return t>-1?t:H.docView.posFromDOM(C,e,-1)}function qr(H,C,e){let V=H.childNodes.length;if(V&&e.top<e.bottom)for(let t=Math.max(0,Math.min(V-1,Math.floor(V*(C.top-e.top)/(e.bottom-e.top))-2)),r=t;;){let i=H.childNodes[r];if(i.nodeType==1){let o=i.getClientRects();for(let n=0;n<o.length;n++){let l=o[n];if(Ve(C,l))return qr(i,C,l)}}if((r=(r+1)%V)==t)break}return H}function Gm(H,C){let e=H.dom.ownerDocument,V,t=0,r=Pm(e,C.left,C.top);r&&({node:V,offset:t}=r);let i=(H.root.elementFromPoint?H.root:e).elementFromPoint(C.left,C.top),o;if(!i||!H.dom.contains(i.nodeType!=1?i.parentNode:i)){let l=H.dom.getBoundingClientRect();if(!Ve(C,l)||(i=qr(H.dom,C,l),!i))return null}if(p2)for(let l=i;V&&l;l=_7(l))l.draggable&&(V=void 0);if(i=Wm(i,C),V){if(s5&&V.nodeType==1&&(t=Math.min(t,V.childNodes.length),t<V.childNodes.length)){let s=V.childNodes[t],d;s.nodeName=="IMG"&&(d=s.getBoundingClientRect()).right<=C.left&&d.bottom>C.top&&t++}let l;$7&&t&&V.nodeType==1&&(l=V.childNodes[t-1]).nodeType==1&&l.contentEditable=="false"&&l.getBoundingClientRect().top>=C.top&&t--,V==H.dom&&t==V.childNodes.length-1&&V.lastChild.nodeType==1&&C.top>V.lastChild.getBoundingClientRect().bottom?o=H.state.doc.content.size:(t==0||V.nodeType!=1||V.childNodes[t-1].nodeName!="BR")&&(o=Um(H,V,t,C))}o==null&&(o=zm(H,i,C));let n=H.docView.nearestDesc(i,!0);return{pos:o,inside:n?n.posAtStart-n.border:-1}}function Ar(H){return H.top<H.bottom||H.left<H.right}function c3(H,C){let e=H.getClientRects();if(e.length){let V=e[C<0?0:e.length-1];if(Ar(V))return V}return Array.prototype.find.call(e,Ar)||H.getBoundingClientRect()}var $m=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function jr(H,C,e){let{node:V,offset:t,atom:r}=H.docView.domFromPos(C,e<0?-1:1),i=$7||s5;if(V.nodeType==3)if(i&&($m.test(V.nodeValue)||(e<0?!t:t==V.nodeValue.length))){let n=c3(q5(V,t,t),e);if(s5&&t&&/\s/.test(V.nodeValue[t-1])&&t<V.nodeValue.length){let l=c3(q5(V,t-1,t-1),-1);if(l.top==n.top){let s=c3(q5(V,t,t+1),-1);if(s.top!=n.top)return D7(s,s.left<l.left)}}return n}else{let n=t,l=t,s=e<0?1:-1;return e<0&&!t?(l++,s=-1):e>=0&&t==V.nodeValue.length?(n--,s=1):e<0?n--:l++,D7(c3(q5(V,n,l),s),s<0)}if(!H.state.doc.resolve(C-(r||0)).parent.inlineContent){if(r==null&&t&&(e<0||t==q2(V))){let n=V.childNodes[t-1];if(n.nodeType==1)return BC(n.getBoundingClientRect(),!1)}if(r==null&&t<q2(V)){let n=V.childNodes[t];if(n.nodeType==1)return BC(n.getBoundingClientRect(),!0)}return BC(V.getBoundingClientRect(),e>=0)}if(r==null&&t&&(e<0||t==q2(V))){let n=V.childNodes[t-1],l=n.nodeType==3?q5(n,q2(n)-(i?0:1)):n.nodeType==1&&(n.nodeName!="BR"||!n.nextSibling)?n:null;if(l)return D7(c3(l,1),!1)}if(r==null&&t<q2(V)){let n=V.childNodes[t];for(;n.pmViewDesc&&n.pmViewDesc.ignoreForCoords;)n=n.nextSibling;let l=n?n.nodeType==3?q5(n,0,i?0:1):n.nodeType==1?n:null:null;if(l)return D7(c3(l,-1),!0)}return D7(c3(V.nodeType==3?q5(V):V,-e),e>=0)}function D7(H,C){if(H.width==0)return H;let e=C?H.left:H.right;return{top:H.top,bottom:H.bottom,left:e,right:e}}function BC(H,C){if(H.height==0)return H;let e=C?H.top:H.bottom;return{top:e,bottom:e,left:H.left,right:H.right}}function Jr(H,C,e){let V=H.state,t=H.root.activeElement;V!=C&&H.updateState(C),t!=H.dom&&H.focus();try{return e()}finally{V!=C&&H.updateState(V),t!=H.dom&&t&&t.focus()}}function Km(H,C,e){let V=C.selection,t=e=="up"?V.$from:V.$to;return Jr(H,C,()=>{let{node:r}=H.docView.domFromPos(t.pos,e=="up"?-1:1);for(;;){let o=H.docView.nearestDesc(r,!0);if(!o)break;if(o.node.isBlock){r=o.contentDOM||o.dom;break}r=o.dom.parentNode}let i=jr(H,t.pos,1);for(let o=r.firstChild;o;o=o.nextSibling){let n;if(o.nodeType==1)n=o.getClientRects();else if(o.nodeType==3)n=q5(o,0,o.nodeValue.length).getClientRects();else continue;for(let l=0;l<n.length;l++){let s=n[l];if(s.bottom>s.top+1&&(e=="up"?i.top-s.top>(s.bottom-i.top)*2:s.bottom-i.bottom>(i.bottom-s.top)*2))return!1}}return!0})}var Qm=/[\u0590-\u08ac]/;function qm(H,C,e){let{$head:V}=C.selection;if(!V.parent.isTextblock)return!1;let t=V.parentOffset,r=!t,i=t==V.parent.content.size,o=H.domSelection();return o?!Qm.test(V.parent.textContent)||!o.modify?e=="left"||e=="backward"?r:i:Jr(H,C,()=>{let{focusNode:n,focusOffset:l,anchorNode:s,anchorOffset:d}=H.domSelectionRange(),p=o.caretBidiLevel;o.modify("move",e,"character");let m=V.depth?H.docView.domAfterPos(V.before()):H.dom,{focusNode:c,focusOffset:h}=H.domSelectionRange(),S=c&&!m.contains(c.nodeType==1?c:c.parentNode)||n==c&&l==h;try{o.collapse(s,d),n&&(n!=s||l!=d)&&o.extend&&o.extend(n,l)}catch{}return p!=null&&(o.caretBidiLevel=p),S}):V.pos==V.start()||V.pos==V.end()}var dr=null,pr=null,ur=!1;function jm(H,C,e){return dr==C&&pr==e?ur:(dr=C,pr=e,ur=e=="up"||e=="down"?Km(H,C,e):qm(H,C,e))}var j2=0,mr=1,J3=2,S5=3,V0=class{constructor(C,e,V,t){this.parent=C,this.children=e,this.dom=V,this.contentDOM=t,this.dirty=j2,V.pmViewDesc=this}matchesWidget(C){return!1}matchesMark(C){return!1}matchesNode(C,e,V){return!1}matchesHack(C){return!1}parseRule(){return null}stopEvent(C){return!1}get size(){let C=0;for(let e=0;e<this.children.length;e++)C+=this.children[e].size;return C}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let C=0;C<this.children.length;C++)this.children[C].destroy()}posBeforeChild(C){for(let e=0,V=this.posAtStart;;e++){let t=this.children[e];if(t==C)return V;V+=t.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(C,e,V){if(this.contentDOM&&this.contentDOM.contains(C.nodeType==1?C:C.parentNode))if(V<0){let r,i;if(C==this.contentDOM)r=C.childNodes[e-1];else{for(;C.parentNode!=this.contentDOM;)C=C.parentNode;r=C.previousSibling}for(;r&&!((i=r.pmViewDesc)&&i.parent==this);)r=r.previousSibling;return r?this.posBeforeChild(i)+i.size:this.posAtStart}else{let r,i;if(C==this.contentDOM)r=C.childNodes[e];else{for(;C.parentNode!=this.contentDOM;)C=C.parentNode;r=C.nextSibling}for(;r&&!((i=r.pmViewDesc)&&i.parent==this);)r=r.nextSibling;return r?this.posBeforeChild(i):this.posAtEnd}let t;if(C==this.dom&&this.contentDOM)t=e>H2(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))t=C.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(e==0)for(let r=C;;r=r.parentNode){if(r==this.dom){t=!1;break}if(r.previousSibling)break}if(t==null&&e==C.childNodes.length)for(let r=C;;r=r.parentNode){if(r==this.dom){t=!0;break}if(r.nextSibling)break}}return t??V>0?this.posAtEnd:this.posAtStart}nearestDesc(C,e=!1){for(let V=!0,t=C;t;t=t.parentNode){let r=this.getDesc(t),i;if(r&&(!e||r.node))if(V&&(i=r.nodeDOM)&&!(i.nodeType==1?i.contains(C.nodeType==1?C:C.parentNode):i==C))V=!1;else return r}}getDesc(C){let e=C.pmViewDesc;for(let V=e;V;V=V.parent)if(V==this)return e}posFromDOM(C,e,V){for(let t=C;t;t=t.parentNode){let r=this.getDesc(t);if(r)return r.localPosFromDOM(C,e,V)}return-1}descAt(C){for(let e=0,V=0;e<this.children.length;e++){let t=this.children[e],r=V+t.size;if(V==C&&r!=V){for(;!t.border&&t.children.length;)t=t.children[0];return t}if(C<r)return t.descAt(C-V-t.border);V=r}}domFromPos(C,e){if(!this.contentDOM)return{node:this.dom,offset:0,atom:C+1};let V=0,t=0;for(let r=0;V<this.children.length;V++){let i=this.children[V],o=r+i.size;if(o>C||i instanceof k9){t=C-r;break}r=o}if(t)return this.children[V].domFromPos(t-this.children[V].border,e);for(let r;V&&!(r=this.children[V-1]).size&&r instanceof O9&&r.side>=0;V--);if(e<=0){let r,i=!0;for(;r=V?this.children[V-1]:null,!(!r||r.dom.parentNode==this.contentDOM);V--,i=!1);return r&&e&&i&&!r.border&&!r.domAtom?r.domFromPos(r.size,e):{node:this.contentDOM,offset:r?H2(r.dom)+1:0}}else{let r,i=!0;for(;r=V<this.children.length?this.children[V]:null,!(!r||r.dom.parentNode==this.contentDOM);V++,i=!1);return r&&i&&!r.border&&!r.domAtom?r.domFromPos(0,e):{node:this.contentDOM,offset:r?H2(r.dom):this.contentDOM.childNodes.length}}}parseRange(C,e,V=0){if(this.children.length==0)return{node:this.contentDOM,from:C,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let t=-1,r=-1;for(let i=V,o=0;;o++){let n=this.children[o],l=i+n.size;if(t==-1&&C<=l){let s=i+n.border;if(C>=s&&e<=l-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(C,e,s);C=i;for(let d=o;d>0;d--){let p=this.children[d-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){t=H2(p.dom)+1;break}C-=p.size}t==-1&&(t=0)}if(t>-1&&(l>e||o==this.children.length-1)){e=l;for(let s=o+1;s<this.children.length;s++){let d=this.children[s];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){r=H2(d.dom);break}e+=d.size}r==-1&&(r=this.contentDOM.childNodes.length);break}i=l}return{node:this.contentDOM,from:C,to:e,fromOffset:t,toOffset:r}}emptyChildAt(C){if(this.border||!this.contentDOM||!this.children.length)return!1;let e=this.children[C<0?0:this.children.length-1];return e.size==0||e.emptyChildAt(C)}domAfterPos(C){let{node:e,offset:V}=this.domFromPos(C,0);if(e.nodeType!=1||V==e.childNodes.length)throw new RangeError("No node after pos "+C);return e.childNodes[V]}setSelection(C,e,V,t=!1){let r=Math.min(C,e),i=Math.max(C,e);for(let p=0,m=0;p<this.children.length;p++){let c=this.children[p],h=m+c.size;if(r>m&&i<h)return c.setSelection(C-m-c.border,e-m-c.border,V,t);m=h}let o=this.domFromPos(C,C?-1:1),n=e==C?o:this.domFromPos(e,e?-1:1),l=V.getSelection(),s=!1;if((s5||p2)&&C==e){let{node:p,offset:m}=o;if(p.nodeType==3){if(s=!!(m&&p.nodeValue[m-1]==`
`),s&&m==p.nodeValue.length)for(let c=p,h;c;c=c.parentNode){if(h=c.nextSibling){h.nodeName=="BR"&&(o=n={node:h.parentNode,offset:H2(h)+1});break}let S=c.pmViewDesc;if(S&&S.node&&S.node.isBlock)break}}else{let c=p.childNodes[m-1];s=c&&(c.nodeName=="BR"||c.contentEditable=="false")}}if(s5&&l.focusNode&&l.focusNode!=n.node&&l.focusNode.nodeType==1){let p=l.focusNode.childNodes[l.focusOffset];p&&p.contentEditable=="false"&&(t=!0)}if(!(t||s&&p2)&&H0(o.node,o.offset,l.anchorNode,l.anchorOffset)&&H0(n.node,n.offset,l.focusNode,l.focusOffset))return;let d=!1;if((l.extend||C==e)&&!s){l.collapse(o.node,o.offset);try{C!=e&&l.extend(n.node,n.offset),d=!0}catch{}}if(!d){if(C>e){let m=o;o=n,n=m}let p=document.createRange();p.setEnd(n.node,n.offset),p.setStart(o.node,o.offset),l.removeAllRanges(),l.addRange(p)}}ignoreMutation(C){return!this.contentDOM&&C.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(C,e){for(let V=0,t=0;t<this.children.length;t++){let r=this.children[t],i=V+r.size;if(V==i?C<=i&&e>=V:C<i&&e>V){let o=V+r.border,n=i-r.border;if(C>=o&&e<=n){this.dirty=C==V||e==i?J3:mr,C==o&&e==n&&(r.contentLost||r.dom.parentNode!=this.contentDOM)?r.dirty=S5:r.markDirty(C-o,e-o);return}else r.dirty=r.dom==r.contentDOM&&r.dom.parentNode==this.contentDOM&&!r.children.length?J3:S5}V=i}this.dirty=J3}markParentsDirty(){let C=1;for(let e=this.parent;e;e=e.parent,C++){let V=C==1?J3:mr;e.dirty<V&&(e.dirty=V)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(C){return!1}},O9=class extends V0{constructor(C,e,V,t){let r,i=e.type.toDOM;if(typeof i=="function"&&(i=i(V,()=>{if(!r)return t;if(r.parent)return r.parent.posBeforeChild(r)})),!e.type.spec.raw){if(i.nodeType!=1){let o=document.createElement("span");o.appendChild(i),i=o}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(C,[],i,null),this.widget=e,this.widget=e,r=this}matchesWidget(C){return this.dirty==j2&&C.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(C){let e=this.widget.spec.stopEvent;return e?e(C):!1}ignoreMutation(C){return C.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}},zC=class extends V0{constructor(C,e,V,t){super(C,[],e,null),this.textDOM=V,this.text=t}get size(){return this.text.length}localPosFromDOM(C,e){return C!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e}domFromPos(C){return{node:this.textDOM,offset:C}}ignoreMutation(C){return C.type==="characterData"&&C.target.nodeValue==C.oldValue}},$0=class H extends V0{constructor(C,e,V,t,r){super(C,[],V,t),this.mark=e,this.spec=r}static create(C,e,V,t){let r=t.nodeViews[e.type.name],i=r&&r(e,t,V);return(!i||!i.dom)&&(i=G5.renderSpec(document,e.type.spec.toDOM(e,V),null,e.attrs)),new H(C,e,i.dom,i.contentDOM||i.dom,i)}parseRule(){return this.dirty&S5||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(C){return this.dirty!=S5&&this.mark.eq(C)}markDirty(C,e){if(super.markDirty(C,e),this.dirty!=j2){let V=this.parent;for(;!V.node;)V=V.parent;V.dirty<this.dirty&&(V.dirty=this.dirty),this.dirty=j2}}slice(C,e,V){let t=H.create(this.parent,this.mark,!0,V),r=this.children,i=this.size;e<i&&(r=KC(r,e,i,V)),C>0&&(r=KC(r,0,C,V));for(let o=0;o<r.length;o++)r[o].parent=t;return t.children=r,t}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}},h3=class H extends V0{constructor(C,e,V,t,r,i,o,n,l){super(C,[],r,i),this.node=e,this.outerDeco=V,this.innerDeco=t,this.nodeDOM=o}static create(C,e,V,t,r,i){let o=r.nodeViews[e.type.name],n,l=o&&o(e,r,()=>{if(!n)return i;if(n.parent)return n.parent.posBeforeChild(n)},V,t),s=l&&l.dom,d=l&&l.contentDOM;if(e.isText){if(!s)s=document.createTextNode(e.text);else if(s.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else s||({dom:s,contentDOM:d}=G5.renderSpec(document,e.type.spec.toDOM(e),null,e.attrs));!d&&!e.isText&&s.nodeName!="BR"&&(s.hasAttribute("contenteditable")||(s.contentEditable="false"),e.type.spec.draggable&&(s.draggable=!0));let p=s;return s=Ci(s,V,e),l?n=new UC(C,e,V,t,s,d||null,p,l,r,i+1):e.isText?new y9(C,e,V,t,s,p,r):new H(C,e,V,t,s,d||null,p,r,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let C={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(C.preserveWhitespace="full"),!this.contentDOM)C.getContent=()=>this.node.content;else if(!this.contentLost)C.contentElement=this.contentDOM;else{for(let e=this.children.length-1;e>=0;e--){let V=this.children[e];if(this.dom.contains(V.dom.parentNode)){C.contentElement=V.dom.parentNode;break}}C.contentElement||(C.getContent=()=>B.empty)}return C}matchesNode(C,e,V){return this.dirty==j2&&C.eq(this.node)&&b9(e,this.outerDeco)&&V.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(C,e){let V=this.node.inlineContent,t=e,r=C.composing?this.localCompositionInfo(C,e):null,i=r&&r.pos>-1?r:null,o=r&&r.pos<0,n=new $C(this,i&&i.node,C);Cc(this.node,this.innerDeco,(l,s,d)=>{l.spec.marks?n.syncToMarks(l.spec.marks,V,C):l.type.side>=0&&!d&&n.syncToMarks(s==this.node.childCount?l1.none:this.node.child(s).marks,V,C),n.placeWidget(l,C,t)},(l,s,d,p)=>{n.syncToMarks(l.marks,V,C);let m;n.findNodeMatch(l,s,d,p)||o&&C.state.selection.from>t&&C.state.selection.to<t+l.nodeSize&&(m=n.findIndexWithChild(r.node))>-1&&n.updateNodeAt(l,s,d,m,C)||n.updateNextNode(l,s,d,C,p,t)||n.addNode(l,s,d,C,t),t+=l.nodeSize}),n.syncToMarks([],V,C),this.node.isTextblock&&n.addTextblockHacks(),n.destroyRest(),(n.changed||this.dirty==J3)&&(i&&this.protectLocalComposition(C,i),Xr(this.contentDOM,this.children,C),G0&&ec(this.dom))}localCompositionInfo(C,e){let{from:V,to:t}=C.state.selection;if(!(C.state.selection instanceof H1)||V<e||t>e+this.node.content.size)return null;let r=C.input.compositionNode;if(!r||!this.dom.contains(r.parentNode))return null;if(this.node.inlineContent){let i=r.nodeValue,o=Hc(this.node.content,i,V-e,t-e);return o<0?null:{node:r,pos:o,text:i}}else return{node:r,pos:-1,text:""}}protectLocalComposition(C,{node:e,pos:V,text:t}){if(this.getDesc(e))return;let r=e;for(;r.parentNode!=this.contentDOM;r=r.parentNode){for(;r.previousSibling;)r.parentNode.removeChild(r.previousSibling);for(;r.nextSibling;)r.parentNode.removeChild(r.nextSibling);r.pmViewDesc&&(r.pmViewDesc=void 0)}let i=new zC(this,r,e,t);C.input.compositionNodes.push(i),this.children=KC(this.children,V,V+t.length,C,i)}update(C,e,V,t){return this.dirty==S5||!C.sameMarkup(this.node)?!1:(this.updateInner(C,e,V,t),!0)}updateInner(C,e,V,t){this.updateOuterDeco(e),this.node=C,this.innerDeco=V,this.contentDOM&&this.updateChildren(t,this.posAtStart),this.dirty=j2}updateOuterDeco(C){if(b9(C,this.outerDeco))return;let e=this.nodeDOM.nodeType!=1,V=this.dom;this.dom=Yr(this.dom,this.nodeDOM,GC(this.outerDeco,this.node,e),GC(C,this.node,e)),this.dom!=V&&(V.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=C}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}};function cr(H,C,e,V,t){Ci(V,C,H);let r=new h3(void 0,H,C,e,V,V,V,t,0);return r.contentDOM&&r.updateChildren(t,0),r}var y9=class H extends h3{constructor(C,e,V,t,r,i,o){super(C,e,V,t,r,null,i,o,0)}parseRule(){let C=this.nodeDOM.parentNode;for(;C&&C!=this.dom&&!C.pmIsDeco;)C=C.parentNode;return{skip:C||!0}}update(C,e,V,t){return this.dirty==S5||this.dirty!=j2&&!this.inParent()||!C.sameMarkup(this.node)?!1:(this.updateOuterDeco(e),(this.dirty!=j2||C.text!=this.node.text)&&C.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=C.text,t.trackWrites==this.nodeDOM&&(t.trackWrites=null)),this.node=C,this.dirty=j2,!0)}inParent(){let C=this.parent.contentDOM;for(let e=this.nodeDOM;e;e=e.parentNode)if(e==C)return!0;return!1}domFromPos(C){return{node:this.nodeDOM,offset:C}}localPosFromDOM(C,e,V){return C==this.nodeDOM?this.posAtStart+Math.min(e,this.node.text.length):super.localPosFromDOM(C,e,V)}ignoreMutation(C){return C.type!="characterData"&&C.type!="selection"}slice(C,e,V){let t=this.node.cut(C,e),r=document.createTextNode(t.text);return new H(this.parent,t,this.outerDeco,this.innerDeco,r,r,V)}markDirty(C,e){super.markDirty(C,e),this.dom!=this.nodeDOM&&(C==0||e==this.nodeDOM.nodeValue.length)&&(this.dirty=S5)}get domAtom(){return!1}isText(C){return this.node.text==C}},k9=class extends V0{parseRule(){return{ignore:!0}}matchesHack(C){return this.dirty==j2&&this.dom.nodeName==C}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}},UC=class extends h3{constructor(C,e,V,t,r,i,o,n,l,s){super(C,e,V,t,r,i,o,l,s),this.spec=n}update(C,e,V,t){if(this.dirty==S5)return!1;if(this.spec.update&&(this.node.type==C.type||this.spec.multiType)){let r=this.spec.update(C,e,V);return r&&this.updateInner(C,e,V,t),r}else return!this.contentDOM&&!C.isLeaf?!1:super.update(C,e,V,t)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(C,e,V,t){this.spec.setSelection?this.spec.setSelection(C,e,V):super.setSelection(C,e,V,t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(C){return this.spec.stopEvent?this.spec.stopEvent(C):!1}ignoreMutation(C){return this.spec.ignoreMutation?this.spec.ignoreMutation(C):super.ignoreMutation(C)}};function Xr(H,C,e){let V=H.firstChild,t=!1;for(let r=0;r<C.length;r++){let i=C[r],o=i.dom;if(o.parentNode==H){for(;o!=V;)V=fr(V),t=!0;V=V.nextSibling}else t=!0,H.insertBefore(o,V);if(i instanceof $0){let n=V?V.previousSibling:H.lastChild;Xr(i.contentDOM,i.children,e),V=n?n.nextSibling:H.firstChild}}for(;V;)V=fr(V),t=!0;t&&e.trackWrites==H&&(e.trackWrites=null)}var N7=function(H){H&&(this.nodeName=H)};N7.prototype=Object.create(null);var X3=[new N7];function GC(H,C,e){if(H.length==0)return X3;let V=e?X3[0]:new N7,t=[V];for(let r=0;r<H.length;r++){let i=H[r].type.attrs;if(i){i.nodeName&&t.push(V=new N7(i.nodeName));for(let o in i){let n=i[o];n!=null&&(e&&t.length==1&&t.push(V=new N7(C.isInline?"span":"div")),o=="class"?V.class=(V.class?V.class+" ":"")+n:o=="style"?V.style=(V.style?V.style+";":"")+n:o!="nodeName"&&(V[o]=n))}}}return t}function Yr(H,C,e,V){if(e==X3&&V==X3)return C;let t=C;for(let r=0;r<V.length;r++){let i=V[r],o=e[r];if(r){let n;o&&o.nodeName==i.nodeName&&t!=H&&(n=t.parentNode)&&n.nodeName.toLowerCase()==i.nodeName||(n=document.createElement(i.nodeName),n.pmIsDeco=!0,n.appendChild(t),o=X3[0]),t=n}Jm(t,o||X3[0],i)}return t}function Jm(H,C,e){for(let V in C)V!="class"&&V!="style"&&V!="nodeName"&&!(V in e)&&H.removeAttribute(V);for(let V in e)V!="class"&&V!="style"&&V!="nodeName"&&e[V]!=C[V]&&H.setAttribute(V,e[V]);if(C.class!=e.class){let V=C.class?C.class.split(" ").filter(Boolean):[],t=e.class?e.class.split(" ").filter(Boolean):[];for(let r=0;r<V.length;r++)t.indexOf(V[r])==-1&&H.classList.remove(V[r]);for(let r=0;r<t.length;r++)V.indexOf(t[r])==-1&&H.classList.add(t[r]);H.classList.length==0&&H.removeAttribute("class")}if(C.style!=e.style){if(C.style){let V=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,t;for(;t=V.exec(C.style);)H.style.removeProperty(t[1])}e.style&&(H.style.cssText+=e.style)}}function Ci(H,C,e){return Yr(H,H,X3,GC(C,e,H.nodeType!=1))}function b9(H,C){if(H.length!=C.length)return!1;for(let e=0;e<H.length;e++)if(!H[e].type.eq(C[e].type))return!1;return!0}function fr(H){let C=H.nextSibling;return H.parentNode.removeChild(H),C}var $C=class{constructor(C,e,V){this.lock=e,this.view=V,this.index=0,this.stack=[],this.changed=!1,this.top=C,this.preMatch=Xm(C.node.content,C)}destroyBetween(C,e){if(C!=e){for(let V=C;V<e;V++)this.top.children[V].destroy();this.top.children.splice(C,e-C),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(C,e,V){let t=0,r=this.stack.length>>1,i=Math.min(r,C.length);for(;t<i&&(t==r-1?this.top:this.stack[t+1<<1]).matchesMark(C[t])&&C[t].type.spec.spanning!==!1;)t++;for(;t<r;)this.destroyRest(),this.top.dirty=j2,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<C.length;){this.stack.push(this.top,this.index+1);let o=-1;for(let n=this.index;n<Math.min(this.index+3,this.top.children.length);n++){let l=this.top.children[n];if(l.matchesMark(C[r])&&!this.isLocked(l.dom)){o=n;break}}if(o>-1)o>this.index&&(this.changed=!0,this.destroyBetween(this.index,o)),this.top=this.top.children[this.index];else{let n=$0.create(this.top,C[r],e,V);this.top.children.splice(this.index,0,n),this.top=n,this.changed=!0}this.index=0,r++}}findNodeMatch(C,e,V,t){let r=-1,i;if(t>=this.preMatch.index&&(i=this.preMatch.matches[t-this.preMatch.index]).parent==this.top&&i.matchesNode(C,e,V))r=this.top.children.indexOf(i,this.index);else for(let o=this.index,n=Math.min(this.top.children.length,o+5);o<n;o++){let l=this.top.children[o];if(l.matchesNode(C,e,V)&&!this.preMatch.matched.has(l)){r=o;break}}return r<0?!1:(this.destroyBetween(this.index,r),this.index++,!0)}updateNodeAt(C,e,V,t,r){let i=this.top.children[t];return i.dirty==S5&&i.dom==i.contentDOM&&(i.dirty=J3),i.update(C,e,V,r)?(this.destroyBetween(this.index,t),this.index++,!0):!1}findIndexWithChild(C){for(;;){let e=C.parentNode;if(!e)return-1;if(e==this.top.contentDOM){let V=C.pmViewDesc;if(V){for(let t=this.index;t<this.top.children.length;t++)if(this.top.children[t]==V)return t}return-1}C=e}}updateNextNode(C,e,V,t,r,i){for(let o=this.index;o<this.top.children.length;o++){let n=this.top.children[o];if(n instanceof h3){let l=this.preMatch.matched.get(n);if(l!=null&&l!=r)return!1;let s=n.dom,d,p=this.isLocked(s)&&!(C.isText&&n.node&&n.node.isText&&n.nodeDOM.nodeValue==C.text&&n.dirty!=S5&&b9(e,n.outerDeco));if(!p&&n.update(C,e,V,t))return this.destroyBetween(this.index,o),n.dom!=s&&(this.changed=!0),this.index++,!0;if(!p&&(d=this.recreateWrapper(n,C,e,V,t,i)))return this.destroyBetween(this.index,o),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=J3,d.updateChildren(t,i+1),d.dirty=j2),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(C,e,V,t,r,i){if(C.dirty||e.isAtom||!C.children.length||!C.node.content.eq(e.content)||!b9(V,C.outerDeco)||!t.eq(C.innerDeco))return null;let o=h3.create(this.top,e,V,t,r,i);if(o.contentDOM){o.children=C.children,C.children=[];for(let n of o.children)n.parent=o}return C.destroy(),o}addNode(C,e,V,t,r){let i=h3.create(this.top,C,e,V,t,r);i.contentDOM&&i.updateChildren(t,r+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(C,e,V){let t=this.index<this.top.children.length?this.top.children[this.index]:null;if(t&&t.matchesWidget(C)&&(C==t.widget||!t.widget.type.toDOM.parentNode))this.index++;else{let r=new O9(this.top,C,e,V);this.top.children.splice(this.index++,0,r),this.changed=!0}}addTextblockHacks(){let C=this.top.children[this.index-1],e=this.top;for(;C instanceof $0;)e=C,C=e.children[e.children.length-1];(!C||!(C instanceof y9)||/\n$/.test(C.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(C.node.text))&&((p2||n2)&&C&&C.dom.contentEditable=="false"&&this.addHackNode("IMG",e),this.addHackNode("BR",this.top))}addHackNode(C,e){if(e==this.top&&this.index<e.children.length&&e.children[this.index].matchesHack(C))this.index++;else{let V=document.createElement(C);C=="IMG"&&(V.className="ProseMirror-separator",V.alt=""),C=="BR"&&(V.className="ProseMirror-trailingBreak");let t=new k9(this.top,[],V,null);e!=this.top?e.children.push(t):e.children.splice(this.index++,0,t),this.changed=!0}}isLocked(C){return this.lock&&(C==this.lock||C.nodeType==1&&C.contains(this.lock.parentNode))}};function Xm(H,C){let e=C,V=e.children.length,t=H.childCount,r=new Map,i=[];C:for(;t>0;){let o;for(;;)if(V){let l=e.children[V-1];if(l instanceof $0)e=l,V=l.children.length;else{o=l,V--;break}}else{if(e==C)break C;V=e.parent.children.indexOf(e),e=e.parent}let n=o.node;if(n){if(n!=H.child(t-1))break;--t,r.set(o,t),i.push(o)}}return{index:t,matched:r,matches:i.reverse()}}function Ym(H,C){return H.type.side-C.type.side}function Cc(H,C,e,V){let t=C.locals(H),r=0;if(t.length==0){for(let l=0;l<H.childCount;l++){let s=H.child(l);V(s,t,C.forChild(r,s),l),r+=s.nodeSize}return}let i=0,o=[],n=null;for(let l=0;;){let s,d;for(;i<t.length&&t[i].to==r;){let S=t[i++];S.widget&&(s?(d||(d=[s])).push(S):s=S)}if(s)if(d){d.sort(Ym);for(let S=0;S<d.length;S++)e(d[S],l,!!n)}else e(s,l,!!n);let p,m;if(n)m=-1,p=n,n=null;else if(l<H.childCount)m=l,p=H.child(l++);else break;for(let S=0;S<o.length;S++)o[S].to<=r&&o.splice(S--,1);for(;i<t.length&&t[i].from<=r&&t[i].to>r;)o.push(t[i++]);let c=r+p.nodeSize;if(p.isText){let S=c;i<t.length&&t[i].from<S&&(S=t[i].from);for(let O=0;O<o.length;O++)o[O].to<S&&(S=o[O].to);S<c&&(n=p.cut(S-r),p=p.cut(0,S-r),c=S,m=-1)}else for(;i<t.length&&t[i].to<c;)i++;let h=p.isInline&&!p.isLeaf?o.filter(S=>!S.inline):o.slice();V(p,h,C.forChild(r,p),m),r=c}}function ec(H){if(H.nodeName=="UL"||H.nodeName=="OL"){let C=H.style.cssText;H.style.cssText=C+"; list-style: square !important",window.getComputedStyle(H).listStyle,H.style.cssText=C}}function Hc(H,C,e,V){for(let t=0,r=0;t<H.childCount&&r<=V;){let i=H.child(t++),o=r;if(r+=i.nodeSize,!i.isText)continue;let n=i.text;for(;t<H.childCount;){let l=H.child(t++);if(r+=l.nodeSize,!l.isText)break;n+=l.text}if(r>=e){if(r>=V&&n.slice(V-C.length-o,V-o)==C)return V-C.length;let l=o<V?n.lastIndexOf(C,V-o-1):-1;if(l>=0&&l+C.length+o>=e)return o+l;if(e==V&&n.length>=V+C.length-o&&n.slice(V-o,V-o+C.length)==C)return V}}return-1}function KC(H,C,e,V,t){let r=[];for(let i=0,o=0;i<H.length;i++){let n=H[i],l=o,s=o+=n.size;l>=e||s<=C?r.push(n):(l<C&&r.push(n.slice(0,C-l,V)),t&&(r.push(t),t=void 0),s>e&&r.push(n.slice(e-l,n.size,V)))}return r}function te(H,C=null){let e=H.domSelectionRange(),V=H.state.doc;if(!e.focusNode)return null;let t=H.docView.nearestDesc(e.focusNode),r=t&&t.size==0,i=H.docView.posFromDOM(e.focusNode,e.focusOffset,1);if(i<0)return null;let o=V.resolve(i),n,l;if(D9(e)){for(n=i;t&&!t.node;)t=t.parent;let d=t.node;if(t&&d.isAtom&&K.isSelectable(d)&&t.parent&&!(d.isInline&&wm(e.focusNode,e.focusOffset,t.dom))){let p=t.posBefore;l=new K(i==p?o:V.resolve(p))}}else{if(e instanceof H.dom.ownerDocument.defaultView.Selection&&e.rangeCount>1){let d=i,p=i;for(let m=0;m<e.rangeCount;m++){let c=e.getRangeAt(m);d=Math.min(d,H.docView.posFromDOM(c.startContainer,c.startOffset,1)),p=Math.max(p,H.docView.posFromDOM(c.endContainer,c.endOffset,-1))}if(d<0)return null;[n,i]=p==H.state.selection.anchor?[p,d]:[d,p],o=V.resolve(i)}else n=H.docView.posFromDOM(e.anchorNode,e.anchorOffset,1);if(n<0)return null}let s=V.resolve(n);if(!l){let d=C=="pointer"||H.state.selection.head<o.pos&&!r?1:-1;l=Le(H,s,o,d)}return l}function ei(H){return H.editable?H.hasFocus():Vi(H)&&document.activeElement&&document.activeElement.contains(H.dom)}function j5(H,C=!1){let e=H.state.selection;if(Hi(H,e),!!ei(H)){if(!C&&H.input.mouseDown&&H.input.mouseDown.allowDefault&&n2){let V=H.domSelectionRange(),t=H.domObserver.currentSelection;if(V.anchorNode&&t.anchorNode&&H0(V.anchorNode,V.anchorOffset,t.anchorNode,t.anchorOffset)){H.input.mouseDown.delayedSelectionSync=!0,H.domObserver.setCurSelection();return}}if(H.domObserver.disconnectSelection(),H.cursorWrapper)tc(H);else{let{anchor:V,head:t}=e,r,i;xr&&!(e instanceof H1)&&(e.$from.parent.inlineContent||(r=vr(H,e.from)),!e.empty&&!e.$from.parent.inlineContent&&(i=vr(H,e.to))),H.docView.setSelection(V,t,H.root,C),xr&&(r&&hr(r),i&&hr(i)),e.visible?H.dom.classList.remove("ProseMirror-hideselection"):(H.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Vc(H))}H.domObserver.setCurSelection(),H.domObserver.connectSelection()}}var xr=p2||n2&&Gr<63;function vr(H,C){let{node:e,offset:V}=H.docView.domFromPos(C,0),t=V<e.childNodes.length?e.childNodes[V]:null,r=V?e.childNodes[V-1]:null;if(p2&&t&&t.contentEditable=="false")return EC(t);if((!t||t.contentEditable=="false")&&(!r||r.contentEditable=="false")){if(t)return EC(t);if(r)return EC(r)}}function EC(H){return H.contentEditable="true",p2&&H.draggable&&(H.draggable=!1,H.wasDraggable=!0),H}function hr(H){H.contentEditable="false",H.wasDraggable&&(H.draggable=!0,H.wasDraggable=null)}function Vc(H){let C=H.dom.ownerDocument;C.removeEventListener("selectionchange",H.input.hideSelectionGuard);let e=H.domSelectionRange(),V=e.anchorNode,t=e.anchorOffset;C.addEventListener("selectionchange",H.input.hideSelectionGuard=()=>{(e.anchorNode!=V||e.anchorOffset!=t)&&(C.removeEventListener("selectionchange",H.input.hideSelectionGuard),setTimeout(()=>{(!ei(H)||H.state.selection.visible)&&H.dom.classList.remove("ProseMirror-hideselection")},20))})}function tc(H){let C=H.domSelection(),e=document.createRange();if(!C)return;let V=H.cursorWrapper.dom,t=V.nodeName=="IMG";t?e.setStart(V.parentNode,H2(V)+1):e.setStart(V,0),e.collapse(!0),C.removeAllRanges(),C.addRange(e),!t&&!H.state.selection.visible&&S2&&v3<=11&&(V.disabled=!0,V.disabled=!1)}function Hi(H,C){if(C instanceof K){let e=H.docView.descAt(C.from);e!=H.lastSelectedViewDesc&&(Zr(H),e&&e.selectNode(),H.lastSelectedViewDesc=e)}else Zr(H)}function Zr(H){H.lastSelectedViewDesc&&(H.lastSelectedViewDesc.parent&&H.lastSelectedViewDesc.deselectNode(),H.lastSelectedViewDesc=void 0)}function Le(H,C,e,V){return H.someProp("createSelectionBetween",t=>t(H,C,e))||H1.between(C,e,V)}function Sr(H){return H.editable&&!H.hasFocus()?!1:Vi(H)}function Vi(H){let C=H.domSelectionRange();if(!C.anchorNode)return!1;try{return H.dom.contains(C.anchorNode.nodeType==3?C.anchorNode.parentNode:C.anchorNode)&&(H.editable||H.dom.contains(C.focusNode.nodeType==3?C.focusNode.parentNode:C.focusNode))}catch{return!1}}function Lc(H){let C=H.docView.domFromPos(H.state.selection.anchor,0),e=H.domSelectionRange();return H0(C.node,C.offset,e.anchorNode,e.anchorOffset)}function QC(H,C){let{$anchor:e,$head:V}=H.selection,t=C>0?e.max(V):e.min(V),r=t.parent.inlineContent?t.depth?H.doc.resolve(C>0?t.after():t.before()):null:t;return r&&J.findFrom(r,C)}function f3(H,C){return H.dispatch(H.state.tr.setSelection(C).scrollIntoView()),!0}function gr(H,C,e){let V=H.state.selection;if(V instanceof H1)if(e.indexOf("s")>-1){let{$head:t}=V,r=t.textOffset?null:C<0?t.nodeBefore:t.nodeAfter;if(!r||r.isText||!r.isLeaf)return!1;let i=H.state.doc.resolve(t.pos+r.nodeSize*(C<0?-1:1));return f3(H,new H1(V.$anchor,i))}else if(V.empty){if(H.endOfTextblock(C>0?"forward":"backward")){let t=QC(H.state,C);return t&&t instanceof K?f3(H,t):!1}else if(!(Q2&&e.indexOf("m")>-1)){let t=V.$head,r=t.textOffset?null:C<0?t.nodeBefore:t.nodeAfter,i;if(!r||r.isText)return!1;let o=C<0?t.pos-r.nodeSize:t.pos;return r.isAtom||(i=H.docView.descAt(o))&&!i.contentDOM?K.isSelectable(r)?f3(H,new K(C<0?H.state.doc.resolve(t.pos-r.nodeSize):t)):$7?f3(H,new H1(H.state.doc.resolve(C<0?o:o+r.nodeSize))):!1:!1}}else return!1;else{if(V instanceof K&&V.node.isInline)return f3(H,new H1(C>0?V.$to:V.$from));{let t=QC(H.state,C);return t?f3(H,t):!1}}}function w9(H){return H.nodeType==3?H.nodeValue.length:H.childNodes.length}function I7(H,C){let e=H.pmViewDesc;return e&&e.size==0&&(C<0||H.nextSibling||H.nodeName!="BR")}function W0(H,C){return C<0?rc(H):ic(H)}function rc(H){let C=H.domSelectionRange(),e=C.focusNode,V=C.focusOffset;if(!e)return;let t,r,i=!1;for(s5&&e.nodeType==1&&V<w9(e)&&I7(e.childNodes[V],-1)&&(i=!0);;)if(V>0){if(e.nodeType!=1)break;{let o=e.childNodes[V-1];if(I7(o,-1))t=e,r=--V;else if(o.nodeType==3)e=o,V=e.nodeValue.length;else break}}else{if(ti(e))break;{let o=e.previousSibling;for(;o&&I7(o,-1);)t=e.parentNode,r=H2(o),o=o.previousSibling;if(o)e=o,V=w9(e);else{if(e=e.parentNode,e==H.dom)break;V=0}}}i?qC(H,e,V):t&&qC(H,t,r)}function ic(H){let C=H.domSelectionRange(),e=C.focusNode,V=C.focusOffset;if(!e)return;let t=w9(e),r,i;for(;;)if(V<t){if(e.nodeType!=1)break;let o=e.childNodes[V];if(I7(o,1))r=e,i=++V;else break}else{if(ti(e))break;{let o=e.nextSibling;for(;o&&I7(o,1);)r=o.parentNode,i=H2(o)+1,o=o.nextSibling;if(o)e=o,V=0,t=w9(e);else{if(e=e.parentNode,e==H.dom)break;V=t=0}}}r&&qC(H,r,i)}function ti(H){let C=H.pmViewDesc;return C&&C.node&&C.node.isBlock}function Mc(H,C){for(;H&&C==H.childNodes.length&&!G7(H);)C=H2(H)+1,H=H.parentNode;for(;H&&C<H.childNodes.length;){let e=H.childNodes[C];if(e.nodeType==3)return e;if(e.nodeType==1&&e.contentEditable=="false")break;H=e,C=0}}function oc(H,C){for(;H&&!C&&!G7(H);)C=H2(H),H=H.parentNode;for(;H&&C;){let e=H.childNodes[C-1];if(e.nodeType==3)return e;if(e.nodeType==1&&e.contentEditable=="false")break;H=e,C=H.childNodes.length}}function qC(H,C,e){if(C.nodeType!=3){let r,i;(i=Mc(C,e))?(C=i,e=0):(r=oc(C,e))&&(C=r,e=r.nodeValue.length)}let V=H.domSelection();if(!V)return;if(D9(V)){let r=document.createRange();r.setEnd(C,e),r.setStart(C,e),V.removeAllRanges(),V.addRange(r)}else V.extend&&V.extend(C,e);H.domObserver.setCurSelection();let{state:t}=H;setTimeout(()=>{H.state==t&&j5(H)},50)}function Or(H,C){let e=H.state.doc.resolve(C);if(!(n2||Bm)&&e.parent.inlineContent){let t=H.coordsAtPos(C);if(C>e.start()){let r=H.coordsAtPos(C-1),i=(r.top+r.bottom)/2;if(i>t.top&&i<t.bottom&&Math.abs(r.left-t.left)>1)return r.left<t.left?"ltr":"rtl"}if(C<e.end()){let r=H.coordsAtPos(C+1),i=(r.top+r.bottom)/2;if(i>t.top&&i<t.bottom&&Math.abs(r.left-t.left)>1)return r.left>t.left?"ltr":"rtl"}}return getComputedStyle(H.dom).direction=="rtl"?"rtl":"ltr"}function yr(H,C,e){let V=H.state.selection;if(V instanceof H1&&!V.empty||e.indexOf("s")>-1||Q2&&e.indexOf("m")>-1)return!1;let{$from:t,$to:r}=V;if(!t.parent.inlineContent||H.endOfTextblock(C<0?"up":"down")){let i=QC(H.state,C);if(i&&i instanceof K)return f3(H,i)}if(!t.parent.inlineContent){let i=C<0?t:r,o=V instanceof D2?J.near(i,C):J.findFrom(i,C);return o?f3(H,o):!1}return!1}function kr(H,C){if(!(H.state.selection instanceof H1))return!0;let{$head:e,$anchor:V,empty:t}=H.state.selection;if(!e.sameParent(V))return!0;if(!t)return!1;if(H.endOfTextblock(C>0?"forward":"backward"))return!0;let r=!e.textOffset&&(C<0?e.nodeBefore:e.nodeAfter);if(r&&!r.isText){let i=H.state.tr;return C<0?i.delete(e.pos-r.nodeSize,e.pos):i.delete(e.pos,e.pos+r.nodeSize),H.dispatch(i),!0}return!1}function br(H,C,e){H.domObserver.stop(),C.contentEditable=e,H.domObserver.start()}function nc(H){if(!p2||H.state.selection.$head.parentOffset>0)return!1;let{focusNode:C,focusOffset:e}=H.domSelectionRange();if(C&&C.nodeType==1&&e==0&&C.firstChild&&C.firstChild.contentEditable=="false"){let V=C.firstChild;br(H,V,"true"),setTimeout(()=>br(H,V,"false"),20)}return!1}function ac(H){let C="";return H.ctrlKey&&(C+="c"),H.metaKey&&(C+="m"),H.altKey&&(C+="a"),H.shiftKey&&(C+="s"),C}function lc(H,C){let e=C.keyCode,V=ac(C);if(e==8||Q2&&e==72&&V=="c")return kr(H,-1)||W0(H,-1);if(e==46&&!C.shiftKey||Q2&&e==68&&V=="c")return kr(H,1)||W0(H,1);if(e==13||e==27)return!0;if(e==37||Q2&&e==66&&V=="c"){let t=e==37?Or(H,H.state.selection.from)=="ltr"?-1:1:-1;return gr(H,t,V)||W0(H,t)}else if(e==39||Q2&&e==70&&V=="c"){let t=e==39?Or(H,H.state.selection.from)=="ltr"?1:-1:1;return gr(H,t,V)||W0(H,t)}else{if(e==38||Q2&&e==80&&V=="c")return yr(H,-1,V)||W0(H,-1);if(e==40||Q2&&e==78&&V=="c")return nc(H)||yr(H,1,V)||W0(H,1);if(V==(Q2?"m":"c")&&(e==66||e==73||e==89||e==90))return!0}return!1}function Li(H,C){H.someProp("transformCopied",m=>{C=m(C,H)});let e=[],{content:V,openStart:t,openEnd:r}=C;for(;t>1&&r>1&&V.childCount==1&&V.firstChild.childCount==1;){t--,r--;let m=V.firstChild;e.push(m.type.name,m.attrs!=m.type.defaultAttrs?m.attrs:null),V=m.content}let i=H.someProp("clipboardSerializer")||G5.fromSchema(H.state.schema),o=ai(),n=o.createElement("div");n.appendChild(i.serializeFragment(V,{document:o}));let l=n.firstChild,s,d=0;for(;l&&l.nodeType==1&&(s=ni[l.nodeName.toLowerCase()]);){for(let m=s.length-1;m>=0;m--){let c=o.createElement(s[m]);for(;n.firstChild;)c.appendChild(n.firstChild);n.appendChild(c),d++}l=n.firstChild}l&&l.nodeType==1&&l.setAttribute("data-pm-slice",`${t} ${r}${d?` -${d}`:""} ${JSON.stringify(e)}`);let p=H.someProp("clipboardTextSerializer",m=>m(C,H))||C.content.textBetween(0,C.content.size,`

`);return{dom:n,text:p,slice:C}}function ri(H,C,e,V,t){let r=t.parent.type.spec.code,i,o;if(!e&&!C)return null;let n=C&&(V||r||!e);if(n){if(H.someProp("transformPastedText",p=>{C=p(C,r||V,H)}),r)return C?new _(B.from(H.state.schema.text(C.replace(/\r\n?/g,`
`))),0,0):_.empty;let d=H.someProp("clipboardTextParser",p=>p(C,t,V,H));if(d)o=d;else{let p=t.marks(),{schema:m}=H.state,c=G5.fromSchema(m);i=document.createElement("div"),C.split(/(?:\r\n?|\n)+/).forEach(h=>{let S=i.appendChild(document.createElement("p"));h&&S.appendChild(c.serializeNode(m.text(h,p)))})}}else H.someProp("transformPastedHTML",d=>{e=d(e,H)}),i=pc(e),$7&&uc(i);let l=i&&i.querySelector("[data-pm-slice]"),s=l&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(l.getAttribute("data-pm-slice")||"");if(s&&s[3])for(let d=+s[3];d>0;d--){let p=i.firstChild;for(;p&&p.nodeType!=1;)p=p.nextSibling;if(!p)break;i=p}if(o||(o=(H.someProp("clipboardParser")||H.someProp("domParser")||h5.fromSchema(H.state.schema)).parseSlice(i,{preserveWhitespace:!!(n||s),context:t,ruleFromNode(p){return p.nodeName=="BR"&&!p.nextSibling&&p.parentNode&&!sc.test(p.parentNode.nodeName)?{ignore:!0}:null}})),s)o=mc(wr(o,+s[1],+s[2]),s[4]);else if(o=_.maxOpen(Ac(o.content,t),!0),o.openStart||o.openEnd){let d=0,p=0;for(let m=o.content.firstChild;d<o.openStart&&!m.type.spec.isolating;d++,m=m.firstChild);for(let m=o.content.lastChild;p<o.openEnd&&!m.type.spec.isolating;p++,m=m.lastChild);o=wr(o,d,p)}return H.someProp("transformPasted",d=>{o=d(o,H)}),o}var sc=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Ac(H,C){if(H.childCount<2)return H;for(let e=C.depth;e>=0;e--){let t=C.node(e).contentMatchAt(C.index(e)),r,i=[];if(H.forEach(o=>{if(!i)return;let n=t.findWrapping(o.type),l;if(!n)return i=null;if(l=i.length&&r.length&&Mi(n,r,o,i[i.length-1],0))i[i.length-1]=l;else{i.length&&(i[i.length-1]=oi(i[i.length-1],r.length));let s=ii(o,n);i.push(s),t=t.matchType(s.type),r=n}}),i)return B.from(i)}return H}function ii(H,C,e=0){for(let V=C.length-1;V>=e;V--)H=C[V].create(null,B.from(H));return H}function Mi(H,C,e,V,t){if(t<H.length&&t<C.length&&H[t]==C[t]){let r=Mi(H,C,e,V.lastChild,t+1);if(r)return V.copy(V.content.replaceChild(V.childCount-1,r));if(V.contentMatchAt(V.childCount).matchType(t==H.length-1?e.type:H[t+1]))return V.copy(V.content.append(B.from(ii(e,H,t+1))))}}function oi(H,C){if(C==0)return H;let e=H.content.replaceChild(H.childCount-1,oi(H.lastChild,C-1)),V=H.contentMatchAt(H.childCount).fillBefore(B.empty,!0);return H.copy(e.append(V))}function jC(H,C,e,V,t,r){let i=C<0?H.firstChild:H.lastChild,o=i.content;return H.childCount>1&&(r=0),t<V-1&&(o=jC(o,C,e,V,t+1,r)),t>=e&&(o=C<0?i.contentMatchAt(0).fillBefore(o,r<=t).append(o):o.append(i.contentMatchAt(i.childCount).fillBefore(B.empty,!0))),H.replaceChild(C<0?0:H.childCount-1,i.copy(o))}function wr(H,C,e){return C<H.openStart&&(H=new _(jC(H.content,-1,C,H.openStart,0,H.openEnd),C,H.openEnd)),e<H.openEnd&&(H=new _(jC(H.content,1,e,H.openEnd,0,0),H.openStart,e)),H}var ni={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Tr=null;function ai(){return Tr||(Tr=document.implementation.createHTMLDocument("title"))}var RC=null;function dc(H){let C=window.trustedTypes;return C?(RC||(RC=C.createPolicy("ProseMirrorClipboard",{createHTML:e=>e})),RC.createHTML(H)):H}function pc(H){let C=/^(\s*<meta [^>]*>)*/.exec(H);C&&(H=H.slice(C[0].length));let e=ai().createElement("div"),V=/<([a-z][^>\s]+)/i.exec(H),t;if((t=V&&ni[V[1].toLowerCase()])&&(H=t.map(r=>"<"+r+">").join("")+H+t.map(r=>"</"+r+">").reverse().join("")),e.innerHTML=dc(H),t)for(let r=0;r<t.length;r++)e=e.querySelector(t[r])||e;return e}function uc(H){let C=H.querySelectorAll(n2?"span:not([class]):not([style])":"span.Apple-converted-space");for(let e=0;e<C.length;e++){let V=C[e];V.childNodes.length==1&&V.textContent=="\xA0"&&V.parentNode&&V.parentNode.replaceChild(H.ownerDocument.createTextNode(" "),V)}}function mc(H,C){if(!H.size)return H;let e=H.content.firstChild.type.schema,V;try{V=JSON.parse(C)}catch{return H}let{content:t,openStart:r,openEnd:i}=H;for(let o=V.length-2;o>=0;o-=2){let n=e.nodes[V[o]];if(!n||n.hasRequiredAttrs())break;t=B.from(n.create(V[o+1],t)),r++,i++}return new _(t,r,i)}var u2={},m2={},cc={touchstart:!0,touchmove:!0},JC=class{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}};function fc(H){for(let C in u2){let e=u2[C];H.dom.addEventListener(C,H.input.eventHandlers[C]=V=>{vc(H,V)&&!re(H,V)&&(H.editable||!(V.type in m2))&&e(H,V)},cc[C]?{passive:!0}:void 0)}p2&&H.dom.addEventListener("input",()=>null),XC(H)}function x3(H,C){H.input.lastSelectionOrigin=C,H.input.lastSelectionTime=Date.now()}function xc(H){H.domObserver.stop();for(let C in H.input.eventHandlers)H.dom.removeEventListener(C,H.input.eventHandlers[C]);clearTimeout(H.input.composingTimeout),clearTimeout(H.input.lastIOSEnterFallbackTimeout)}function XC(H){H.someProp("handleDOMEvents",C=>{for(let e in C)H.input.eventHandlers[e]||H.dom.addEventListener(e,H.input.eventHandlers[e]=V=>re(H,V))})}function re(H,C){return H.someProp("handleDOMEvents",e=>{let V=e[C.type];return V?V(H,C)||C.defaultPrevented:!1})}function vc(H,C){if(!C.bubbles)return!0;if(C.defaultPrevented)return!1;for(let e=C.target;e!=H.dom;e=e.parentNode)if(!e||e.nodeType==11||e.pmViewDesc&&e.pmViewDesc.stopEvent(C))return!1;return!0}function hc(H,C){!re(H,C)&&u2[C.type]&&(H.editable||!(C.type in m2))&&u2[C.type](H,C)}m2.keydown=(H,C)=>{let e=C;if(H.input.shiftKey=e.keyCode==16||e.shiftKey,!si(H,e)&&(H.input.lastKeyCode=e.keyCode,H.input.lastKeyCodeTime=Date.now(),!(l5&&n2&&e.keyCode==13)))if(e.keyCode!=229&&H.domObserver.forceFlush(),G0&&e.keyCode==13&&!e.ctrlKey&&!e.altKey&&!e.metaKey){let V=Date.now();H.input.lastIOSEnter=V,H.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{H.input.lastIOSEnter==V&&(H.someProp("handleKeyDown",t=>t(H,j3(13,"Enter"))),H.input.lastIOSEnter=0)},200)}else H.someProp("handleKeyDown",V=>V(H,e))||lc(H,e)?e.preventDefault():x3(H,"key")};m2.keyup=(H,C)=>{C.keyCode==16&&(H.input.shiftKey=!1)};m2.keypress=(H,C)=>{let e=C;if(si(H,e)||!e.charCode||e.ctrlKey&&!e.altKey||Q2&&e.metaKey)return;if(H.someProp("handleKeyPress",t=>t(H,e))){e.preventDefault();return}let V=H.state.selection;if(!(V instanceof H1)||!V.$from.sameParent(V.$to)){let t=String.fromCharCode(e.charCode);!/[\r\n]/.test(t)&&!H.someProp("handleTextInput",r=>r(H,V.$from.pos,V.$to.pos,t))&&H.dispatch(H.state.tr.insertText(t).scrollIntoView()),e.preventDefault()}};function N9(H){return{left:H.clientX,top:H.clientY}}function Zc(H,C){let e=C.x-H.clientX,V=C.y-H.clientY;return e*e+V*V<100}function ie(H,C,e,V,t){if(V==-1)return!1;let r=H.state.doc.resolve(V);for(let i=r.depth+1;i>0;i--)if(H.someProp(C,o=>i>r.depth?o(H,e,r.nodeAfter,r.before(i),t,!0):o(H,e,r.node(i),r.before(i),t,!1)))return!0;return!1}function U0(H,C,e){if(H.focused||H.focus(),H.state.selection.eq(C))return;let V=H.state.tr.setSelection(C);e=="pointer"&&V.setMeta("pointer",!0),H.dispatch(V)}function Sc(H,C){if(C==-1)return!1;let e=H.state.doc.resolve(C),V=e.nodeAfter;return V&&V.isAtom&&K.isSelectable(V)?(U0(H,new K(e),"pointer"),!0):!1}function gc(H,C){if(C==-1)return!1;let e=H.state.selection,V,t;e instanceof K&&(V=e.node);let r=H.state.doc.resolve(C);for(let i=r.depth+1;i>0;i--){let o=i>r.depth?r.nodeAfter:r.node(i);if(K.isSelectable(o)){V&&e.$from.depth>0&&i>=e.$from.depth&&r.before(e.$from.depth+1)==e.$from.pos?t=r.before(e.$from.depth):t=r.before(i);break}}return t!=null?(U0(H,K.create(H.state.doc,t),"pointer"),!0):!1}function Oc(H,C,e,V,t){return ie(H,"handleClickOn",C,e,V)||H.someProp("handleClick",r=>r(H,C,V))||(t?gc(H,e):Sc(H,e))}function yc(H,C,e,V){return ie(H,"handleDoubleClickOn",C,e,V)||H.someProp("handleDoubleClick",t=>t(H,C,V))}function kc(H,C,e,V){return ie(H,"handleTripleClickOn",C,e,V)||H.someProp("handleTripleClick",t=>t(H,C,V))||bc(H,e,V)}function bc(H,C,e){if(e.button!=0)return!1;let V=H.state.doc;if(C==-1)return V.inlineContent?(U0(H,H1.create(V,0,V.content.size),"pointer"),!0):!1;let t=V.resolve(C);for(let r=t.depth+1;r>0;r--){let i=r>t.depth?t.nodeAfter:t.node(r),o=t.before(r);if(i.inlineContent)U0(H,H1.create(V,o+1,o+1+i.content.size),"pointer");else if(K.isSelectable(i))U0(H,K.create(V,o),"pointer");else continue;return!0}}function Me(H){return T9(H)}var li=Q2?"metaKey":"ctrlKey";u2.mousedown=(H,C)=>{let e=C;H.input.shiftKey=e.shiftKey;let V=Me(H),t=Date.now(),r="singleClick";t-H.input.lastClick.time<500&&Zc(e,H.input.lastClick)&&!e[li]&&(H.input.lastClick.type=="singleClick"?r="doubleClick":H.input.lastClick.type=="doubleClick"&&(r="tripleClick")),H.input.lastClick={time:t,x:e.clientX,y:e.clientY,type:r};let i=H.posAtCoords(N9(e));i&&(r=="singleClick"?(H.input.mouseDown&&H.input.mouseDown.done(),H.input.mouseDown=new YC(H,i,e,!!V)):(r=="doubleClick"?yc:kc)(H,i.pos,i.inside,e)?e.preventDefault():x3(H,"pointer"))};var YC=class{constructor(C,e,V,t){this.view=C,this.pos=e,this.event=V,this.flushed=t,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=C.state.doc,this.selectNode=!!V[li],this.allowDefault=V.shiftKey;let r,i;if(e.inside>-1)r=C.state.doc.nodeAt(e.inside),i=e.inside;else{let s=C.state.doc.resolve(e.pos);r=s.parent,i=s.depth?s.before():0}let o=t?null:V.target,n=o?C.docView.nearestDesc(o,!0):null;this.target=n&&n.dom.nodeType==1?n.dom:null;let{selection:l}=C.state;(V.button==0&&r.type.spec.draggable&&r.type.spec.selectable!==!1||l instanceof K&&l.from<=i&&l.to>i)&&(this.mightDrag={node:r,pos:i,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&s5&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),C.root.addEventListener("mouseup",this.up=this.up.bind(this)),C.root.addEventListener("mousemove",this.move=this.move.bind(this)),x3(C,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>j5(this.view)),this.view.input.mouseDown=null}up(C){if(this.done(),!this.view.dom.contains(C.target))return;let e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(N9(C))),this.updateAllowDefault(C),this.allowDefault||!e?x3(this.view,"pointer"):Oc(this.view,e.pos,e.inside,C,this.selectNode)?C.preventDefault():C.button==0&&(this.flushed||p2&&this.mightDrag&&!this.mightDrag.node.isAtom||n2&&!this.view.state.selection.visible&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(U0(this.view,J.near(this.view.state.doc.resolve(e.pos)),"pointer"),C.preventDefault()):x3(this.view,"pointer")}move(C){this.updateAllowDefault(C),x3(this.view,"pointer"),C.buttons==0&&this.done()}updateAllowDefault(C){!this.allowDefault&&(Math.abs(this.event.x-C.clientX)>4||Math.abs(this.event.y-C.clientY)>4)&&(this.allowDefault=!0)}};u2.touchstart=H=>{H.input.lastTouch=Date.now(),Me(H),x3(H,"pointer")};u2.touchmove=H=>{H.input.lastTouch=Date.now(),x3(H,"pointer")};u2.contextmenu=H=>Me(H);function si(H,C){return H.composing?!0:p2&&Math.abs(C.timeStamp-H.input.compositionEndedAt)<500?(H.input.compositionEndedAt=-2e8,!0):!1}var wc=l5?5e3:-1;m2.compositionstart=m2.compositionupdate=H=>{if(!H.composing){H.domObserver.flush();let{state:C}=H,e=C.selection.$to;if(C.selection instanceof H1&&(C.storedMarks||!e.textOffset&&e.parentOffset&&e.nodeBefore.marks.some(V=>V.type.spec.inclusive===!1)))H.markCursor=H.state.storedMarks||e.marks(),T9(H,!0),H.markCursor=null;else if(T9(H,!C.selection.empty),s5&&C.selection.empty&&e.parentOffset&&!e.textOffset&&e.nodeBefore.marks.length){let V=H.domSelectionRange();for(let t=V.focusNode,r=V.focusOffset;t&&t.nodeType==1&&r!=0;){let i=r<0?t.lastChild:t.childNodes[r-1];if(!i)break;if(i.nodeType==3){let o=H.domSelection();o&&o.collapse(i,i.nodeValue.length);break}else t=i,r=-1}}H.input.composing=!0}Ai(H,wc)};m2.compositionend=(H,C)=>{H.composing&&(H.input.composing=!1,H.input.compositionEndedAt=C.timeStamp,H.input.compositionPendingChanges=H.domObserver.pendingRecords().length?H.input.compositionID:0,H.input.compositionNode=null,H.input.compositionPendingChanges&&Promise.resolve().then(()=>H.domObserver.flush()),H.input.compositionID++,Ai(H,20))};function Ai(H,C){clearTimeout(H.input.composingTimeout),C>-1&&(H.input.composingTimeout=setTimeout(()=>T9(H),C))}function di(H){for(H.composing&&(H.input.composing=!1,H.input.compositionEndedAt=Pc());H.input.compositionNodes.length>0;)H.input.compositionNodes.pop().markParentsDirty()}function Tc(H){let C=H.domSelectionRange();if(!C.focusNode)return null;let e=km(C.focusNode,C.focusOffset),V=bm(C.focusNode,C.focusOffset);if(e&&V&&e!=V){let t=V.pmViewDesc,r=H.domObserver.lastChangedTextNode;if(e==r||V==r)return r;if(!t||!t.isText(V.nodeValue))return V;if(H.input.compositionNode==V){let i=e.pmViewDesc;if(!(!i||!i.isText(e.nodeValue)))return V}}return e||V}function Pc(){let H=document.createEvent("Event");return H.initEvent("event",!0,!0),H.timeStamp}function T9(H,C=!1){if(!(l5&&H.domObserver.flushingSoon>=0)){if(H.domObserver.forceFlush(),di(H),C||H.docView&&H.docView.dirty){let e=te(H);return e&&!e.eq(H.state.selection)?H.dispatch(H.state.tr.setSelection(e)):(H.markCursor||C)&&!H.state.selection.empty?H.dispatch(H.state.tr.deleteSelection()):H.updateState(H.state),!0}return!1}}function Bc(H,C){if(!H.dom.parentNode)return;let e=H.dom.parentNode.appendChild(document.createElement("div"));e.appendChild(C),e.style.cssText="position: fixed; left: -10000px; top: 10px";let V=getSelection(),t=document.createRange();t.selectNodeContents(C),H.dom.blur(),V.removeAllRanges(),V.addRange(t),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e),H.focus()},50)}var W7=S2&&v3<15||G0&&Em<604;u2.copy=m2.cut=(H,C)=>{let e=C,V=H.state.selection,t=e.type=="cut";if(V.empty)return;let r=W7?null:e.clipboardData,i=V.content(),{dom:o,text:n}=Li(H,i);r?(e.preventDefault(),r.clearData(),r.setData("text/html",o.innerHTML),r.setData("text/plain",n)):Bc(H,o),t&&H.dispatch(H.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Ec(H){return H.openStart==0&&H.openEnd==0&&H.content.childCount==1?H.content.firstChild:null}function Rc(H,C){if(!H.dom.parentNode)return;let e=H.input.shiftKey||H.state.selection.$from.parent.type.spec.code,V=H.dom.parentNode.appendChild(document.createElement(e?"textarea":"div"));e||(V.contentEditable="true"),V.style.cssText="position: fixed; left: -10000px; top: 10px",V.focus();let t=H.input.shiftKey&&H.input.lastKeyCode!=45;setTimeout(()=>{H.focus(),V.parentNode&&V.parentNode.removeChild(V),e?z7(H,V.value,null,t,C):z7(H,V.textContent,V.innerHTML,t,C)},50)}function z7(H,C,e,V,t){let r=ri(H,C,e,V,H.state.selection.$from);if(H.someProp("handlePaste",n=>n(H,t,r||_.empty)))return!0;if(!r)return!1;let i=Ec(r),o=i?H.state.tr.replaceSelectionWith(i,V):H.state.tr.replaceSelection(r);return H.dispatch(o.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function pi(H){let C=H.getData("text/plain")||H.getData("Text");if(C)return C;let e=H.getData("text/uri-list");return e?e.replace(/\r?\n/g," "):""}m2.paste=(H,C)=>{let e=C;if(H.composing&&!l5)return;let V=W7?null:e.clipboardData,t=H.input.shiftKey&&H.input.lastKeyCode!=45;V&&z7(H,pi(V),V.getData("text/html"),t,e)?e.preventDefault():Rc(H,e)};var P9=class{constructor(C,e,V){this.slice=C,this.move=e,this.node=V}},ui=Q2?"altKey":"ctrlKey";u2.dragstart=(H,C)=>{let e=C,V=H.input.mouseDown;if(V&&V.done(),!e.dataTransfer)return;let t=H.state.selection,r=t.empty?null:H.posAtCoords(N9(e)),i;if(!(r&&r.pos>=t.from&&r.pos<=(t instanceof K?t.to-1:t.to))){if(V&&V.mightDrag)i=K.create(H.state.doc,V.mightDrag.pos);else if(e.target&&e.target.nodeType==1){let d=H.docView.nearestDesc(e.target,!0);d&&d.node.type.spec.draggable&&d!=H.docView&&(i=K.create(H.state.doc,d.posBefore))}}let o=(i||H.state.selection).content(),{dom:n,text:l,slice:s}=Li(H,o);(!e.dataTransfer.files.length||!n2||Gr>120)&&e.dataTransfer.clearData(),e.dataTransfer.setData(W7?"Text":"text/html",n.innerHTML),e.dataTransfer.effectAllowed="copyMove",W7||e.dataTransfer.setData("text/plain",l),H.dragging=new P9(s,!e[ui],i)};u2.dragend=H=>{let C=H.dragging;window.setTimeout(()=>{H.dragging==C&&(H.dragging=null)},50)};m2.dragover=m2.dragenter=(H,C)=>C.preventDefault();m2.drop=(H,C)=>{let e=C,V=H.dragging;if(H.dragging=null,!e.dataTransfer)return;let t=H.posAtCoords(N9(e));if(!t)return;let r=H.state.doc.resolve(t.pos),i=V&&V.slice;i?H.someProp("transformPasted",c=>{i=c(i,H)}):i=ri(H,pi(e.dataTransfer),W7?null:e.dataTransfer.getData("text/html"),!1,r);let o=!!(V&&!e[ui]);if(H.someProp("handleDrop",c=>c(H,e,i||_.empty,o))){e.preventDefault();return}if(!i)return;e.preventDefault();let n=i?v9(H.state.doc,r.pos,i):r.pos;n==null&&(n=r.pos);let l=H.state.tr;if(o){let{node:c}=V;c?c.replace(l):l.deleteSelection()}let s=l.mapping.map(n),d=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,p=l.doc;if(d?l.replaceRangeWith(s,s,i.content.firstChild):l.replaceRange(s,s,i),l.doc.eq(p))return;let m=l.doc.resolve(s);if(d&&K.isSelectable(i.content.firstChild)&&m.nodeAfter&&m.nodeAfter.sameMarkup(i.content.firstChild))l.setSelection(new K(m));else{let c=l.mapping.map(n);l.mapping.maps[l.mapping.maps.length-1].forEach((h,S,O,E)=>c=E),l.setSelection(Le(H,m,l.doc.resolve(c)))}H.focus(),H.dispatch(l.setMeta("uiEvent","drop"))};u2.focus=H=>{H.input.lastFocus=Date.now(),H.focused||(H.domObserver.stop(),H.dom.classList.add("ProseMirror-focused"),H.domObserver.start(),H.focused=!0,setTimeout(()=>{H.docView&&H.hasFocus()&&!H.domObserver.currentSelection.eq(H.domSelectionRange())&&j5(H)},20))};u2.blur=(H,C)=>{let e=C;H.focused&&(H.domObserver.stop(),H.dom.classList.remove("ProseMirror-focused"),H.domObserver.start(),e.relatedTarget&&H.dom.contains(e.relatedTarget)&&H.domObserver.currentSelection.clear(),H.focused=!1)};u2.beforeinput=(H,C)=>{if(n2&&l5&&C.inputType=="deleteContentBackward"){H.domObserver.flushSoon();let{domChangeCount:V}=H.input;setTimeout(()=>{if(H.input.domChangeCount!=V||(H.dom.blur(),H.focus(),H.someProp("handleKeyDown",r=>r(H,j3(8,"Backspace")))))return;let{$cursor:t}=H.state.selection;t&&t.pos>0&&H.dispatch(H.state.tr.delete(t.pos-1,t.pos).scrollIntoView())},50)}};for(let H in m2)u2[H]=m2[H];function U7(H,C){if(H==C)return!0;for(let e in H)if(H[e]!==C[e])return!1;for(let e in C)if(!(e in H))return!1;return!0}var B9=class H{constructor(C,e){this.toDOM=C,this.spec=e||C0,this.side=this.spec.side||0}map(C,e,V,t){let{pos:r,deleted:i}=C.mapResult(e.from+t,this.side<0?-1:1);return i?null:new J2(r-V,r-V,this)}valid(){return!0}eq(C){return this==C||C instanceof H&&(this.spec.key&&this.spec.key==C.spec.key||this.toDOM==C.toDOM&&U7(this.spec,C.spec))}destroy(C){this.spec.destroy&&this.spec.destroy(C)}},Y3=class H{constructor(C,e){this.attrs=C,this.spec=e||C0}map(C,e,V,t){let r=C.map(e.from+t,this.spec.inclusiveStart?-1:1)-V,i=C.map(e.to+t,this.spec.inclusiveEnd?1:-1)-V;return r>=i?null:new J2(r,i,this)}valid(C,e){return e.from<e.to}eq(C){return this==C||C instanceof H&&U7(this.attrs,C.attrs)&&U7(this.spec,C.spec)}static is(C){return C.type instanceof H}destroy(){}},Ce=class H{constructor(C,e){this.attrs=C,this.spec=e||C0}map(C,e,V,t){let r=C.mapResult(e.from+t,1);if(r.deleted)return null;let i=C.mapResult(e.to+t,-1);return i.deleted||i.pos<=r.pos?null:new J2(r.pos-V,i.pos-V,this)}valid(C,e){let{index:V,offset:t}=C.content.findIndex(e.from),r;return t==e.from&&!(r=C.child(V)).isText&&t+r.nodeSize==e.to}eq(C){return this==C||C instanceof H&&U7(this.attrs,C.attrs)&&U7(this.spec,C.spec)}destroy(){}},J2=class H{constructor(C,e,V){this.from=C,this.to=e,this.type=V}copy(C,e){return new H(C,e,this.type)}eq(C,e=0){return this.type.eq(C.type)&&this.from+e==C.from&&this.to+e==C.to}map(C,e,V){return this.type.map(C,this,e,V)}static widget(C,e,V){return new H(C,C,new B9(e,V))}static inline(C,e,V,t){return new H(C,e,new Y3(V,t))}static node(C,e,V,t){return new H(C,e,new Ce(V,t))}get spec(){return this.type.spec}get inline(){return this.type instanceof Y3}get widget(){return this.type instanceof B9}},z0=[],C0={},a2=class H{constructor(C,e){this.local=C.length?C:z0,this.children=e.length?e:z0}static create(C,e){return e.length?R9(e,C,0,C0):o2}find(C,e,V){let t=[];return this.findInner(C??0,e??1e9,t,0,V),t}findInner(C,e,V,t,r){for(let i=0;i<this.local.length;i++){let o=this.local[i];o.from<=e&&o.to>=C&&(!r||r(o.spec))&&V.push(o.copy(o.from+t,o.to+t))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<e&&this.children[i+1]>C){let o=this.children[i]+1;this.children[i+2].findInner(C-o,e-o,V,t+o,r)}}map(C,e,V){return this==o2||C.maps.length==0?this:this.mapInner(C,e,0,0,V||C0)}mapInner(C,e,V,t,r){let i;for(let o=0;o<this.local.length;o++){let n=this.local[o].map(C,V,t);n&&n.type.valid(e,n)?(i||(i=[])).push(n):r.onRemove&&r.onRemove(this.local[o].spec)}return this.children.length?Fc(this.children,i||[],C,e,V,t,r):i?new H(i.sort(e0),z0):o2}add(C,e){return e.length?this==o2?H.create(C,e):this.addInner(C,e,0):this}addInner(C,e,V){let t,r=0;C.forEach((o,n)=>{let l=n+V,s;if(s=ci(e,o,l)){for(t||(t=this.children.slice());r<t.length&&t[r]<n;)r+=3;t[r]==n?t[r+2]=t[r+2].addInner(o,s,l+1):t.splice(r,0,n,n+o.nodeSize,R9(s,o,l+1,C0)),r+=3}});let i=mi(r?fi(e):e,-V);for(let o=0;o<i.length;o++)i[o].type.valid(C,i[o])||i.splice(o--,1);return new H(i.length?this.local.concat(i).sort(e0):this.local,t||this.children)}remove(C){return C.length==0||this==o2?this:this.removeInner(C,0)}removeInner(C,e){let V=this.children,t=this.local;for(let r=0;r<V.length;r+=3){let i,o=V[r]+e,n=V[r+1]+e;for(let s=0,d;s<C.length;s++)(d=C[s])&&d.from>o&&d.to<n&&(C[s]=null,(i||(i=[])).push(d));if(!i)continue;V==this.children&&(V=this.children.slice());let l=V[r+2].removeInner(i,o+1);l!=o2?V[r+2]=l:(V.splice(r,3),r-=3)}if(t.length){for(let r=0,i;r<C.length;r++)if(i=C[r])for(let o=0;o<t.length;o++)t[o].eq(i,e)&&(t==this.local&&(t=this.local.slice()),t.splice(o--,1))}return V==this.children&&t==this.local?this:t.length||V.length?new H(t,V):o2}forChild(C,e){if(this==o2)return this;if(e.isLeaf)return H.empty;let V,t;for(let o=0;o<this.children.length;o+=3)if(this.children[o]>=C){this.children[o]==C&&(V=this.children[o+2]);break}let r=C+1,i=r+e.content.size;for(let o=0;o<this.local.length;o++){let n=this.local[o];if(n.from<i&&n.to>r&&n.type instanceof Y3){let l=Math.max(r,n.from)-r,s=Math.min(i,n.to)-r;l<s&&(t||(t=[])).push(n.copy(l,s))}}if(t){let o=new H(t.sort(e0),z0);return V?new E9([o,V]):o}return V||o2}eq(C){if(this==C)return!0;if(!(C instanceof H)||this.local.length!=C.local.length||this.children.length!=C.children.length)return!1;for(let e=0;e<this.local.length;e++)if(!this.local[e].eq(C.local[e]))return!1;for(let e=0;e<this.children.length;e+=3)if(this.children[e]!=C.children[e]||this.children[e+1]!=C.children[e+1]||!this.children[e+2].eq(C.children[e+2]))return!1;return!0}locals(C){return oe(this.localsInner(C))}localsInner(C){if(this==o2)return z0;if(C.inlineContent||!this.local.some(Y3.is))return this.local;let e=[];for(let V=0;V<this.local.length;V++)this.local[V].type instanceof Y3||e.push(this.local[V]);return e}forEachSet(C){C(this)}};a2.empty=new a2([],[]);a2.removeOverlap=oe;var o2=a2.empty,E9=class H{constructor(C){this.members=C}map(C,e){let V=this.members.map(t=>t.map(C,e,C0));return H.from(V)}forChild(C,e){if(e.isLeaf)return a2.empty;let V=[];for(let t=0;t<this.members.length;t++){let r=this.members[t].forChild(C,e);r!=o2&&(r instanceof H?V=V.concat(r.members):V.push(r))}return H.from(V)}eq(C){if(!(C instanceof H)||C.members.length!=this.members.length)return!1;for(let e=0;e<this.members.length;e++)if(!this.members[e].eq(C.members[e]))return!1;return!0}locals(C){let e,V=!0;for(let t=0;t<this.members.length;t++){let r=this.members[t].localsInner(C);if(r.length)if(!e)e=r;else{V&&(e=e.slice(),V=!1);for(let i=0;i<r.length;i++)e.push(r[i])}}return e?oe(V?e:e.sort(e0)):z0}static from(C){switch(C.length){case 0:return o2;case 1:return C[0];default:return new H(C.every(e=>e instanceof a2)?C:C.reduce((e,V)=>e.concat(V instanceof a2?V:V.members),[]))}}forEachSet(C){for(let e=0;e<this.members.length;e++)this.members[e].forEachSet(C)}};function Fc(H,C,e,V,t,r,i){let o=H.slice();for(let l=0,s=r;l<e.maps.length;l++){let d=0;e.maps[l].forEach((p,m,c,h)=>{let S=h-c-(m-p);for(let O=0;O<o.length;O+=3){let E=o[O+1];if(E<0||p>E+s-d)continue;let D=o[O]+s-d;m>=D?o[O+1]=p<=D?-2:-1:p>=s&&S&&(o[O]+=S,o[O+1]+=S)}d+=S}),s=e.maps[l].map(s,-1)}let n=!1;for(let l=0;l<o.length;l+=3)if(o[l+1]<0){if(o[l+1]==-2){n=!0,o[l+1]=-1;continue}let s=e.map(H[l]+r),d=s-t;if(d<0||d>=V.content.size){n=!0;continue}let p=e.map(H[l+1]+r,-1),m=p-t,{index:c,offset:h}=V.content.findIndex(d),S=V.maybeChild(c);if(S&&h==d&&h+S.nodeSize==m){let O=o[l+2].mapInner(e,S,s+1,H[l]+r+1,i);O!=o2?(o[l]=d,o[l+1]=m,o[l+2]=O):(o[l+1]=-2,n=!0)}else n=!0}if(n){let l=Dc(o,H,C,e,t,r,i),s=R9(l,V,0,i);C=s.local;for(let d=0;d<o.length;d+=3)o[d+1]<0&&(o.splice(d,3),d-=3);for(let d=0,p=0;d<s.children.length;d+=3){let m=s.children[d];for(;p<o.length&&o[p]<m;)p+=3;o.splice(p,0,s.children[d],s.children[d+1],s.children[d+2])}}return new a2(C.sort(e0),o)}function mi(H,C){if(!C||!H.length)return H;let e=[];for(let V=0;V<H.length;V++){let t=H[V];e.push(new J2(t.from+C,t.to+C,t.type))}return e}function Dc(H,C,e,V,t,r,i){function o(n,l){for(let s=0;s<n.local.length;s++){let d=n.local[s].map(V,t,l);d?e.push(d):i.onRemove&&i.onRemove(n.local[s].spec)}for(let s=0;s<n.children.length;s+=3)o(n.children[s+2],n.children[s]+l+1)}for(let n=0;n<H.length;n+=3)H[n+1]==-1&&o(H[n+2],C[n]+r+1);return e}function ci(H,C,e){if(C.isLeaf)return null;let V=e+C.nodeSize,t=null;for(let r=0,i;r<H.length;r++)(i=H[r])&&i.from>e&&i.to<V&&((t||(t=[])).push(i),H[r]=null);return t}function fi(H){let C=[];for(let e=0;e<H.length;e++)H[e]!=null&&C.push(H[e]);return C}function R9(H,C,e,V){let t=[],r=!1;C.forEach((o,n)=>{let l=ci(H,o,n+e);if(l){r=!0;let s=R9(l,o,e+n+1,V);s!=o2&&t.push(n,n+o.nodeSize,s)}});let i=mi(r?fi(H):H,-e).sort(e0);for(let o=0;o<i.length;o++)i[o].type.valid(C,i[o])||(V.onRemove&&V.onRemove(i[o].spec),i.splice(o--,1));return i.length||t.length?new a2(i,t):o2}function e0(H,C){return H.from-C.from||H.to-C.to}function oe(H){let C=H;for(let e=0;e<C.length-1;e++){let V=C[e];if(V.from!=V.to)for(let t=e+1;t<C.length;t++){let r=C[t];if(r.from==V.from){r.to!=V.to&&(C==H&&(C=H.slice()),C[t]=r.copy(r.from,V.to),Pr(C,t+1,r.copy(V.to,r.to)));continue}else{r.from<V.to&&(C==H&&(C=H.slice()),C[e]=V.copy(V.from,r.from),Pr(C,t,V.copy(r.from,V.to)));break}}}return C}function Pr(H,C,e){for(;C<H.length&&e0(e,H[C])>0;)C++;H.splice(C,0,e)}function FC(H){let C=[];return H.someProp("decorations",e=>{let V=e(H.state);V&&V!=o2&&C.push(V)}),H.cursorWrapper&&C.push(a2.create(H.state.doc,[H.cursorWrapper.deco])),E9.from(C)}var Nc={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Ic=S2&&v3<=11,ee=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(C){this.anchorNode=C.anchorNode,this.anchorOffset=C.anchorOffset,this.focusNode=C.focusNode,this.focusOffset=C.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(C){return C.anchorNode==this.anchorNode&&C.anchorOffset==this.anchorOffset&&C.focusNode==this.focusNode&&C.focusOffset==this.focusOffset}},He=class{constructor(C,e){this.view=C,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new ee,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(V=>{for(let t=0;t<V.length;t++)this.queue.push(V[t]);S2&&v3<=11&&V.some(t=>t.type=="childList"&&t.removedNodes.length||t.type=="characterData"&&t.oldValue.length>t.target.nodeValue.length)?this.flushSoon():this.flush()}),Ic&&(this.onCharData=V=>{this.queue.push({target:V.target,type:"characterData",oldValue:V.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,Nc)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let C=this.observer.takeRecords();if(C.length){for(let e=0;e<C.length;e++)this.queue.push(C[e]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Sr(this.view)){if(this.suppressingSelectionUpdates)return j5(this.view);if(S2&&v3<=11&&!this.view.state.selection.empty){let C=this.view.domSelectionRange();if(C.focusNode&&H0(C.focusNode,C.focusOffset,C.anchorNode,C.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(C){if(!C.focusNode)return!0;let e=new Set,V;for(let r=C.focusNode;r;r=_7(r))e.add(r);for(let r=C.anchorNode;r;r=_7(r))if(e.has(r)){V=r;break}let t=V&&this.view.docView.nearestDesc(V);if(t&&t.ignoreMutation({type:"selection",target:V.nodeType==3?V.parentNode:V}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let C of this.observer.takeRecords())this.queue.push(C);return this.queue}flush(){let{view:C}=this;if(!C.docView||this.flushingSoon>-1)return;let e=this.pendingRecords();e.length&&(this.queue=[]);let V=C.domSelectionRange(),t=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(V)&&Sr(C)&&!this.ignoreSelectionChange(V),r=-1,i=-1,o=!1,n=[];if(C.editable)for(let s=0;s<e.length;s++){let d=this.registerMutation(e[s],n);d&&(r=r<0?d.from:Math.min(d.from,r),i=i<0?d.to:Math.max(d.to,i),d.typeOver&&(o=!0))}if(s5&&n.length){let s=n.filter(d=>d.nodeName=="BR");if(s.length==2){let[d,p]=s;d.parentNode&&d.parentNode.parentNode==p.parentNode?p.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let p of s){let m=p.parentNode;m&&m.nodeName=="LI"&&(!d||zc(C,d)!=m)&&p.remove()}}}let l=null;r<0&&t&&C.input.lastFocus>Date.now()-200&&Math.max(C.input.lastTouch,C.input.lastClick.time)<Date.now()-300&&D9(V)&&(l=te(C))&&l.eq(J.near(C.state.doc.resolve(0),1))?(C.input.lastFocus=0,j5(C),this.currentSelection.set(V),C.scrollToSelection()):(r>-1||t)&&(r>-1&&(C.docView.markDirty(r,i),_c(C)),this.handleDOMChange(r,i,o,n),C.docView&&C.docView.dirty?C.updateState(C.state):this.currentSelection.eq(V)||j5(C),this.currentSelection.set(V))}registerMutation(C,e){if(e.indexOf(C.target)>-1)return null;let V=this.view.docView.nearestDesc(C.target);if(C.type=="attributes"&&(V==this.view.docView||C.attributeName=="contenteditable"||C.attributeName=="style"&&!C.oldValue&&!C.target.getAttribute("style"))||!V||V.ignoreMutation(C))return null;if(C.type=="childList"){for(let s=0;s<C.addedNodes.length;s++){let d=C.addedNodes[s];e.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(V.contentDOM&&V.contentDOM!=V.dom&&!V.contentDOM.contains(C.target))return{from:V.posBefore,to:V.posAfter};let t=C.previousSibling,r=C.nextSibling;if(S2&&v3<=11&&C.addedNodes.length)for(let s=0;s<C.addedNodes.length;s++){let{previousSibling:d,nextSibling:p}=C.addedNodes[s];(!d||Array.prototype.indexOf.call(C.addedNodes,d)<0)&&(t=d),(!p||Array.prototype.indexOf.call(C.addedNodes,p)<0)&&(r=p)}let i=t&&t.parentNode==C.target?H2(t)+1:0,o=V.localPosFromDOM(C.target,i,-1),n=r&&r.parentNode==C.target?H2(r):C.target.childNodes.length,l=V.localPosFromDOM(C.target,n,1);return{from:o,to:l}}else return C.type=="attributes"?{from:V.posAtStart-V.border,to:V.posAtEnd+V.border}:(this.lastChangedTextNode=C.target,{from:V.posAtStart,to:V.posAtEnd,typeOver:C.target.nodeValue==C.oldValue})}},Br=new WeakMap,Er=!1;function _c(H){if(!Br.has(H)&&(Br.set(H,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(H.dom).whiteSpace)!==-1)){if(H.requiresGeckoHackNode=s5,Er)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Er=!0}}function Rr(H,C){let e=C.startContainer,V=C.startOffset,t=C.endContainer,r=C.endOffset,i=H.domAtPos(H.state.selection.anchor);return H0(i.node,i.offset,t,r)&&([e,V,t,r]=[t,r,e,V]),{anchorNode:e,anchorOffset:V,focusNode:t,focusOffset:r}}function Wc(H,C){if(C.getComposedRanges){let t=C.getComposedRanges(H.root)[0];if(t)return Rr(H,t)}let e;function V(t){t.preventDefault(),t.stopImmediatePropagation(),e=t.getTargetRanges()[0]}return H.dom.addEventListener("beforeinput",V,!0),document.execCommand("indent"),H.dom.removeEventListener("beforeinput",V,!0),e?Rr(H,e):null}function zc(H,C){for(let e=C.parentNode;e&&e!=H.dom;e=e.parentNode){let V=H.docView.nearestDesc(e,!0);if(V&&V.node.isBlock)return e}return null}function Uc(H,C,e){let{node:V,fromOffset:t,toOffset:r,from:i,to:o}=H.docView.parseRange(C,e),n=H.domSelectionRange(),l,s=n.anchorNode;if(s&&H.dom.contains(s.nodeType==1?s:s.parentNode)&&(l=[{node:s,offset:n.anchorOffset}],D9(n)||l.push({node:n.focusNode,offset:n.focusOffset})),n2&&H.input.lastKeyCode===8)for(let S=r;S>t;S--){let O=V.childNodes[S-1],E=O.pmViewDesc;if(O.nodeName=="BR"&&!E){r=S;break}if(!E||E.size)break}let d=H.state.doc,p=H.someProp("domParser")||h5.fromSchema(H.state.schema),m=d.resolve(i),c=null,h=p.parse(V,{topNode:m.parent,topMatch:m.parent.contentMatchAt(m.index()),topOpen:!0,from:t,to:r,preserveWhitespace:m.parent.type.whitespace=="pre"?"full":!0,findPositions:l,ruleFromNode:Gc,context:m});if(l&&l[0].pos!=null){let S=l[0].pos,O=l[1]&&l[1].pos;O==null&&(O=S),c={anchor:S+i,head:O+i}}return{doc:h,sel:c,from:i,to:o}}function Gc(H){let C=H.pmViewDesc;if(C)return C.parseRule();if(H.nodeName=="BR"&&H.parentNode){if(p2&&/^(ul|ol)$/i.test(H.parentNode.nodeName)){let e=document.createElement("div");return e.appendChild(document.createElement("li")),{skip:e}}else if(H.parentNode.lastChild==H||p2&&/^(tr|table)$/i.test(H.parentNode.nodeName))return{ignore:!0}}else if(H.nodeName=="IMG"&&H.getAttribute("mark-placeholder"))return{ignore:!0};return null}var $c=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Kc(H,C,e,V,t){let r=H.input.compositionPendingChanges||(H.composing?H.input.compositionID:0);if(H.input.compositionPendingChanges=0,C<0){let $=H.input.lastSelectionTime>Date.now()-50?H.input.lastSelectionOrigin:null,a1=te(H,$);if(a1&&!H.state.selection.eq(a1)){if(n2&&l5&&H.input.lastKeyCode===13&&Date.now()-100<H.input.lastKeyCodeTime&&H.someProp("handleKeyDown",T1=>T1(H,j3(13,"Enter"))))return;let m1=H.state.tr.setSelection(a1);$=="pointer"?m1.setMeta("pointer",!0):$=="key"&&m1.scrollIntoView(),r&&m1.setMeta("composition",r),H.dispatch(m1)}return}let i=H.state.doc.resolve(C),o=i.sharedDepth(e);C=i.before(o+1),e=H.state.doc.resolve(e).after(o+1);let n=H.state.selection,l=Uc(H,C,e),s=H.state.doc,d=s.slice(l.from,l.to),p,m;H.input.lastKeyCode===8&&Date.now()-100<H.input.lastKeyCodeTime?(p=H.state.selection.to,m="end"):(p=H.state.selection.from,m="start"),H.input.lastKeyCode=null;let c=jc(d.content,l.doc.content,l.from,p,m);if(c&&H.input.domChangeCount++,(G0&&H.input.lastIOSEnter>Date.now()-225||l5)&&t.some($=>$.nodeType==1&&!$c.test($.nodeName))&&(!c||c.endA>=c.endB)&&H.someProp("handleKeyDown",$=>$(H,j3(13,"Enter")))){H.input.lastIOSEnter=0;return}if(!c)if(V&&n instanceof H1&&!n.empty&&n.$head.sameParent(n.$anchor)&&!H.composing&&!(l.sel&&l.sel.anchor!=l.sel.head))c={start:n.from,endA:n.to,endB:n.to};else{if(l.sel){let $=Fr(H,H.state.doc,l.sel);if($&&!$.eq(H.state.selection)){let a1=H.state.tr.setSelection($);r&&a1.setMeta("composition",r),H.dispatch(a1)}}return}H.state.selection.from<H.state.selection.to&&c.start==c.endB&&H.state.selection instanceof H1&&(c.start>H.state.selection.from&&c.start<=H.state.selection.from+2&&H.state.selection.from>=l.from?c.start=H.state.selection.from:c.endA<H.state.selection.to&&c.endA>=H.state.selection.to-2&&H.state.selection.to<=l.to&&(c.endB+=H.state.selection.to-c.endA,c.endA=H.state.selection.to)),S2&&v3<=11&&c.endB==c.start+1&&c.endA==c.start&&c.start>l.from&&l.doc.textBetween(c.start-l.from-1,c.start-l.from+1)==" \xA0"&&(c.start--,c.endA--,c.endB--);let h=l.doc.resolveNoCache(c.start-l.from),S=l.doc.resolveNoCache(c.endB-l.from),O=s.resolve(c.start),E=h.sameParent(S)&&h.parent.inlineContent&&O.end()>=c.endA,D;if((G0&&H.input.lastIOSEnter>Date.now()-225&&(!E||t.some($=>$.nodeName=="DIV"||$.nodeName=="P"))||!E&&h.pos<l.doc.content.size&&!h.sameParent(S)&&(D=J.findFrom(l.doc.resolve(h.pos+1),1,!0))&&D.head==S.pos)&&H.someProp("handleKeyDown",$=>$(H,j3(13,"Enter")))){H.input.lastIOSEnter=0;return}if(H.state.selection.anchor>c.start&&qc(s,c.start,c.endA,h,S)&&H.someProp("handleKeyDown",$=>$(H,j3(8,"Backspace")))){l5&&n2&&H.domObserver.suppressSelectionUpdates();return}n2&&l5&&c.endB==c.start&&(H.input.lastAndroidDelete=Date.now()),l5&&!E&&h.start()!=S.start()&&S.parentOffset==0&&h.depth==S.depth&&l.sel&&l.sel.anchor==l.sel.head&&l.sel.head==c.endA&&(c.endB-=2,S=l.doc.resolveNoCache(c.endB-l.from),setTimeout(()=>{H.someProp("handleKeyDown",function($){return $(H,j3(13,"Enter"))})},20));let N=c.start,R=c.endA,W,X,i1;if(E){if(h.pos==S.pos)S2&&v3<=11&&h.parentOffset==0&&(H.domObserver.suppressSelectionUpdates(),setTimeout(()=>j5(H),20)),W=H.state.tr.delete(N,R),X=s.resolve(c.start).marksAcross(s.resolve(c.endA));else if(c.endA==c.endB&&(i1=Qc(h.parent.content.cut(h.parentOffset,S.parentOffset),O.parent.content.cut(O.parentOffset,c.endA-O.start()))))W=H.state.tr,i1.type=="add"?W.addMark(N,R,i1.mark):W.removeMark(N,R,i1.mark);else if(h.parent.child(h.index()).isText&&h.index()==S.index()-(S.textOffset?0:1)){let $=h.parent.textBetween(h.parentOffset,S.parentOffset);if(H.someProp("handleTextInput",a1=>a1(H,N,R,$)))return;W=H.state.tr.insertText($,N,R)}}if(W||(W=H.state.tr.replace(N,R,l.doc.slice(c.start-l.from,c.endB-l.from))),l.sel){let $=Fr(H,W.doc,l.sel);$&&!(n2&&l5&&H.composing&&$.empty&&(c.start!=c.endB||H.input.lastAndroidDelete<Date.now()-100)&&($.head==N||$.head==W.mapping.map(R)-1)||S2&&$.empty&&$.head==N)&&W.setSelection($)}X&&W.ensureMarks(X),r&&W.setMeta("composition",r),H.dispatch(W.scrollIntoView())}function Fr(H,C,e){return Math.max(e.anchor,e.head)>C.content.size?null:Le(H,C.resolve(e.anchor),C.resolve(e.head))}function Qc(H,C){let e=H.firstChild.marks,V=C.firstChild.marks,t=e,r=V,i,o,n;for(let s=0;s<V.length;s++)t=V[s].removeFromSet(t);for(let s=0;s<e.length;s++)r=e[s].removeFromSet(r);if(t.length==1&&r.length==0)o=t[0],i="add",n=s=>s.mark(o.addToSet(s.marks));else if(t.length==0&&r.length==1)o=r[0],i="remove",n=s=>s.mark(o.removeFromSet(s.marks));else return null;let l=[];for(let s=0;s<C.childCount;s++)l.push(n(C.child(s)));if(B.from(l).eq(H))return{mark:o,type:i}}function qc(H,C,e,V,t){if(e-C<=t.pos-V.pos||DC(V,!0,!1)<t.pos)return!1;let r=H.resolve(C);if(!V.parent.isTextblock){let o=r.nodeAfter;return o!=null&&e==C+o.nodeSize}if(r.parentOffset<r.parent.content.size||!r.parent.isTextblock)return!1;let i=H.resolve(DC(r,!0,!0));return!i.parent.isTextblock||i.pos>e||DC(i,!0,!1)<e?!1:V.parent.content.cut(V.parentOffset).eq(i.parent.content)}function DC(H,C,e){let V=H.depth,t=C?H.end():H.pos;for(;V>0&&(C||H.indexAfter(V)==H.node(V).childCount);)V--,t++,C=!1;if(e){let r=H.node(V).maybeChild(H.indexAfter(V));for(;r&&!r.isLeaf;)r=r.firstChild,t++}return t}function jc(H,C,e,V,t){let r=H.findDiffStart(C,e);if(r==null)return null;let{a:i,b:o}=H.findDiffEnd(C,e+H.size,e+C.size);if(t=="end"){let n=Math.max(0,r-Math.min(i,o));V-=i+n-r}if(i<r&&H.size<C.size){let n=V<=r&&V>=i?r-V:0;r-=n,r&&r<C.size&&Dr(C.textBetween(r-1,r+1))&&(r+=n?1:-1),o=r+(o-i),i=r}else if(o<r){let n=V<=r&&V>=o?r-V:0;r-=n,r&&r<H.size&&Dr(H.textBetween(r-1,r+1))&&(r+=n?1:-1),i=r+(i-o),o=r}return{start:r,endA:i,endB:o}}function Dr(H){if(H.length!=2)return!1;let C=H.charCodeAt(0),e=H.charCodeAt(1);return C>=56320&&C<=57343&&e>=55296&&e<=56319}var F9=class{constructor(C,e){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new JC,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(zr),this.dispatch=this.dispatch.bind(this),this.dom=C&&C.mount||document.createElement("div"),C&&(C.appendChild?C.appendChild(this.dom):typeof C=="function"?C(this.dom):C.mount&&(this.mounted=!0)),this.editable=_r(this),Ir(this),this.nodeViews=Wr(this),this.docView=cr(this.state.doc,Nr(this),FC(this),this.dom,this),this.domObserver=new He(this,(V,t,r,i)=>Kc(this,V,t,r,i)),this.domObserver.start(),fc(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let C=this._props;this._props={};for(let e in C)this._props[e]=C[e];this._props.state=this.state}return this._props}update(C){C.handleDOMEvents!=this._props.handleDOMEvents&&XC(this);let e=this._props;this._props=C,C.plugins&&(C.plugins.forEach(zr),this.directPlugins=C.plugins),this.updateStateInner(C.state,e)}setProps(C){let e={};for(let V in this._props)e[V]=this._props[V];e.state=this.state;for(let V in C)e[V]=C[V];this.update(e)}updateState(C){this.updateStateInner(C,this._props)}updateStateInner(C,e){var V;let t=this.state,r=!1,i=!1;C.storedMarks&&this.composing&&(di(this),i=!0),this.state=C;let o=t.plugins!=C.plugins||this._props.plugins!=e.plugins;if(o||this._props.plugins!=e.plugins||this._props.nodeViews!=e.nodeViews){let m=Wr(this);Xc(m,this.nodeViews)&&(this.nodeViews=m,r=!0)}(o||e.handleDOMEvents!=this._props.handleDOMEvents)&&XC(this),this.editable=_r(this),Ir(this);let n=FC(this),l=Nr(this),s=t.plugins!=C.plugins&&!t.doc.eq(C.doc)?"reset":C.scrollToSelection>t.scrollToSelection?"to selection":"preserve",d=r||!this.docView.matchesNode(C.doc,l,n);(d||!C.selection.eq(t.selection))&&(i=!0);let p=s=="preserve"&&i&&this.dom.style.overflowAnchor==null&&Dm(this);if(i){this.domObserver.stop();let m=d&&(S2||n2)&&!this.composing&&!t.selection.empty&&!C.selection.empty&&Jc(t.selection,C.selection);if(d){let c=n2?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Tc(this)),(r||!this.docView.update(C.doc,l,n,this))&&(this.docView.updateOuterDeco(l),this.docView.destroy(),this.docView=cr(C.doc,l,n,this.dom,this)),c&&!this.trackWrites&&(m=!0)}m||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&Lc(this))?j5(this,m):(Hi(this,C.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(t),!((V=this.dragging)===null||V===void 0)&&V.node&&!t.doc.eq(C.doc)&&this.updateDraggedNode(this.dragging,t),s=="reset"?this.dom.scrollTop=0:s=="to selection"?this.scrollToSelection():p&&Nm(p)}scrollToSelection(){let C=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",e=>e(this)))if(this.state.selection instanceof K){let e=this.docView.domAfterPos(this.state.selection.from);e.nodeType==1&&sr(this,e.getBoundingClientRect(),C)}else sr(this,this.coordsAtPos(this.state.selection.head,1),C)}destroyPluginViews(){let C;for(;C=this.pluginViews.pop();)C.destroy&&C.destroy()}updatePluginViews(C){if(!C||C.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let e=0;e<this.directPlugins.length;e++){let V=this.directPlugins[e];V.spec.view&&this.pluginViews.push(V.spec.view(this))}for(let e=0;e<this.state.plugins.length;e++){let V=this.state.plugins[e];V.spec.view&&this.pluginViews.push(V.spec.view(this))}}else for(let e=0;e<this.pluginViews.length;e++){let V=this.pluginViews[e];V.update&&V.update(this,C)}}updateDraggedNode(C,e){let V=C.node,t=-1;if(this.state.doc.nodeAt(V.from)==V.node)t=V.from;else{let r=V.from+(this.state.doc.content.size-e.doc.content.size);(r>0&&this.state.doc.nodeAt(r))==V.node&&(t=r)}this.dragging=new P9(C.slice,C.move,t<0?void 0:K.create(this.state.doc,t))}someProp(C,e){let V=this._props&&this._props[C],t;if(V!=null&&(t=e?e(V):V))return t;for(let i=0;i<this.directPlugins.length;i++){let o=this.directPlugins[i].props[C];if(o!=null&&(t=e?e(o):o))return t}let r=this.state.plugins;if(r)for(let i=0;i<r.length;i++){let o=r[i].props[C];if(o!=null&&(t=e?e(o):o))return t}}hasFocus(){if(S2){let C=this.root.activeElement;if(C==this.dom)return!0;if(!C||!this.dom.contains(C))return!1;for(;C&&this.dom!=C&&this.dom.contains(C);){if(C.contentEditable=="false")return!1;C=C.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&Im(this.dom),j5(this),this.domObserver.start()}get root(){let C=this._root;if(C==null){for(let e=this.dom.parentNode;e;e=e.parentNode)if(e.nodeType==9||e.nodeType==11&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=()=>e.ownerDocument.getSelection()),this._root=e}return C||document}updateRoot(){this._root=null}posAtCoords(C){return Gm(this,C)}coordsAtPos(C,e=1){return jr(this,C,e)}domAtPos(C,e=0){return this.docView.domFromPos(C,e)}nodeDOM(C){let e=this.docView.descAt(C);return e?e.nodeDOM:null}posAtDOM(C,e,V=-1){let t=this.docView.posFromDOM(C,e,V);if(t==null)throw new RangeError("DOM position not inside the editor");return t}endOfTextblock(C,e){return jm(this,e||this.state,C)}pasteHTML(C,e){return z7(this,"",C,!1,e||new ClipboardEvent("paste"))}pasteText(C,e){return z7(this,C,null,!0,e||new ClipboardEvent("paste"))}destroy(){this.docView&&(xc(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],FC(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Om())}get isDestroyed(){return this.docView==null}dispatchEvent(C){return hc(this,C)}dispatch(C){let e=this._props.dispatchTransaction;e?e.call(this,C):this.updateState(this.state.apply(C))}domSelectionRange(){let C=this.domSelection();return C?p2&&this.root.nodeType===11&&Tm(this.dom.ownerDocument)==this.dom&&Wc(this,C)||C:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}};function Nr(H){let C=Object.create(null);return C.class="ProseMirror",C.contenteditable=String(H.editable),H.someProp("attributes",e=>{if(typeof e=="function"&&(e=e(H.state)),e)for(let V in e)V=="class"?C.class+=" "+e[V]:V=="style"?C.style=(C.style?C.style+";":"")+e[V]:!C[V]&&V!="contenteditable"&&V!="nodeName"&&(C[V]=String(e[V]))}),C.translate||(C.translate="no"),[J2.node(0,H.state.doc.content.size,C)]}function Ir(H){if(H.markCursor){let C=document.createElement("img");C.className="ProseMirror-separator",C.setAttribute("mark-placeholder","true"),C.setAttribute("alt",""),H.cursorWrapper={dom:C,deco:J2.widget(H.state.selection.from,C,{raw:!0,marks:H.markCursor})}}else H.cursorWrapper=null}function _r(H){return!H.someProp("editable",C=>C(H.state)===!1)}function Jc(H,C){let e=Math.min(H.$anchor.sharedDepth(H.head),C.$anchor.sharedDepth(C.head));return H.$anchor.start(e)!=C.$anchor.start(e)}function Wr(H){let C=Object.create(null);function e(V){for(let t in V)Object.prototype.hasOwnProperty.call(C,t)||(C[t]=V[t])}return H.someProp("nodeViews",e),H.someProp("markViews",e),C}function Xc(H,C){let e=0,V=0;for(let t in H){if(H[t]!=C[t])return!0;e++}for(let t in C)V++;return e!=V}function zr(H){if(H.spec.state||H.spec.filterTransaction||H.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var J5={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},_9={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Yc=typeof navigator<"u"&&/Mac/.test(navigator.platform),Cf=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(R1=0;R1<10;R1++)J5[48+R1]=J5[96+R1]=String(R1);var R1;for(R1=1;R1<=24;R1++)J5[R1+111]="F"+R1;var R1;for(R1=65;R1<=90;R1++)J5[R1]=String.fromCharCode(R1+32),_9[R1]=String.fromCharCode(R1);var R1;for(I9 in J5)_9.hasOwnProperty(I9)||(_9[I9]=J5[I9]);var I9;function xi(H){var C=Yc&&H.metaKey&&H.shiftKey&&!H.ctrlKey&&!H.altKey||Cf&&H.shiftKey&&H.key&&H.key.length==1||H.key=="Unidentified",e=!C&&H.key||(H.shiftKey?_9:J5)[H.keyCode]||H.key||"Unidentified";return e=="Esc"&&(e="Escape"),e=="Del"&&(e="Delete"),e=="Left"&&(e="ArrowLeft"),e=="Up"&&(e="ArrowUp"),e=="Right"&&(e="ArrowRight"),e=="Down"&&(e="ArrowDown"),e}var ef=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function Hf(H){let C=H.split(/-(?!$)/),e=C[C.length-1];e=="Space"&&(e=" ");let V,t,r,i;for(let o=0;o<C.length-1;o++){let n=C[o];if(/^(cmd|meta|m)$/i.test(n))i=!0;else if(/^a(lt)?$/i.test(n))V=!0;else if(/^(c|ctrl|control)$/i.test(n))t=!0;else if(/^s(hift)?$/i.test(n))r=!0;else if(/^mod$/i.test(n))ef?i=!0:t=!0;else throw new Error("Unrecognized modifier name: "+n)}return V&&(e="Alt-"+e),t&&(e="Ctrl-"+e),i&&(e="Meta-"+e),r&&(e="Shift-"+e),e}function Vf(H){let C=Object.create(null);for(let e in H)C[Hf(e)]=H[e];return C}function ne(H,C,e=!0){return C.altKey&&(H="Alt-"+H),C.ctrlKey&&(H="Ctrl-"+H),C.metaKey&&(H="Meta-"+H),e&&C.shiftKey&&(H="Shift-"+H),H}function vi(H){return new f1({props:{handleKeyDown:ae(H)}})}function ae(H){let C=Vf(H);return function(e,V){let t=xi(V),r,i=C[ne(t,V)];if(i&&i(e.state,e.dispatch,e))return!0;if(t.length==1&&t!=" "){if(V.shiftKey){let o=C[ne(t,V,!1)];if(o&&o(e.state,e.dispatch,e))return!0}if((V.shiftKey||V.altKey||V.metaKey||t.charCodeAt(0)>127)&&(r=J5[V.keyCode])&&r!=t){let o=C[ne(r,V)];if(o&&o(e.state,e.dispatch,e))return!0}}return!1}}var W9=(H,C)=>H.selection.empty?!1:(C&&C(H.tr.deleteSelection().scrollIntoView()),!0);function Zi(H,C){let{$cursor:e}=H.selection;return!e||(C?!C.endOfTextblock("backward",H):e.parentOffset>0)?null:e}var se=(H,C,e)=>{let V=Zi(H,e);if(!V)return!1;let t=de(V);if(!t){let i=V.blockRange(),o=i&&K5(i);return o==null?!1:(C&&C(H.tr.lift(i,o).scrollIntoView()),!0)}let r=t.nodeBefore;if(Pi(H,t,C,-1))return!0;if(V.parent.content.size==0&&(K0(r,"end")||K.isSelectable(r)))for(let i=V.depth;;i--){let o=R7(H.doc,V.before(i),V.after(i),_.empty);if(o&&o.slice.size<o.to-o.from){if(C){let n=H.tr.step(o);n.setSelection(K0(r,"end")?J.findFrom(n.doc.resolve(n.mapping.map(t.pos,-1)),-1):K.create(n.doc,t.pos-r.nodeSize)),C(n.scrollIntoView())}return!0}if(i==1||V.node(i-1).childCount>1)break}return r.isAtom&&t.depth==V.depth-1?(C&&C(H.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!1},Si=(H,C,e)=>{let V=Zi(H,e);if(!V)return!1;let t=de(V);return t?Oi(H,t,C):!1},gi=(H,C,e)=>{let V=yi(H,e);if(!V)return!1;let t=me(V);return t?Oi(H,t,C):!1};function Oi(H,C,e){let V=C.nodeBefore,t=V,r=C.pos-1;for(;!t.isTextblock;r--){if(t.type.spec.isolating)return!1;let s=t.lastChild;if(!s)return!1;t=s}let i=C.nodeAfter,o=i,n=C.pos+1;for(;!o.isTextblock;n++){if(o.type.spec.isolating)return!1;let s=o.firstChild;if(!s)return!1;o=s}let l=R7(H.doc,r,n,_.empty);if(!l||l.from!=r||l instanceof M2&&l.slice.size>=n-r)return!1;if(e){let s=H.tr.step(l);s.setSelection(H1.create(s.doc,r)),e(s.scrollIntoView())}return!0}function K0(H,C,e=!1){for(let V=H;V;V=C=="start"?V.firstChild:V.lastChild){if(V.isTextblock)return!0;if(e&&V.childCount!=1)return!1}return!1}var Ae=(H,C,e)=>{let{$head:V,empty:t}=H.selection,r=V;if(!t)return!1;if(V.parent.isTextblock){if(e?!e.endOfTextblock("backward",H):V.parentOffset>0)return!1;r=de(V)}let i=r&&r.nodeBefore;return!i||!K.isSelectable(i)?!1:(C&&C(H.tr.setSelection(K.create(H.doc,r.pos-i.nodeSize)).scrollIntoView()),!0)};function de(H){if(!H.parent.type.spec.isolating)for(let C=H.depth-1;C>=0;C--){if(H.index(C)>0)return H.doc.resolve(H.before(C+1));if(H.node(C).type.spec.isolating)break}return null}function yi(H,C){let{$cursor:e}=H.selection;return!e||(C?!C.endOfTextblock("forward",H):e.parentOffset<e.parent.content.size)?null:e}var pe=(H,C,e)=>{let V=yi(H,e);if(!V)return!1;let t=me(V);if(!t)return!1;let r=t.nodeAfter;if(Pi(H,t,C,1))return!0;if(V.parent.content.size==0&&(K0(r,"start")||K.isSelectable(r))){let i=R7(H.doc,V.before(),V.after(),_.empty);if(i&&i.slice.size<i.to-i.from){if(C){let o=H.tr.step(i);o.setSelection(K0(r,"start")?J.findFrom(o.doc.resolve(o.mapping.map(t.pos)),1):K.create(o.doc,o.mapping.map(t.pos))),C(o.scrollIntoView())}return!0}}return r.isAtom&&t.depth==V.depth-1?(C&&C(H.tr.delete(t.pos,t.pos+r.nodeSize).scrollIntoView()),!0):!1},ue=(H,C,e)=>{let{$head:V,empty:t}=H.selection,r=V;if(!t)return!1;if(V.parent.isTextblock){if(e?!e.endOfTextblock("forward",H):V.parentOffset<V.parent.content.size)return!1;r=me(V)}let i=r&&r.nodeAfter;return!i||!K.isSelectable(i)?!1:(C&&C(H.tr.setSelection(K.create(H.doc,r.pos)).scrollIntoView()),!0)};function me(H){if(!H.parent.type.spec.isolating)for(let C=H.depth-1;C>=0;C--){let e=H.node(C);if(H.index(C)+1<e.childCount)return H.doc.resolve(H.after(C+1));if(e.type.spec.isolating)break}return null}var ki=(H,C)=>{let e=H.selection,V=e instanceof K,t;if(V){if(e.node.isTextblock||!a5(H.doc,e.from))return!1;t=e.from}else if(t=N0(H.doc,e.from,-1),t==null)return!1;if(C){let r=H.tr.join(t);V&&r.setSelection(K.create(r.doc,t-H.doc.resolve(t).nodeBefore.nodeSize)),C(r.scrollIntoView())}return!0},bi=(H,C)=>{let e=H.selection,V;if(e instanceof K){if(e.node.isTextblock||!a5(H.doc,e.to))return!1;V=e.to}else if(V=N0(H.doc,e.to,1),V==null)return!1;return C&&C(H.tr.join(V).scrollIntoView()),!0},wi=(H,C)=>{let{$from:e,$to:V}=H.selection,t=e.blockRange(V),r=t&&K5(t);return r==null?!1:(C&&C(H.tr.lift(t,r).scrollIntoView()),!0)},ce=(H,C)=>{let{$head:e,$anchor:V}=H.selection;return!e.parent.type.spec.code||!e.sameParent(V)?!1:(C&&C(H.tr.insertText(`
`).scrollIntoView()),!0)};function fe(H){for(let C=0;C<H.edgeCount;C++){let{type:e}=H.edge(C);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}var xe=(H,C)=>{let{$head:e,$anchor:V}=H.selection;if(!e.parent.type.spec.code||!e.sameParent(V))return!1;let t=e.node(-1),r=e.indexAfter(-1),i=fe(t.contentMatchAt(r));if(!i||!t.canReplaceWith(r,r,i))return!1;if(C){let o=e.after(),n=H.tr.replaceWith(o,o,i.createAndFill());n.setSelection(J.near(n.doc.resolve(o),1)),C(n.scrollIntoView())}return!0},ve=(H,C)=>{let e=H.selection,{$from:V,$to:t}=e;if(e instanceof D2||V.parent.inlineContent||t.parent.inlineContent)return!1;let r=fe(t.parent.contentMatchAt(t.indexAfter()));if(!r||!r.isTextblock)return!1;if(C){let i=(!V.parentOffset&&t.index()<t.parent.childCount?V:t).pos,o=H.tr.insert(i,r.createAndFill());o.setSelection(H1.create(o.doc,i+1)),C(o.scrollIntoView())}return!0},he=(H,C)=>{let{$cursor:e}=H.selection;if(!e||e.parent.content.size)return!1;if(e.depth>1&&e.after()!=e.end(-1)){let r=e.before();if(K2(H.doc,r))return C&&C(H.tr.split(r).scrollIntoView()),!0}let V=e.blockRange(),t=V&&K5(V);return t==null?!1:(C&&C(H.tr.lift(V,t).scrollIntoView()),!0)};function tf(H){return(C,e)=>{let{$from:V,$to:t}=C.selection;if(C.selection instanceof K&&C.selection.node.isBlock)return!V.parentOffset||!K2(C.doc,V.pos)?!1:(e&&e(C.tr.split(V.pos).scrollIntoView()),!0);if(!V.depth)return!1;let r=[],i,o,n=!1,l=!1;for(let m=V.depth;;m--)if(V.node(m).isBlock){n=V.end(m)==V.pos+(V.depth-m),l=V.start(m)==V.pos-(V.depth-m),o=fe(V.node(m-1).contentMatchAt(V.indexAfter(m-1)));let h=H&&H(t.parent,n,V);r.unshift(h||(n&&o?{type:o}:null)),i=m;break}else{if(m==1)return!1;r.unshift(null)}let s=C.tr;(C.selection instanceof H1||C.selection instanceof D2)&&s.deleteSelection();let d=s.mapping.map(V.pos),p=K2(s.doc,d,r.length,r);if(p||(r[0]=o?{type:o}:null,p=K2(s.doc,d,r.length,r)),s.split(d,r.length,r),!n&&l&&V.node(i).type!=o){let m=s.mapping.map(V.before(i)),c=s.doc.resolve(m);o&&V.node(i-1).canReplaceWith(c.index(),c.index()+1,o)&&s.setNodeMarkup(s.mapping.map(V.before(i)),o)}return e&&e(s.scrollIntoView()),!0}}var Lf=tf();var Ti=(H,C)=>{let{$from:e,to:V}=H.selection,t,r=e.sharedDepth(V);return r==0?!1:(t=e.before(r),C&&C(H.tr.setSelection(K.create(H.doc,t))),!0)},rf=(H,C)=>(C&&C(H.tr.setSelection(new D2(H.doc))),!0);function Mf(H,C,e){let V=C.nodeBefore,t=C.nodeAfter,r=C.index();return!V||!t||!V.type.compatibleContent(t.type)?!1:!V.content.size&&C.parent.canReplace(r-1,r)?(e&&e(H.tr.delete(C.pos-V.nodeSize,C.pos).scrollIntoView()),!0):!C.parent.canReplace(r,r+1)||!(t.isTextblock||a5(H.doc,C.pos))?!1:(e&&e(H.tr.join(C.pos).scrollIntoView()),!0)}function Pi(H,C,e,V){let t=C.nodeBefore,r=C.nodeAfter,i,o,n=t.type.spec.isolating||r.type.spec.isolating;if(!n&&Mf(H,C,e))return!0;let l=!n&&C.parent.canReplace(C.index(),C.index()+1);if(l&&(i=(o=t.contentMatchAt(t.childCount)).findWrapping(r.type))&&o.matchType(i[0]||r.type).validEnd){if(e){let m=C.pos+r.nodeSize,c=B.empty;for(let O=i.length-1;O>=0;O--)c=B.from(i[O].create(null,c));c=B.from(t.copy(c));let h=H.tr.step(new E1(C.pos-1,m,C.pos,m,new _(c,1,0),i.length,!0)),S=h.doc.resolve(m+2*i.length);S.nodeAfter&&S.nodeAfter.type==t.type&&a5(h.doc,S.pos)&&h.join(S.pos),e(h.scrollIntoView())}return!0}let s=r.type.spec.isolating||V>0&&n?null:J.findFrom(C,1),d=s&&s.$from.blockRange(s.$to),p=d&&K5(d);if(p!=null&&p>=C.depth)return e&&e(H.tr.lift(d,p).scrollIntoView()),!0;if(l&&K0(r,"start",!0)&&K0(t,"end")){let m=t,c=[];for(;c.push(m),!m.isTextblock;)m=m.lastChild;let h=r,S=1;for(;!h.isTextblock;h=h.firstChild)S++;if(m.canReplace(m.childCount,m.childCount,h.content)){if(e){let O=B.empty;for(let D=c.length-1;D>=0;D--)O=B.from(c[D].copy(O));let E=H.tr.step(new E1(C.pos-c.length,C.pos+r.nodeSize,C.pos+S,C.pos+r.nodeSize-S,new _(O,c.length,0),0,!0));e(E.scrollIntoView())}return!0}}return!1}function Bi(H){return function(C,e){let V=C.selection,t=H<0?V.$from:V.$to,r=t.depth;for(;t.node(r).isInline;){if(!r)return!1;r--}return t.node(r).isTextblock?(e&&e(C.tr.setSelection(H1.create(C.doc,H<0?t.start(r):t.end(r)))),!0):!1}}var Ze=Bi(-1),Se=Bi(1);function Ei(H,C=null){return function(e,V){let{$from:t,$to:r}=e.selection,i=t.blockRange(r),o=i&&D0(i,H,C);return o?(V&&V(e.tr.wrap(i,o).scrollIntoView()),!0):!1}}function ge(H,C=null){return function(e,V){let t=!1;for(let r=0;r<e.selection.ranges.length&&!t;r++){let{$from:{pos:i},$to:{pos:o}}=e.selection.ranges[r];e.doc.nodesBetween(i,o,(n,l)=>{if(t)return!1;if(!(!n.isTextblock||n.hasMarkup(H,C)))if(n.type==H)t=!0;else{let s=e.doc.resolve(l),d=s.index();t=s.parent.canReplaceWith(d,d+1,H)}})}if(!t)return!1;if(V){let r=e.tr;for(let i=0;i<e.selection.ranges.length;i++){let{$from:{pos:o},$to:{pos:n}}=e.selection.ranges[i];r.setBlockType(o,n,H,C)}V(r.scrollIntoView())}return!0}}function Oe(...H){return function(C,e,V){for(let t=0;t<H.length;t++)if(H[t](C,e,V))return!0;return!1}}var le=Oe(W9,se,Ae),hi=Oe(W9,pe,ue),S3={Enter:Oe(ce,ve,he,Lf),"Mod-Enter":xe,Backspace:le,"Mod-Backspace":le,"Shift-Backspace":le,Delete:hi,"Mod-Delete":hi,"Mod-a":rf},of={"Ctrl-h":S3.Backspace,"Alt-Backspace":S3["Mod-Backspace"],"Ctrl-d":S3.Delete,"Ctrl-Alt-Backspace":S3["Mod-Delete"],"Alt-Delete":S3["Mod-Delete"],"Alt-d":S3["Mod-Delete"],"Ctrl-a":Ze,"Ctrl-e":Se};for(let H in S3)of[H]=S3[H];var HZ=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1;function Ri(H,C=null){return function(e,V){let{$from:t,$to:r}=e.selection,i=t.blockRange(r),o=!1,n=i;if(!i)return!1;if(i.depth>=2&&t.node(i.depth-1).type.compatibleContent(H)&&i.startIndex==0){if(t.index(i.depth-1)==0)return!1;let s=e.doc.resolve(i.start-2);n=new $3(s,s,i.depth),i.endIndex<i.parent.childCount&&(i=new $3(t,e.doc.resolve(r.end(i.depth)),i.depth)),o=!0}let l=D0(n,H,C,i);return l?(V&&V(nf(e.tr,i,l,o,H).scrollIntoView()),!0):!1}}function nf(H,C,e,V,t){let r=B.empty;for(let s=e.length-1;s>=0;s--)r=B.from(e[s].type.create(e[s].attrs,r));H.step(new E1(C.start-(V?2:0),C.end,C.start,C.end,new _(r,0,0),e.length,!0));let i=0;for(let s=0;s<e.length;s++)e[s].type==t&&(i=s+1);let o=e.length-i,n=C.start+e.length-(V?2:0),l=C.parent;for(let s=C.startIndex,d=C.endIndex,p=!0;s<d;s++,p=!1)!p&&K2(H.doc,n,o)&&(H.split(n,o),n+=2*o),n+=l.child(s).nodeSize;return H}function Fi(H){return function(C,e){let{$from:V,$to:t}=C.selection,r=V.blockRange(t,i=>i.childCount>0&&i.firstChild.type==H);return r?e?V.node(r.depth-1).type==H?af(C,e,H,r):lf(C,e,r):!0:!1}}function af(H,C,e,V){let t=H.tr,r=V.end,i=V.$to.end(V.depth);r<i&&(t.step(new E1(r-1,i,r,i,new _(B.from(e.create(null,V.parent.copy())),1,0),1,!0)),V=new $3(t.doc.resolve(V.$from.pos),t.doc.resolve(i),V.depth));let o=K5(V);if(o==null)return!1;t.lift(V,o);let n=t.mapping.map(r,-1)-1;return a5(t.doc,n)&&t.join(n),C(t.scrollIntoView()),!0}function lf(H,C,e){let V=H.tr,t=e.parent;for(let m=e.end,c=e.endIndex-1,h=e.startIndex;c>h;c--)m-=t.child(c).nodeSize,V.delete(m-1,m+1);let r=V.doc.resolve(e.start),i=r.nodeAfter;if(V.mapping.map(e.end)!=e.start+r.nodeAfter.nodeSize)return!1;let o=e.startIndex==0,n=e.endIndex==t.childCount,l=r.node(-1),s=r.index(-1);if(!l.canReplace(s+(o?0:1),s+1,i.content.append(n?B.empty:B.from(t))))return!1;let d=r.pos,p=d+i.nodeSize;return V.step(new E1(d-(o?1:0),p+(n?1:0),d+1,p-1,new _((o?B.empty:B.from(t.copy(B.empty))).append(n?B.empty:B.from(t.copy(B.empty))),o?0:1,n?0:1),o?0:1)),C(V.scrollIntoView()),!0}function Di(H){return function(C,e){let{$from:V,$to:t}=C.selection,r=V.blockRange(t,l=>l.childCount>0&&l.firstChild.type==H);if(!r)return!1;let i=r.startIndex;if(i==0)return!1;let o=r.parent,n=o.child(i-1);if(n.type!=H)return!1;if(e){let l=n.lastChild&&n.lastChild.type==o.type,s=B.from(l?H.create():null),d=new _(B.from(H.create(null,B.from(o.type.create(null,s)))),l?3:1,0),p=r.start,m=r.end;e(C.tr.step(new E1(p-(l?3:1),m,p,m,d,1,!0)).scrollIntoView())}return!0}}function X7(H){let{state:C,transaction:e}=H,{selection:V}=e,{doc:t}=e,{storedMarks:r}=e;return{...C,apply:C.apply.bind(C),applyTransaction:C.applyTransaction.bind(C),plugins:C.plugins,schema:C.schema,reconfigure:C.reconfigure.bind(C),toJSON:C.toJSON.bind(C),get storedMarks(){return r},get selection(){return V},get doc(){return t},get tr(){return V=e.selection,t=e.doc,r=e.storedMarks,e}}}var t0=class{constructor(C){this.editor=C.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=C.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){let{rawCommands:C,editor:e,state:V}=this,{view:t}=e,{tr:r}=V,i=this.buildProps(r);return Object.fromEntries(Object.entries(C).map(([o,n])=>[o,(...s)=>{let d=n(...s)(i);return!r.getMeta("preventDispatch")&&!this.hasCustomState&&t.dispatch(r),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(C,e=!0){let{rawCommands:V,editor:t,state:r}=this,{view:i}=t,o=[],n=!!C,l=C||r.tr,s=()=>(!n&&e&&!l.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(l),o.every(p=>p===!0)),d={...Object.fromEntries(Object.entries(V).map(([p,m])=>[p,(...h)=>{let S=this.buildProps(l,e),O=m(...h)(S);return o.push(O),d}])),run:s};return d}createCan(C){let{rawCommands:e,state:V}=this,t=!1,r=C||V.tr,i=this.buildProps(r,t);return{...Object.fromEntries(Object.entries(e).map(([n,l])=>[n,(...s)=>l(...s)({...i,dispatch:void 0})])),chain:()=>this.createChain(r,t)}}buildProps(C,e=!0){let{rawCommands:V,editor:t,state:r}=this,{view:i}=t,o={tr:C,editor:t,view:i,state:X7({state:r,transaction:C}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(C,e),can:()=>this.createCan(C),get commands(){return Object.fromEntries(Object.entries(V).map(([n,l])=>[n,(...s)=>l(...s)(o)]))}};return o}},be=class{constructor(){this.callbacks={}}on(C,e){return this.callbacks[C]||(this.callbacks[C]=[]),this.callbacks[C].push(e),this}emit(C,...e){let V=this.callbacks[C];return V&&V.forEach(t=>t.apply(this,e)),this}off(C,e){let V=this.callbacks[C];return V&&(e?this.callbacks[C]=V.filter(t=>t!==e):delete this.callbacks[C]),this}once(C,e){let V=(...t)=>{this.off(C,V),e.apply(this,t)};return this.on(C,V)}removeAllListeners(){this.callbacks={}}};function U(H,C,e){return H.config[C]===void 0&&H.parent?U(H.parent,C,e):typeof H.config[C]=="function"?H.config[C].bind({...e,parent:H.parent?U(H.parent,C,e):null}):H.config[C]}function Y7(H){let C=H.filter(t=>t.type==="extension"),e=H.filter(t=>t.type==="node"),V=H.filter(t=>t.type==="mark");return{baseExtensions:C,nodeExtensions:e,markExtensions:V}}function Fe(H){let C=[],{nodeExtensions:e,markExtensions:V}=Y7(H),t=[...e,...V],r={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return H.forEach(i=>{let o={name:i.name,options:i.options,storage:i.storage,extensions:t},n=U(i,"addGlobalAttributes",o);if(!n)return;n().forEach(s=>{s.types.forEach(d=>{Object.entries(s.attributes).forEach(([p,m])=>{C.push({type:d,name:p,attribute:{...r,...m}})})})})}),t.forEach(i=>{let o={name:i.name,options:i.options,storage:i.storage},n=U(i,"addAttributes",o);if(!n)return;let l=n();Object.entries(l).forEach(([s,d])=>{let p={...r,...d};typeof p?.default=="function"&&(p.default=p.default()),p?.isRequired&&p?.default===void 0&&delete p.default,C.push({type:i.name,name:s,attribute:p})})}),C}function W1(H,C){if(typeof H=="string"){if(!C.nodes[H])throw Error(`There is no node type named '${H}'. Maybe you forgot to add the extension?`);return C.nodes[H]}return H}function x1(...H){return H.filter(C=>!!C).reduce((C,e)=>{let V={...C};return Object.entries(e).forEach(([t,r])=>{if(!V[t]){V[t]=r;return}if(t==="class"){let o=r?r.split(" "):[],n=V[t]?V[t].split(" "):[],l=o.filter(s=>!n.includes(s));V[t]=[...n,...l].join(" ")}else if(t==="style"){let o=r?r.split(";").map(s=>s.trim()).filter(Boolean):[],n=V[t]?V[t].split(";").map(s=>s.trim()).filter(Boolean):[],l=new Map;n.forEach(s=>{let[d,p]=s.split(":").map(m=>m.trim());l.set(d,p)}),o.forEach(s=>{let[d,p]=s.split(":").map(m=>m.trim());l.set(d,p)}),V[t]=Array.from(l.entries()).map(([s,d])=>`${s}: ${d}`).join("; ")}else V[t]=r}),V},{})}function G9(H,C){return C.filter(e=>e.type===H.type.name).filter(e=>e.attribute.rendered).map(e=>e.attribute.renderHTML?e.attribute.renderHTML(H.attrs)||{}:{[e.name]:H.attrs[e.name]}).reduce((e,V)=>x1(e,V),{})}function De(H){return typeof H=="function"}function e1(H,C=void 0,...e){return De(H)?C?H.bind(C)(...e):H(...e):H}function Wi(H={}){return Object.keys(H).length===0&&H.constructor===Object}function zi(H){return typeof H!="string"?H:H.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(H):H==="true"?!0:H==="false"?!1:H}function we(H,C){return"style"in H?H:{...H,getAttrs:e=>{let V=H.getAttrs?H.getAttrs(e):H.attrs;if(V===!1)return!1;let t=C.reduce((r,i)=>{let o=i.attribute.parseHTML?i.attribute.parseHTML(e):zi(e.getAttribute(i.name));return o==null?r:{...r,[i.name]:o}},{});return{...V,...t}}}}function Ni(H){return Object.fromEntries(Object.entries(H).filter(([C,e])=>C==="attrs"&&Wi(e)?!1:e!=null))}function Ne(H,C){var e;let V=Fe(H),{nodeExtensions:t,markExtensions:r}=Y7(H),i=(e=t.find(l=>U(l,"topNode")))===null||e===void 0?void 0:e.name,o=Object.fromEntries(t.map(l=>{let s=V.filter(O=>O.type===l.name),d={name:l.name,options:l.options,storage:l.storage,editor:C},p=H.reduce((O,E)=>{let D=U(E,"extendNodeSchema",d);return{...O,...D?D(l):{}}},{}),m=Ni({...p,content:e1(U(l,"content",d)),marks:e1(U(l,"marks",d)),group:e1(U(l,"group",d)),inline:e1(U(l,"inline",d)),atom:e1(U(l,"atom",d)),selectable:e1(U(l,"selectable",d)),draggable:e1(U(l,"draggable",d)),code:e1(U(l,"code",d)),whitespace:e1(U(l,"whitespace",d)),linebreakReplacement:e1(U(l,"linebreakReplacement",d)),defining:e1(U(l,"defining",d)),isolating:e1(U(l,"isolating",d)),attrs:Object.fromEntries(s.map(O=>{var E;return[O.name,{default:(E=O?.attribute)===null||E===void 0?void 0:E.default}]}))}),c=e1(U(l,"parseHTML",d));c&&(m.parseDOM=c.map(O=>we(O,s)));let h=U(l,"renderHTML",d);h&&(m.toDOM=O=>h({node:O,HTMLAttributes:G9(O,s)}));let S=U(l,"renderText",d);return S&&(m.toText=S),[l.name,m]})),n=Object.fromEntries(r.map(l=>{let s=V.filter(S=>S.type===l.name),d={name:l.name,options:l.options,storage:l.storage,editor:C},p=H.reduce((S,O)=>{let E=U(O,"extendMarkSchema",d);return{...S,...E?E(l):{}}},{}),m=Ni({...p,inclusive:e1(U(l,"inclusive",d)),excludes:e1(U(l,"excludes",d)),group:e1(U(l,"group",d)),spanning:e1(U(l,"spanning",d)),code:e1(U(l,"code",d)),attrs:Object.fromEntries(s.map(S=>{var O;return[S.name,{default:(O=S?.attribute)===null||O===void 0?void 0:O.default}]}))}),c=e1(U(l,"parseHTML",d));c&&(m.parseDOM=c.map(S=>we(S,s)));let h=U(l,"renderHTML",d);return h&&(m.toDOM=S=>h({mark:S,HTMLAttributes:G9(S,s)})),[l.name,m]}));return new y7({topNode:i,nodes:o,marks:n})}function U9(H,C){return C.nodes[H]||C.marks[H]||null}function Te(H,C){return Array.isArray(C)?C.some(e=>(typeof e=="string"?e:e.name)===H.name):C}function C4(H,C){let e=G5.fromSchema(C).serializeFragment(H),t=document.implementation.createHTMLDocument().createElement("div");return t.appendChild(e),t.innerHTML}var Ui=(H,C=500)=>{let e="",V=H.parentOffset;return H.parent.nodesBetween(Math.max(0,V-C),V,(t,r,i,o)=>{var n,l;let s=((l=(n=t.type.spec).toText)===null||l===void 0?void 0:l.call(n,{node:t,pos:r,parent:i,index:o}))||t.textContent||"%leaf%";e+=t.isAtom&&!t.isText?s:s.slice(0,Math.max(0,V-r))}),e};function j9(H){return Object.prototype.toString.call(H)==="[object RegExp]"}var g3=class{constructor(C){this.find=C.find,this.handler=C.handler}},sf=(H,C)=>{if(j9(C))return C.exec(H);let e=C(H);if(!e)return null;let V=[e.text];return V.index=e.index,V.input=H,V.data=e.data,e.replaceWith&&(e.text.includes(e.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),V.push(e.replaceWith)),V};function z9(H){var C;let{editor:e,from:V,to:t,text:r,rules:i,plugin:o}=H,{view:n}=e;if(n.composing)return!1;let l=n.state.doc.resolve(V);if(l.parent.type.spec.code||!((C=l.nodeBefore||l.nodeAfter)===null||C===void 0)&&C.marks.find(p=>p.type.spec.code))return!1;let s=!1,d=Ui(l)+r;return i.forEach(p=>{if(s)return;let m=sf(d,p.find);if(!m)return;let c=n.state.tr,h=X7({state:n.state,transaction:c}),S={from:V-(m[0].length-r.length),to:t},{commands:O,chain:E,can:D}=new t0({editor:e,state:h});p.handler({state:h,range:S,match:m,commands:O,chain:E,can:D})===null||!c.steps.length||(c.setMeta(o,{transform:c,from:V,to:t,text:r}),n.dispatch(c),s=!0)}),s}function Gi(H){let{editor:C,rules:e}=H,V=new f1({state:{init(){return null},apply(t,r,i){let o=t.getMeta(V);if(o)return o;let n=t.getMeta("applyInputRules");return!!n&&setTimeout(()=>{let{text:s}=n;typeof s=="string"?s=s:s=C4(B.from(s),i.schema);let{from:d}=n,p=d+s.length;z9({editor:C,from:d,to:p,text:s,rules:e,plugin:V})}),t.selectionSet||t.docChanged?null:r}},props:{handleTextInput(t,r,i,o){return z9({editor:C,from:r,to:i,text:o,rules:e,plugin:V})},handleDOMEvents:{compositionend:t=>(setTimeout(()=>{let{$cursor:r}=t.state.selection;r&&z9({editor:C,from:r.pos,to:r.pos,text:"",rules:e,plugin:V})}),!1)},handleKeyDown(t,r){if(r.key!=="Enter")return!1;let{$cursor:i}=t.state.selection;return i?z9({editor:C,from:i.pos,to:i.pos,text:`
`,rules:e,plugin:V}):!1}},isInputRules:!0});return V}function Af(H){return Object.prototype.toString.call(H).slice(8,-1)}function K7(H){return Af(H)!=="Object"?!1:H.constructor===Object&&Object.getPrototypeOf(H)===Object.prototype}function e4(H,C){let e={...H};return K7(H)&&K7(C)&&Object.keys(C).forEach(V=>{K7(C[V])&&K7(H[V])?e[V]=e4(H[V],C[V]):e[V]=C[V]}),e}var g2=class H{constructor(C={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...C},this.name=this.config.name,C.defaultOptions&&Object.keys(C.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=e1(U(this,"addOptions",{name:this.name}))),this.storage=e1(U(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(C={}){return new H(C)}configure(C={}){let e=this.extend({...this.config,addOptions:()=>e4(this.options,C)});return e.name=this.name,e.parent=this.parent,e}extend(C={}){let e=new H(C);return e.parent=this,this.child=e,e.name=C.name?C.name:e.parent.name,C.defaultOptions&&Object.keys(C.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=e1(U(e,"addOptions",{name:e.name})),e.storage=e1(U(e,"addStorage",{name:e.name,options:e.options})),e}static handleExit({editor:C,mark:e}){let{tr:V}=C.state,t=C.state.selection.$from;if(t.pos===t.end()){let i=t.marks();if(!!!i.find(l=>l?.type.name===e.name))return!1;let n=i.find(l=>l?.type.name===e.name);return n&&V.removeStoredMark(n),V.insertText(" ",t.pos),C.view.dispatch(V),!0}return!1}};function $i(H){return typeof H=="number"}var q0=class{constructor(C){this.find=C.find,this.handler=C.handler}},df=(H,C,e)=>{if(j9(C))return[...H.matchAll(C)];let V=C(H,e);return V?V.map(t=>{let r=[t.text];return r.index=t.index,r.input=H,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),r.push(t.replaceWith)),r}):[]};function pf(H){let{editor:C,state:e,from:V,to:t,rule:r,pasteEvent:i,dropEvent:o}=H,{commands:n,chain:l,can:s}=new t0({editor:C,state:e}),d=[];return e.doc.nodesBetween(V,t,(m,c)=>{if(!m.isTextblock||m.type.spec.code)return;let h=Math.max(V,c),S=Math.min(t,c+m.content.size),O=m.textBetween(h-c,S-c,void 0,"\uFFFC");df(O,r.find,i).forEach(D=>{if(D.index===void 0)return;let N=h+D.index+1,R=N+D[0].length,W={from:e.tr.mapping.map(N),to:e.tr.mapping.map(R)},X=r.handler({state:e,range:W,match:D,commands:n,chain:l,can:s,pasteEvent:i,dropEvent:o});d.push(X)})}),d.every(m=>m!==null)}var uf=H=>{var C;let e=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(C=e.clipboardData)===null||C===void 0||C.setData("text/html",H),e};function Ki(H){let{editor:C,rules:e}=H,V=null,t=!1,r=!1,i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,o;try{o=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{o=null}let n=({state:s,from:d,to:p,rule:m,pasteEvt:c})=>{let h=s.tr,S=X7({state:s,transaction:h});if(!(!pf({editor:C,state:S,from:Math.max(d-1,0),to:p.b-1,rule:m,pasteEvent:c,dropEvent:o})||!h.steps.length)){try{o=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{o=null}return i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,h}};return e.map(s=>new f1({view(d){let p=m=>{var c;V=!((c=d.dom.parentElement)===null||c===void 0)&&c.contains(m.target)?d.dom.parentElement:null};return window.addEventListener("dragstart",p),{destroy(){window.removeEventListener("dragstart",p)}}},props:{handleDOMEvents:{drop:(d,p)=>(r=V===d.dom.parentElement,o=p,!1),paste:(d,p)=>{var m;let c=(m=p.clipboardData)===null||m===void 0?void 0:m.getData("text/html");return i=p,t=!!c?.includes("data-pm-slice"),!1}}},appendTransaction:(d,p,m)=>{let c=d[0],h=c.getMeta("uiEvent")==="paste"&&!t,S=c.getMeta("uiEvent")==="drop"&&!r,O=c.getMeta("applyPasteRules"),E=!!O;if(!h&&!S&&!E)return;if(E){let{text:R}=O;typeof R=="string"?R=R:R=C4(B.from(R),m.schema);let{from:W}=O,X=W+R.length,i1=uf(R);return n({rule:s,state:m,from:W,to:{b:X},pasteEvt:i1})}let D=p.doc.content.findDiffStart(m.doc.content),N=p.doc.content.findDiffEnd(m.doc.content);if(!(!$i(D)||!N||D===N.b))return n({rule:s,state:m,from:D,to:N,pasteEvt:i})}}))}function Qi(H){let C=H.filter((e,V)=>H.indexOf(e)!==V);return Array.from(new Set(C))}var $9=class H{constructor(C,e){this.splittableMarks=[],this.editor=e,this.extensions=H.resolve(C),this.schema=Ne(this.extensions,e),this.setupExtensions()}static resolve(C){let e=H.sort(H.flatten(C)),V=Qi(e.map(t=>t.name));return V.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${V.map(t=>`'${t}'`).join(", ")}]. This can lead to issues.`),e}static flatten(C){return C.map(e=>{let V={name:e.name,options:e.options,storage:e.storage},t=U(e,"addExtensions",V);return t?[e,...this.flatten(t())]:e}).flat(10)}static sort(C){return C.sort((V,t)=>{let r=U(V,"priority")||100,i=U(t,"priority")||100;return r>i?-1:r<i?1:0})}get commands(){return this.extensions.reduce((C,e)=>{let V={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:U9(e.name,this.schema)},t=U(e,"addCommands",V);return t?{...C,...t()}:C},{})}get plugins(){let{editor:C}=this,e=H.sort([...this.extensions].reverse()),V=[],t=[],r=e.map(i=>{let o={name:i.name,options:i.options,storage:i.storage,editor:C,type:U9(i.name,this.schema)},n=[],l=U(i,"addKeyboardShortcuts",o),s={};if(i.type==="mark"&&U(i,"exitable",o)&&(s.ArrowRight=()=>g2.handleExit({editor:C,mark:i})),l){let h=Object.fromEntries(Object.entries(l()).map(([S,O])=>[S,()=>O({editor:C})]));s={...s,...h}}let d=vi(s);n.push(d);let p=U(i,"addInputRules",o);Te(i,C.options.enableInputRules)&&p&&V.push(...p());let m=U(i,"addPasteRules",o);Te(i,C.options.enablePasteRules)&&m&&t.push(...m());let c=U(i,"addProseMirrorPlugins",o);if(c){let h=c();n.push(...h)}return n}).flat();return[Gi({editor:C,rules:V}),...Ki({editor:C,rules:t}),...r]}get attributes(){return Fe(this.extensions)}get nodeViews(){let{editor:C}=this,{nodeExtensions:e}=Y7(this.extensions);return Object.fromEntries(e.filter(V=>!!U(V,"addNodeView")).map(V=>{let t=this.attributes.filter(n=>n.type===V.name),r={name:V.name,options:V.options,storage:V.storage,editor:C,type:W1(V.name,this.schema)},i=U(V,"addNodeView",r);if(!i)return[];let o=(n,l,s,d,p)=>{let m=G9(n,t);return i()({node:n,view:l,getPos:s,decorations:d,innerDecorations:p,editor:C,extension:V,HTMLAttributes:m})};return[V.name,o]}))}setupExtensions(){this.extensions.forEach(C=>{var e;this.editor.extensionStorage[C.name]=C.storage;let V={name:C.name,options:C.options,storage:C.storage,editor:this.editor,type:U9(C.name,this.schema)};C.type==="mark"&&(!((e=e1(U(C,"keepOnSplit",V)))!==null&&e!==void 0)||e)&&this.splittableMarks.push(C.name);let t=U(C,"onBeforeCreate",V),r=U(C,"onCreate",V),i=U(C,"onUpdate",V),o=U(C,"onSelectionUpdate",V),n=U(C,"onTransaction",V),l=U(C,"onFocus",V),s=U(C,"onBlur",V),d=U(C,"onDestroy",V);t&&this.editor.on("beforeCreate",t),r&&this.editor.on("create",r),i&&this.editor.on("update",i),o&&this.editor.on("selectionUpdate",o),n&&this.editor.on("transaction",n),l&&this.editor.on("focus",l),s&&this.editor.on("blur",s),d&&this.editor.on("destroy",d)})}},z1=class H{constructor(C={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...C},this.name=this.config.name,C.defaultOptions&&Object.keys(C.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=e1(U(this,"addOptions",{name:this.name}))),this.storage=e1(U(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(C={}){return new H(C)}configure(C={}){let e=this.extend({...this.config,addOptions:()=>e4(this.options,C)});return e.name=this.name,e.parent=this.parent,e}extend(C={}){let e=new H({...this.config,...C});return e.parent=this,this.child=e,e.name=C.name?C.name:e.parent.name,C.defaultOptions&&Object.keys(C.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=e1(U(e,"addOptions",{name:e.name})),e.storage=e1(U(e,"addStorage",{name:e.name,options:e.options})),e}};function Ie(H,C,e){let{from:V,to:t}=C,{blockSeparator:r=`

`,textSerializers:i={}}=e||{},o="";return H.nodesBetween(V,t,(n,l,s,d)=>{var p;n.isBlock&&l>V&&(o+=r);let m=i?.[n.type.name];if(m)return s&&(o+=m({node:n,pos:l,parent:s,index:d,range:C})),!1;n.isText&&(o+=(p=n?.text)===null||p===void 0?void 0:p.slice(Math.max(V,l)-l,t-l))}),o}function J9(H){return Object.fromEntries(Object.entries(H.nodes).filter(([,C])=>C.spec.toText).map(([C,e])=>[C,e.spec.toText]))}var qi=z1.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new f1({key:new _1("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{let{editor:H}=this,{state:C,schema:e}=H,{doc:V,selection:t}=C,{ranges:r}=t,i=Math.min(...r.map(s=>s.$from.pos)),o=Math.max(...r.map(s=>s.$to.pos)),n=J9(e);return Ie(V,{from:i,to:o},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:n})}}})]}}),mf=()=>({editor:H,view:C})=>(requestAnimationFrame(()=>{var e;H.isDestroyed||(C.dom.blur(),(e=window?.getSelection())===null||e===void 0||e.removeAllRanges())}),!0),cf=(H=!1)=>({commands:C})=>C.setContent("",H),ff=()=>({state:H,tr:C,dispatch:e})=>{let{selection:V}=C,{ranges:t}=V;return e&&t.forEach(({$from:r,$to:i})=>{H.doc.nodesBetween(r.pos,i.pos,(o,n)=>{if(o.type.isText)return;let{doc:l,mapping:s}=C,d=l.resolve(s.map(n)),p=l.resolve(s.map(n+o.nodeSize)),m=d.blockRange(p);if(!m)return;let c=K5(m);if(o.type.isTextblock){let{defaultType:h}=d.parent.contentMatchAt(d.index());C.setNodeMarkup(m.start,h)}(c||c===0)&&C.lift(m,c)})}),!0},xf=H=>C=>H(C),vf=()=>({state:H,dispatch:C})=>ve(H,C),hf=(H,C)=>({editor:e,tr:V})=>{let{state:t}=e,r=t.doc.slice(H.from,H.to);V.deleteRange(H.from,H.to);let i=V.mapping.map(C);return V.insert(i,r.content),V.setSelection(new H1(V.doc.resolve(i-1))),!0},Zf=()=>({tr:H,dispatch:C})=>{let{selection:e}=H,V=e.$anchor.node();if(V.content.size>0)return!1;let t=H.selection.$anchor;for(let r=t.depth;r>0;r-=1)if(t.node(r).type===V.type){if(C){let o=t.before(r),n=t.after(r);H.delete(o,n).scrollIntoView()}return!0}return!1},Sf=H=>({tr:C,state:e,dispatch:V})=>{let t=W1(H,e.schema),r=C.selection.$anchor;for(let i=r.depth;i>0;i-=1)if(r.node(i).type===t){if(V){let n=r.before(i),l=r.after(i);C.delete(n,l).scrollIntoView()}return!0}return!1},gf=H=>({tr:C,dispatch:e})=>{let{from:V,to:t}=H;return e&&C.delete(V,t),!0},Of=()=>({state:H,dispatch:C})=>W9(H,C),yf=()=>({commands:H})=>H.keyboardShortcut("Enter"),kf=()=>({state:H,dispatch:C})=>xe(H,C);function q7(H,C,e={strict:!0}){let V=Object.keys(C);return V.length?V.every(t=>e.strict?C[t]===H[t]:j9(C[t])?C[t].test(H[t]):C[t]===H[t]):!0}function ji(H,C,e={}){return H.find(V=>V.type===C&&q7(Object.fromEntries(Object.keys(e).map(t=>[t,V.attrs[t]])),e))}function Ii(H,C,e={}){return!!ji(H,C,e)}function X9(H,C,e){var V;if(!H||!C)return;let t=H.parent.childAfter(H.parentOffset);if((!t.node||!t.node.marks.some(s=>s.type===C))&&(t=H.parent.childBefore(H.parentOffset)),!t.node||!t.node.marks.some(s=>s.type===C)||(e=e||((V=t.node.marks[0])===null||V===void 0?void 0:V.attrs),!ji([...t.node.marks],C,e)))return;let i=t.index,o=H.start()+t.offset,n=i+1,l=o+t.node.nodeSize;for(;i>0&&Ii([...H.parent.child(i-1).marks],C,e);)i-=1,o-=H.parent.child(i).nodeSize;for(;n<H.parent.childCount&&Ii([...H.parent.child(n).marks],C,e);)l+=H.parent.child(n).nodeSize,n+=1;return{from:o,to:l}}function X5(H,C){if(typeof H=="string"){if(!C.marks[H])throw Error(`There is no mark type named '${H}'. Maybe you forgot to add the extension?`);return C.marks[H]}return H}var bf=(H,C={})=>({tr:e,state:V,dispatch:t})=>{let r=X5(H,V.schema),{doc:i,selection:o}=e,{$from:n,from:l,to:s}=o;if(t){let d=X9(n,r,C);if(d&&d.from<=l&&d.to>=s){let p=H1.create(i,d.from,d.to);e.setSelection(p)}}return!0},wf=H=>C=>{let e=typeof H=="function"?H(C):H;for(let V=0;V<e.length;V+=1)if(e[V](C))return!0;return!1};function _e(H){return H instanceof H1}function g5(H=0,C=0,e=0){return Math.min(Math.max(H,C),e)}function We(H,C=null){if(!C)return null;let e=J.atStart(H),V=J.atEnd(H);if(C==="start"||C===!0)return e;if(C==="end")return V;let t=e.from,r=V.to;return C==="all"?H1.create(H,g5(0,t,r),g5(H.content.size,t,r)):H1.create(H,g5(C,t,r),g5(C,t,r))}function H4(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var Tf=(H=null,C={})=>({editor:e,view:V,tr:t,dispatch:r})=>{C={scrollIntoView:!0,...C};let i=()=>{H4()&&V.dom.focus(),requestAnimationFrame(()=>{e.isDestroyed||(V.focus(),C?.scrollIntoView&&e.commands.scrollIntoView())})};if(V.hasFocus()&&H===null||H===!1)return!0;if(r&&H===null&&!_e(e.state.selection))return i(),!0;let o=We(t.doc,H)||e.state.selection,n=e.state.selection.eq(o);return r&&(n||t.setSelection(o),n&&t.storedMarks&&t.setStoredMarks(t.storedMarks),i()),!0},Pf=(H,C)=>e=>H.every((V,t)=>C(V,{...e,index:t})),Bf=(H,C)=>({tr:e,commands:V})=>V.insertContentAt({from:e.selection.from,to:e.selection.to},H,C),Ji=H=>{let C=H.childNodes;for(let e=C.length-1;e>=0;e-=1){let V=C[e];V.nodeType===3&&V.nodeValue&&/^(\n\s\s|\n)$/.test(V.nodeValue)?H.removeChild(V):V.nodeType===1&&Ji(V)}return H};function Q0(H){let C=`<body>${H}</body>`,e=new window.DOMParser().parseFromString(C,"text/html").body;return Ji(e)}function j7(H,C,e){if(H instanceof Z2||H instanceof B)return H;e={slice:!0,parseOptions:{},...e};let V=typeof H=="object"&&H!==null,t=typeof H=="string";if(V)try{if(Array.isArray(H)&&H.length>0)return B.fromArray(H.map(o=>C.nodeFromJSON(o)));let i=C.nodeFromJSON(H);return e.errorOnInvalidContent&&i.check(),i}catch(r){if(e.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:r});return console.warn("[tiptap warn]: Invalid content.","Passed value:",H,"Error:",r),j7("",C,e)}if(t){if(e.errorOnInvalidContent){let i=!1,o="",n=new y7({topNode:C.spec.topNode,marks:C.spec.marks,nodes:C.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:l=>(i=!0,o=typeof l=="string"?l:l.outerHTML,null)}]}})});if(e.slice?h5.fromSchema(n).parseSlice(Q0(H),e.parseOptions):h5.fromSchema(n).parse(Q0(H),e.parseOptions),e.errorOnInvalidContent&&i)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${o}`)})}let r=h5.fromSchema(C);return e.slice?r.parseSlice(Q0(H),e.parseOptions).content:r.parse(Q0(H),e.parseOptions)}return j7("",C,e)}function Xi(H,C,e){let V=H.steps.length-1;if(V<C)return;let t=H.steps[V];if(!(t instanceof M2||t instanceof E1))return;let r=H.mapping.maps[V],i=0;r.forEach((o,n,l,s)=>{i===0&&(i=s)}),H.setSelection(J.near(H.doc.resolve(i),e))}var Ef=H=>!("type"in H),Rf=(H,C,e)=>({tr:V,dispatch:t,editor:r})=>{var i;if(t){e={parseOptions:r.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...e};let o;try{o=j7(C,r.schema,{parseOptions:{preserveWhitespace:"full",...e.parseOptions},errorOnInvalidContent:(i=e.errorOnInvalidContent)!==null&&i!==void 0?i:r.options.enableContentCheck})}catch(c){return r.emit("contentError",{editor:r,error:c,disableCollaboration:()=>{r.storage.collaboration&&(r.storage.collaboration.isDisabled=!0)}}),!1}let{from:n,to:l}=typeof H=="number"?{from:H,to:H}:{from:H.from,to:H.to},s=!0,d=!0;if((Ef(o)?o:[o]).forEach(c=>{c.check(),s=s?c.isText&&c.marks.length===0:!1,d=d?c.isBlock:!1}),n===l&&d){let{parent:c}=V.doc.resolve(n);c.isTextblock&&!c.type.spec.code&&!c.childCount&&(n-=1,l+=1)}let m;if(s){if(Array.isArray(C))m=C.map(c=>c.text||"").join("");else if(C instanceof B){let c="";C.forEach(h=>{h.text&&(c+=h.text)}),m=c}else typeof C=="object"&&C&&C.text?m=C.text:m=C;V.insertText(m,n,l)}else m=o,V.replaceWith(n,l,m);e.updateSelection&&Xi(V,V.steps.length-1,-1),e.applyInputRules&&V.setMeta("applyInputRules",{from:n,text:m}),e.applyPasteRules&&V.setMeta("applyPasteRules",{from:n,text:m})}return!0},Ff=()=>({state:H,dispatch:C})=>ki(H,C),Df=()=>({state:H,dispatch:C})=>bi(H,C),Nf=()=>({state:H,dispatch:C})=>se(H,C),If=()=>({state:H,dispatch:C})=>pe(H,C),_f=()=>({state:H,dispatch:C,tr:e})=>{try{let V=N0(H.doc,H.selection.$from.pos,-1);return V==null?!1:(e.join(V,2),C&&C(e),!0)}catch{return!1}},Wf=()=>({state:H,dispatch:C,tr:e})=>{try{let V=N0(H.doc,H.selection.$from.pos,1);return V==null?!1:(e.join(V,2),C&&C(e),!0)}catch{return!1}},zf=()=>({state:H,dispatch:C})=>Si(H,C),Uf=()=>({state:H,dispatch:C})=>gi(H,C);function ze(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Gf(H){let C=H.split(/-(?!$)/),e=C[C.length-1];e==="Space"&&(e=" ");let V,t,r,i;for(let o=0;o<C.length-1;o+=1){let n=C[o];if(/^(cmd|meta|m)$/i.test(n))i=!0;else if(/^a(lt)?$/i.test(n))V=!0;else if(/^(c|ctrl|control)$/i.test(n))t=!0;else if(/^s(hift)?$/i.test(n))r=!0;else if(/^mod$/i.test(n))H4()||ze()?i=!0:t=!0;else throw new Error(`Unrecognized modifier name: ${n}`)}return V&&(e=`Alt-${e}`),t&&(e=`Ctrl-${e}`),i&&(e=`Meta-${e}`),r&&(e=`Shift-${e}`),e}var $f=H=>({editor:C,view:e,tr:V,dispatch:t})=>{let r=Gf(H).split(/-(?!$)/),i=r.find(l=>!["Alt","Ctrl","Meta","Shift"].includes(l)),o=new KeyboardEvent("keydown",{key:i==="Space"?" ":i,altKey:r.includes("Alt"),ctrlKey:r.includes("Ctrl"),metaKey:r.includes("Meta"),shiftKey:r.includes("Shift"),bubbles:!0,cancelable:!0}),n=C.captureTransaction(()=>{e.someProp("handleKeyDown",l=>l(e,o))});return n?.steps.forEach(l=>{let s=l.map(V.mapping);s&&t&&V.maybeStep(s)}),!0};function j0(H,C,e={}){let{from:V,to:t,empty:r}=H.selection,i=C?W1(C,H.schema):null,o=[];H.doc.nodesBetween(V,t,(d,p)=>{if(d.isText)return;let m=Math.max(V,p),c=Math.min(t,p+d.nodeSize);o.push({node:d,from:m,to:c})});let n=t-V,l=o.filter(d=>i?i.name===d.node.type.name:!0).filter(d=>q7(d.node.attrs,e,{strict:!1}));return r?!!l.length:l.reduce((d,p)=>d+p.to-p.from,0)>=n}var Kf=(H,C={})=>({state:e,dispatch:V})=>{let t=W1(H,e.schema);return j0(e,t,C)?wi(e,V):!1},Qf=()=>({state:H,dispatch:C})=>he(H,C),qf=H=>({state:C,dispatch:e})=>{let V=W1(H,C.schema);return Fi(V)(C,e)},jf=()=>({state:H,dispatch:C})=>ce(H,C);function V4(H,C){return C.nodes[H]?"node":C.marks[H]?"mark":null}function Pe(H,C){let e=typeof C=="string"?[C]:C;return Object.keys(H).reduce((V,t)=>(e.includes(t)||(V[t]=H[t]),V),{})}var Jf=(H,C)=>({tr:e,state:V,dispatch:t})=>{let r=null,i=null,o=V4(typeof H=="string"?H:H.name,V.schema);return o?(o==="node"&&(r=W1(H,V.schema)),o==="mark"&&(i=X5(H,V.schema)),t&&e.selection.ranges.forEach(n=>{V.doc.nodesBetween(n.$from.pos,n.$to.pos,(l,s)=>{r&&r===l.type&&e.setNodeMarkup(s,void 0,Pe(l.attrs,C)),i&&l.marks.length&&l.marks.forEach(d=>{i===d.type&&e.addMark(s,s+l.nodeSize,i.create(Pe(d.attrs,C)))})})}),!0):!1},Xf=()=>({tr:H,dispatch:C})=>(C&&H.scrollIntoView(),!0),Yf=()=>({tr:H,commands:C})=>C.setTextSelection({from:0,to:H.doc.content.size}),Cx=()=>({state:H,dispatch:C})=>Ae(H,C),ex=()=>({state:H,dispatch:C})=>ue(H,C),Hx=()=>({state:H,dispatch:C})=>Ti(H,C),Vx=()=>({state:H,dispatch:C})=>Se(H,C),tx=()=>({state:H,dispatch:C})=>Ze(H,C);function K9(H,C,e={},V={}){return j7(H,C,{slice:!1,parseOptions:e,errorOnInvalidContent:V.errorOnInvalidContent})}var Lx=(H,C=!1,e={},V={})=>({editor:t,tr:r,dispatch:i,commands:o})=>{var n,l;let{doc:s}=r;if(e.preserveWhitespace!=="full"){let d=K9(H,t.schema,e,{errorOnInvalidContent:(n=V.errorOnInvalidContent)!==null&&n!==void 0?n:t.options.enableContentCheck});return i&&r.replaceWith(0,s.content.size,d).setMeta("preventUpdate",!C),!0}return i&&r.setMeta("preventUpdate",!C),o.insertContentAt({from:0,to:s.content.size},H,{parseOptions:e,errorOnInvalidContent:(l=V.errorOnInvalidContent)!==null&&l!==void 0?l:t.options.enableContentCheck})};function Ue(H,C){let e=X5(C,H.schema),{from:V,to:t,empty:r}=H.selection,i=[];r?(H.storedMarks&&i.push(...H.storedMarks),i.push(...H.selection.$head.marks())):H.doc.nodesBetween(V,t,n=>{i.push(...n.marks)});let o=i.find(n=>n.type.name===e.name);return o?{...o.attrs}:{}}function Ge(H,C){let e=new F0(H);return C.forEach(V=>{V.steps.forEach(t=>{e.step(t)})}),e}function Yi(H){for(let C=0;C<H.edgeCount;C+=1){let{type:e}=H.edge(C);if(e.isTextblock&&!e.hasRequiredAttrs())return e}return null}function rx(H,C){let e=[];return H.descendants((V,t)=>{C(V)&&e.push({node:V,pos:t})}),e}function $e(H,C,e){let V=[];return H.nodesBetween(C.from,C.to,(t,r)=>{e(t)&&V.push({node:t,pos:r})}),V}function CM(H,C){for(let e=H.depth;e>0;e-=1){let V=H.node(e);if(C(V))return{pos:e>0?H.before(e):0,start:H.start(e),depth:e,node:V}}}function t4(H){return C=>CM(C.$from,H)}function Y9(H,C){let e=$9.resolve(H);return Ne(e,C)}function ix(H,C){let e=Y9(C),V=Z2.fromJSON(e,H);return C4(V.content,e)}function Mx(H,C){let e=Y9(C),V=Q0(H);return h5.fromSchema(e).parse(V).toJSON()}function Ke(H,C){let e={from:0,to:H.content.size};return Ie(H,e,C)}function ox(H,C,e){let{blockSeparator:V=`

`,textSerializers:t={}}=e||{},r=Y9(C),i=Z2.fromJSON(r,H);return Ke(i,{blockSeparator:V,textSerializers:{...J9(r),...t}})}function eM(H,C){let e=W1(C,H.schema),{from:V,to:t}=H.selection,r=[];H.doc.nodesBetween(V,t,o=>{r.push(o)});let i=r.reverse().find(o=>o.type.name===e.name);return i?{...i.attrs}:{}}function C6(H,C){let e=V4(typeof C=="string"?C:C.name,H.schema);return e==="node"?eM(H,C):e==="mark"?Ue(H,C):{}}function HM(H,C=JSON.stringify){let e={};return H.filter(V=>{let t=C(V);return Object.prototype.hasOwnProperty.call(e,t)?!1:e[t]=!0})}function nx(H){let C=HM(H);return C.length===1?C:C.filter((e,V)=>!C.filter((r,i)=>i!==V).some(r=>e.oldRange.from>=r.oldRange.from&&e.oldRange.to<=r.oldRange.to&&e.newRange.from>=r.newRange.from&&e.newRange.to<=r.newRange.to))}function Qe(H){let{mapping:C,steps:e}=H,V=[];return C.maps.forEach((t,r)=>{let i=[];if(t.ranges.length)t.forEach((o,n)=>{i.push({from:o,to:n})});else{let{from:o,to:n}=e[r];if(o===void 0||n===void 0)return;i.push({from:o,to:n})}i.forEach(({from:o,to:n})=>{let l=C.slice(r).map(o,-1),s=C.slice(r).map(n),d=C.invert().map(l,-1),p=C.invert().map(s);V.push({oldRange:{from:d,to:p},newRange:{from:l,to:s}})})}),nx(V)}function VM(H,C=0){let V=H.type===H.type.schema.topNodeType?0:1,t=C,r=t+H.nodeSize,i=H.marks.map(l=>{let s={type:l.type.name};return Object.keys(l.attrs).length&&(s.attrs={...l.attrs}),s}),o={...H.attrs},n={type:H.type.name,from:t,to:r};return Object.keys(o).length&&(n.attrs=o),i.length&&(n.marks=i),H.content.childCount&&(n.content=[],H.forEach((l,s)=>{var d;(d=n.content)===null||d===void 0||d.push(VM(l,C+s+V))})),H.text&&(n.text=H.text),n}function L4(H,C,e){let V=[];return H===C?e.resolve(H).marks().forEach(t=>{let r=e.resolve(H),i=X9(r,t.type);i&&V.push({mark:t,...i})}):e.nodesBetween(H,C,(t,r)=>{!t||t?.nodeSize===void 0||V.push(...t.marks.map(i=>({from:r,to:r+t.nodeSize,mark:i})))}),V}var ax=(H,C,e,V=20)=>{let t=H.doc.resolve(e),r=V,i=null;for(;r>0&&i===null;){let o=t.node(r);o?.type.name===C?i=o:r-=1}return[i,r]};function Q7(H,C,e){return Object.fromEntries(Object.entries(e).filter(([V])=>{let t=H.find(r=>r.type===C&&r.name===V);return t?t.attribute.keepOnSplit:!1}))}function Q9(H,C,e={}){let{empty:V,ranges:t}=H.selection,r=C?X5(C,H.schema):null;if(V)return!!(H.storedMarks||H.selection.$from.marks()).filter(d=>r?r.name===d.type.name:!0).find(d=>q7(d.attrs,e,{strict:!1}));let i=0,o=[];if(t.forEach(({$from:d,$to:p})=>{let m=d.pos,c=p.pos;H.doc.nodesBetween(m,c,(h,S)=>{if(!h.isText&&!h.marks.length)return;let O=Math.max(m,S),E=Math.min(c,S+h.nodeSize),D=E-O;i+=D,o.push(...h.marks.map(N=>({mark:N,from:O,to:E})))})}),i===0)return!1;let n=o.filter(d=>r?r.name===d.mark.type.name:!0).filter(d=>q7(d.mark.attrs,e,{strict:!1})).reduce((d,p)=>d+p.to-p.from,0),l=o.filter(d=>r?d.mark.type!==r&&d.mark.type.excludes(r):!0).reduce((d,p)=>d+p.to-p.from,0);return(n>0?n+l:n)>=i}function tM(H,C,e={}){if(!C)return j0(H,null,e)||Q9(H,null,e);let V=V4(C,H.schema);return V==="node"?j0(H,C,e):V==="mark"?Q9(H,C,e):!1}var lx=(H,C)=>{let{$from:e,$to:V,$anchor:t}=H.selection;if(C){let r=t4(o=>o.type.name===C)(H.selection);if(!r)return!1;let i=H.doc.resolve(r.pos+1);return t.pos+1===i.end()}return!(V.parentOffset<V.parent.nodeSize-2||e.pos!==V.pos)},sx=H=>{let{$from:C,$to:e}=H.selection;return!(C.parentOffset>0||C.pos!==e.pos)};function Be(H,C){let{nodeExtensions:e}=Y7(C),V=e.find(i=>i.name===H);if(!V)return!1;let t={name:V.name,options:V.options,storage:V.storage},r=e1(U(V,"group",t));return typeof r!="string"?!1:r.split(" ").includes("list")}function J0(H,{checkChildren:C=!0,ignoreWhitespace:e=!1}={}){var V;if(e){if(H.type.name==="hardBreak")return!0;if(H.isText)return/^\s*$/m.test((V=H.text)!==null&&V!==void 0?V:"")}if(H.isText)return!H.text;if(H.isAtom||H.isLeaf)return!1;if(H.content.childCount===0)return!0;if(C){let t=!0;return H.content.forEach(r=>{t!==!1&&(J0(r,{ignoreWhitespace:e,checkChildren:C})||(t=!1))}),t}return!1}function Ax(H){return H instanceof K}function dx(H,C,e){let t=H.state.doc.content.size,r=g5(C,0,t),i=g5(e,0,t),o=H.coordsAtPos(r),n=H.coordsAtPos(i,-1),l=Math.min(o.top,n.top),s=Math.max(o.bottom,n.bottom),d=Math.min(o.left,n.left),p=Math.max(o.right,n.right),m=p-d,c=s-l,O={top:l,bottom:s,left:d,right:p,width:m,height:c,x:d,y:l};return{...O,toJSON:()=>O}}function px(H,C,e){var V;let{selection:t}=C,r=null;if(_e(t)&&(r=t.$cursor),r){let o=(V=H.storedMarks)!==null&&V!==void 0?V:r.marks();return!!e.isInSet(o)||!o.some(n=>n.type.excludes(e))}let{ranges:i}=t;return i.some(({$from:o,$to:n})=>{let l=o.depth===0?H.doc.inlineContent&&H.doc.type.allowsMarkType(e):!1;return H.doc.nodesBetween(o.pos,n.pos,(s,d,p)=>{if(l)return!1;if(s.isInline){let m=!p||p.type.allowsMarkType(e),c=!!e.isInSet(s.marks)||!s.marks.some(h=>h.type.excludes(e));l=m&&c}return!l}),l})}var ux=(H,C={})=>({tr:e,state:V,dispatch:t})=>{let{selection:r}=e,{empty:i,ranges:o}=r,n=X5(H,V.schema);if(t)if(i){let l=Ue(V,n);e.addStoredMark(n.create({...l,...C}))}else o.forEach(l=>{let s=l.$from.pos,d=l.$to.pos;V.doc.nodesBetween(s,d,(p,m)=>{let c=Math.max(m,s),h=Math.min(m+p.nodeSize,d);p.marks.find(O=>O.type===n)?p.marks.forEach(O=>{n===O.type&&e.addMark(c,h,n.create({...O.attrs,...C}))}):e.addMark(c,h,n.create(C))})});return px(V,e,n)},mx=(H,C)=>({tr:e})=>(e.setMeta(H,C),!0),cx=(H,C={})=>({state:e,dispatch:V,chain:t})=>{let r=W1(H,e.schema),i;return e.selection.$anchor.sameParent(e.selection.$head)&&(i=e.selection.$anchor.parent.attrs),r.isTextblock?t().command(({commands:o})=>ge(r,{...i,...C})(e)?!0:o.clearNodes()).command(({state:o})=>ge(r,{...i,...C})(o,V)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},fx=H=>({tr:C,dispatch:e})=>{if(e){let{doc:V}=C,t=g5(H,0,V.content.size),r=K.create(V,t);C.setSelection(r)}return!0},xx=H=>({tr:C,dispatch:e})=>{if(e){let{doc:V}=C,{from:t,to:r}=typeof H=="number"?{from:H,to:H}:H,i=H1.atStart(V).from,o=H1.atEnd(V).to,n=g5(t,i,o),l=g5(r,i,o),s=H1.create(V,n,l);C.setSelection(s)}return!0},vx=H=>({state:C,dispatch:e})=>{let V=W1(H,C.schema);return Di(V)(C,e)};function _i(H,C){let e=H.storedMarks||H.selection.$to.parentOffset&&H.selection.$from.marks();if(e){let V=e.filter(t=>C?.includes(t.type.name));H.tr.ensureMarks(V)}}var hx=({keepMarks:H=!0}={})=>({tr:C,state:e,dispatch:V,editor:t})=>{let{selection:r,doc:i}=C,{$from:o,$to:n}=r,l=t.extensionManager.attributes,s=Q7(l,o.node().type.name,o.node().attrs);if(r instanceof K&&r.node.isBlock)return!o.parentOffset||!K2(i,o.pos)?!1:(V&&(H&&_i(e,t.extensionManager.splittableMarks),C.split(o.pos).scrollIntoView()),!0);if(!o.parent.isBlock)return!1;let d=n.parentOffset===n.parent.content.size,p=o.depth===0?void 0:Yi(o.node(-1).contentMatchAt(o.indexAfter(-1))),m=d&&p?[{type:p,attrs:s}]:void 0,c=K2(C.doc,C.mapping.map(o.pos),1,m);if(!m&&!c&&K2(C.doc,C.mapping.map(o.pos),1,p?[{type:p}]:void 0)&&(c=!0,m=p?[{type:p,attrs:s}]:void 0),V){if(c&&(r instanceof H1&&C.deleteSelection(),C.split(C.mapping.map(o.pos),1,m),p&&!d&&!o.parentOffset&&o.parent.type!==p)){let h=C.mapping.map(o.before()),S=C.doc.resolve(h);o.node(-1).canReplaceWith(S.index(),S.index()+1,p)&&C.setNodeMarkup(C.mapping.map(o.before()),p)}H&&_i(e,t.extensionManager.splittableMarks),C.scrollIntoView()}return c},Zx=(H,C={})=>({tr:e,state:V,dispatch:t,editor:r})=>{var i;let o=W1(H,V.schema),{$from:n,$to:l}=V.selection,s=V.selection.node;if(s&&s.isBlock||n.depth<2||!n.sameParent(l))return!1;let d=n.node(-1);if(d.type!==o)return!1;let p=r.extensionManager.attributes;if(n.parent.content.size===0&&n.node(-1).childCount===n.indexAfter(-1)){if(n.depth===2||n.node(-3).type!==o||n.index(-2)!==n.node(-2).childCount-1)return!1;if(t){let O=B.empty,E=n.index(-1)?1:n.index(-2)?2:3;for(let i1=n.depth-E;i1>=n.depth-3;i1-=1)O=B.from(n.node(i1).copy(O));let D=n.indexAfter(-1)<n.node(-2).childCount?1:n.indexAfter(-2)<n.node(-3).childCount?2:3,N={...Q7(p,n.node().type.name,n.node().attrs),...C},R=((i=o.contentMatch.defaultType)===null||i===void 0?void 0:i.createAndFill(N))||void 0;O=O.append(B.from(o.createAndFill(null,R)||void 0));let W=n.before(n.depth-(E-1));e.replace(W,n.after(-D),new _(O,4-E,0));let X=-1;e.doc.nodesBetween(W,e.doc.content.size,(i1,$)=>{if(X>-1)return!1;i1.isTextblock&&i1.content.size===0&&(X=$+1)}),X>-1&&e.setSelection(H1.near(e.doc.resolve(X))),e.scrollIntoView()}return!0}let m=l.pos===n.end()?d.contentMatchAt(0).defaultType:null,c={...Q7(p,d.type.name,d.attrs),...C},h={...Q7(p,n.node().type.name,n.node().attrs),...C};e.delete(n.pos,l.pos);let S=m?[{type:o,attrs:c},{type:m,attrs:h}]:[{type:o,attrs:c}];if(!K2(e.doc,n.pos,2))return!1;if(t){let{selection:O,storedMarks:E}=V,{splittableMarks:D}=r.extensionManager,N=E||O.$to.parentOffset&&O.$from.marks();if(e.split(n.pos,2,S).scrollIntoView(),!N||!t)return!0;let R=N.filter(W=>D.includes(W.type.name));e.ensureMarks(R)}return!0},ye=(H,C)=>{let e=t4(i=>i.type===C)(H.selection);if(!e)return!0;let V=H.doc.resolve(Math.max(0,e.pos-1)).before(e.depth);if(V===void 0)return!0;let t=H.doc.nodeAt(V);return e.node.type===t?.type&&a5(H.doc,e.pos)&&H.join(e.pos),!0},ke=(H,C)=>{let e=t4(i=>i.type===C)(H.selection);if(!e)return!0;let V=H.doc.resolve(e.start).after(e.depth);if(V===void 0)return!0;let t=H.doc.nodeAt(V);return e.node.type===t?.type&&a5(H.doc,V)&&H.join(V),!0},Sx=(H,C,e,V={})=>({editor:t,tr:r,state:i,dispatch:o,chain:n,commands:l,can:s})=>{let{extensions:d,splittableMarks:p}=t.extensionManager,m=W1(H,i.schema),c=W1(C,i.schema),{selection:h,storedMarks:S}=i,{$from:O,$to:E}=h,D=O.blockRange(E),N=S||h.$to.parentOffset&&h.$from.marks();if(!D)return!1;let R=t4(W=>Be(W.type.name,d))(h);if(D.depth>=1&&R&&D.depth-R.depth<=1){if(R.node.type===m)return l.liftListItem(c);if(Be(R.node.type.name,d)&&m.validContent(R.node.content)&&o)return n().command(()=>(r.setNodeMarkup(R.pos,m),!0)).command(()=>ye(r,m)).command(()=>ke(r,m)).run()}return!e||!N||!o?n().command(()=>s().wrapInList(m,V)?!0:l.clearNodes()).wrapInList(m,V).command(()=>ye(r,m)).command(()=>ke(r,m)).run():n().command(()=>{let W=s().wrapInList(m,V),X=N.filter(i1=>p.includes(i1.type.name));return r.ensureMarks(X),W?!0:l.clearNodes()}).wrapInList(m,V).command(()=>ye(r,m)).command(()=>ke(r,m)).run()},gx=(H,C={},e={})=>({state:V,commands:t})=>{let{extendEmptyMarkRange:r=!1}=e,i=X5(H,V.schema);return Q9(V,i,C)?t.unsetMark(i,{extendEmptyMarkRange:r}):t.setMark(i,C)},Ox=(H,C,e={})=>({state:V,commands:t})=>{let r=W1(H,V.schema),i=W1(C,V.schema),o=j0(V,r,e),n;return V.selection.$anchor.sameParent(V.selection.$head)&&(n=V.selection.$anchor.parent.attrs),o?t.setNode(i,n):t.setNode(r,{...n,...e})},yx=(H,C={})=>({state:e,commands:V})=>{let t=W1(H,e.schema);return j0(e,t,C)?V.lift(t):V.wrapIn(t,C)},kx=()=>({state:H,dispatch:C})=>{let e=H.plugins;for(let V=0;V<e.length;V+=1){let t=e[V],r;if(t.spec.isInputRules&&(r=t.getState(H))){if(C){let i=H.tr,o=r.transform;for(let n=o.steps.length-1;n>=0;n-=1)i.step(o.steps[n].invert(o.docs[n]));if(r.text){let n=i.doc.resolve(r.from).marks();i.replaceWith(r.from,r.to,H.schema.text(r.text,n))}else i.delete(r.from,r.to)}return!0}}return!1},bx=()=>({tr:H,dispatch:C})=>{let{selection:e}=H,{empty:V,ranges:t}=e;return V||C&&t.forEach(r=>{H.removeMark(r.$from.pos,r.$to.pos)}),!0},wx=(H,C={})=>({tr:e,state:V,dispatch:t})=>{var r;let{extendEmptyMarkRange:i=!1}=C,{selection:o}=e,n=X5(H,V.schema),{$from:l,empty:s,ranges:d}=o;if(!t)return!0;if(s&&i){let{from:p,to:m}=o,c=(r=l.marks().find(S=>S.type===n))===null||r===void 0?void 0:r.attrs,h=X9(l,n,c);h&&(p=h.from,m=h.to),e.removeMark(p,m,n)}else d.forEach(p=>{e.removeMark(p.$from.pos,p.$to.pos,n)});return e.removeStoredMark(n),!0},Tx=(H,C={})=>({tr:e,state:V,dispatch:t})=>{let r=null,i=null,o=V4(typeof H=="string"?H:H.name,V.schema);return o?(o==="node"&&(r=W1(H,V.schema)),o==="mark"&&(i=X5(H,V.schema)),t&&e.selection.ranges.forEach(n=>{let l=n.$from.pos,s=n.$to.pos,d,p,m,c;e.selection.empty?V.doc.nodesBetween(l,s,(h,S)=>{r&&r===h.type&&(m=Math.max(S,l),c=Math.min(S+h.nodeSize,s),d=S,p=h)}):V.doc.nodesBetween(l,s,(h,S)=>{S<l&&r&&r===h.type&&(m=Math.max(S,l),c=Math.min(S+h.nodeSize,s),d=S,p=h),S>=l&&S<=s&&(r&&r===h.type&&e.setNodeMarkup(S,void 0,{...h.attrs,...C}),i&&h.marks.length&&h.marks.forEach(O=>{if(i===O.type){let E=Math.max(S,l),D=Math.min(S+h.nodeSize,s);e.addMark(E,D,i.create({...O.attrs,...C}))}}))}),p&&(d!==void 0&&e.setNodeMarkup(d,void 0,{...p.attrs,...C}),i&&p.marks.length&&p.marks.forEach(h=>{i===h.type&&e.addMark(m,c,i.create({...h.attrs,...C}))}))}),!0):!1},Px=(H,C={})=>({state:e,dispatch:V})=>{let t=W1(H,e.schema);return Ei(t,C)(e,V)},Bx=(H,C={})=>({state:e,dispatch:V})=>{let t=W1(H,e.schema);return Ri(t,C)(e,V)},Ex=Object.freeze({__proto__:null,blur:mf,clearContent:cf,clearNodes:ff,command:xf,createParagraphNear:vf,cut:hf,deleteCurrentNode:Zf,deleteNode:Sf,deleteRange:gf,deleteSelection:Of,enter:yf,exitCode:kf,extendMarkRange:bf,first:wf,focus:Tf,forEach:Pf,insertContent:Bf,insertContentAt:Rf,joinBackward:Nf,joinDown:Df,joinForward:If,joinItemBackward:_f,joinItemForward:Wf,joinTextblockBackward:zf,joinTextblockForward:Uf,joinUp:Ff,keyboardShortcut:$f,lift:Kf,liftEmptyBlock:Qf,liftListItem:qf,newlineInCode:jf,resetAttributes:Jf,scrollIntoView:Xf,selectAll:Yf,selectNodeBackward:Cx,selectNodeForward:ex,selectParentNode:Hx,selectTextblockEnd:Vx,selectTextblockStart:tx,setContent:Lx,setMark:ux,setMeta:mx,setNode:cx,setNodeSelection:fx,setTextSelection:xx,sinkListItem:vx,splitBlock:hx,splitListItem:Zx,toggleList:Sx,toggleMark:gx,toggleNode:Ox,toggleWrap:yx,undoInputRule:kx,unsetAllMarks:bx,unsetMark:wx,updateAttributes:Tx,wrapIn:Px,wrapInList:Bx}),LM=z1.create({name:"commands",addCommands(){return{...Ex}}}),rM=z1.create({name:"drop",addProseMirrorPlugins(){return[new f1({key:new _1("tiptapDrop"),props:{handleDrop:(H,C,e,V)=>{this.editor.emit("drop",{editor:this.editor,event:C,slice:e,moved:V})}}})]}}),iM=z1.create({name:"editable",addProseMirrorPlugins(){return[new f1({key:new _1("editable"),props:{editable:()=>this.editor.options.editable}})]}}),MM=z1.create({name:"focusEvents",addProseMirrorPlugins(){let{editor:H}=this;return[new f1({key:new _1("focusEvents"),props:{handleDOMEvents:{focus:(C,e)=>{H.isFocused=!0;let V=H.state.tr.setMeta("focus",{event:e}).setMeta("addToHistory",!1);return C.dispatch(V),!1},blur:(C,e)=>{H.isFocused=!1;let V=H.state.tr.setMeta("blur",{event:e}).setMeta("addToHistory",!1);return C.dispatch(V),!1}}}})]}}),oM=z1.create({name:"keymap",addKeyboardShortcuts(){let H=()=>this.editor.commands.first(({commands:i})=>[()=>i.undoInputRule(),()=>i.command(({tr:o})=>{let{selection:n,doc:l}=o,{empty:s,$anchor:d}=n,{pos:p,parent:m}=d,c=d.parent.isTextblock&&p>0?o.doc.resolve(p-1):d,h=c.parent.type.spec.isolating,S=d.pos-d.parentOffset,O=h&&c.parent.childCount===1?S===d.pos:J.atStart(l).from===p;return!s||!m.type.isTextblock||m.textContent.length||!O||O&&d.parent.type.name==="paragraph"?!1:i.clearNodes()}),()=>i.deleteSelection(),()=>i.joinBackward(),()=>i.selectNodeBackward()]),C=()=>this.editor.commands.first(({commands:i})=>[()=>i.deleteSelection(),()=>i.deleteCurrentNode(),()=>i.joinForward(),()=>i.selectNodeForward()]),V={Enter:()=>this.editor.commands.first(({commands:i})=>[()=>i.newlineInCode(),()=>i.createParagraphNear(),()=>i.liftEmptyBlock(),()=>i.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:H,"Mod-Backspace":H,"Shift-Backspace":H,Delete:C,"Mod-Delete":C,"Mod-a":()=>this.editor.commands.selectAll()},t={...V},r={...V,"Ctrl-h":H,"Alt-Backspace":H,"Ctrl-d":C,"Ctrl-Alt-Backspace":C,"Alt-Delete":C,"Alt-d":C,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return H4()||ze()?r:t},addProseMirrorPlugins(){return[new f1({key:new _1("clearDocument"),appendTransaction:(H,C,e)=>{let V=H.some(h=>h.docChanged)&&!C.doc.eq(e.doc),t=H.some(h=>h.getMeta("preventClearDocument"));if(!V||t)return;let{empty:r,from:i,to:o}=C.selection,n=J.atStart(C.doc).from,l=J.atEnd(C.doc).to;if(r||!(i===n&&o===l)||!J0(e.doc))return;let p=e.tr,m=X7({state:e,transaction:p}),{commands:c}=new t0({editor:this.editor,state:m});if(c.clearNodes(),!!p.steps.length)return p}})]}}),nM=z1.create({name:"paste",addProseMirrorPlugins(){return[new f1({key:new _1("tiptapPaste"),props:{handlePaste:(H,C,e)=>{this.editor.emit("paste",{editor:this.editor,event:C,slice:e})}}})]}}),aM=z1.create({name:"tabindex",addProseMirrorPlugins(){return[new f1({key:new _1("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),Rx=Object.freeze({__proto__:null,ClipboardTextSerializer:qi,Commands:LM,Drop:rM,Editable:iM,FocusEvents:MM,Keymap:oM,Paste:nM,Tabindex:aM}),q9=class H{get name(){return this.node.type.name}constructor(C,e,V=!1,t=null){this.currentNode=null,this.actualDepth=null,this.isBlock=V,this.resolvedPos=C,this.editor=e,this.currentNode=t}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var C;return(C=this.actualDepth)!==null&&C!==void 0?C:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(C){let e=this.from,V=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can\u2019t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}e=this.from+1,V=this.to-1}this.editor.commands.insertContentAt({from:e,to:V},C)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;let C=this.resolvedPos.start(this.resolvedPos.depth-1),e=this.resolvedPos.doc.resolve(C);return new H(e,this.editor)}get before(){let C=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return C.depth!==this.depth&&(C=this.resolvedPos.doc.resolve(this.from-3)),new H(C,this.editor)}get after(){let C=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return C.depth!==this.depth&&(C=this.resolvedPos.doc.resolve(this.to+3)),new H(C,this.editor)}get children(){let C=[];return this.node.content.forEach((e,V)=>{let t=e.isBlock&&!e.isTextblock,r=e.isAtom&&!e.isText,i=this.pos+V+(r?0:1),o=this.resolvedPos.doc.resolve(i);if(!t&&o.depth<=this.depth)return;let n=new H(o,this.editor,t,t?e:null);t&&(n.actualDepth=this.depth+1),C.push(new H(o,this.editor,t,t?e:null))}),C}get firstChild(){return this.children[0]||null}get lastChild(){let C=this.children;return C[C.length-1]||null}closest(C,e={}){let V=null,t=this.parent;for(;t&&!V;){if(t.node.type.name===C)if(Object.keys(e).length>0){let r=t.node.attrs,i=Object.keys(e);for(let o=0;o<i.length;o+=1){let n=i[o];if(r[n]!==e[n])break}}else V=t;t=t.parent}return V}querySelector(C,e={}){return this.querySelectorAll(C,e,!0)[0]||null}querySelectorAll(C,e={},V=!1){let t=[];if(!this.children||this.children.length===0)return t;let r=Object.keys(e);return this.children.forEach(i=>{V&&t.length>0||(i.node.type.name===C&&r.every(n=>e[n]===i.node.attrs[n])&&t.push(i),!(V&&t.length>0)&&(t=t.concat(i.querySelectorAll(C,e,V))))}),t}setAttribute(C){let{tr:e}=this.editor.state;e.setNodeMarkup(this.from,void 0,{...this.node.attrs,...C}),this.editor.view.dispatch(e)}},Fx=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function lM(H,C,e){let V=document.querySelector(`style[data-tiptap-style${e?`-${e}`:""}]`);if(V!==null)return V;let t=document.createElement("style");return C&&t.setAttribute("nonce",C),t.setAttribute(`data-tiptap-style${e?`-${e}`:""}`,""),t.innerHTML=H,document.getElementsByTagName("head")[0].appendChild(t),t}var J7=class extends be{constructor(C={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:e})=>{throw e},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(C),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:e,slice:V,moved:t})=>this.options.onDrop(e,V,t)),this.on("paste",({event:e,slice:V})=>this.options.onPaste(e,V)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=lM(Fx,this.options.injectNonce))}setOptions(C={}){this.options={...this.options,...C},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(C,e=!0){this.setOptions({editable:C}),e&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(C,e){let V=De(e)?e(C,[...this.state.plugins]):[...this.state.plugins,C],t=this.state.reconfigure({plugins:V});return this.view.updateState(t),t}unregisterPlugin(C){if(this.isDestroyed)return;let e=this.state.plugins,V=e;if([].concat(C).forEach(r=>{let i=typeof r=="string"?`${r}$`:r.key;V=e.filter(o=>!o.key.startsWith(i))}),e.length===V.length)return;let t=this.state.reconfigure({plugins:V});return this.view.updateState(t),t}createExtensionManager(){var C,e;let t=[...this.options.enableCoreExtensions?[iM,qi.configure({blockSeparator:(e=(C=this.options.coreExtensionOptions)===null||C===void 0?void 0:C.clipboardTextSerializer)===null||e===void 0?void 0:e.blockSeparator}),LM,MM,oM,aM,rM,nM].filter(r=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[r.name]!==!1:!0):[],...this.options.extensions].filter(r=>["extension","node","mark"].includes(r?.type));this.extensionManager=new $9(t,this)}createCommandManager(){this.commandManager=new t0({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var C;let e;try{e=K9(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(i){if(!(i instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(i.message))throw i;this.emit("contentError",{editor:this,error:i,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(o=>o.name!=="collaboration"),this.createExtensionManager()}}),e=K9(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}let V=We(e,this.options.autofocus);this.view=new F9(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(C=this.options.editorProps)===null||C===void 0?void 0:C.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:g9.create({doc:e,selection:V||void 0})});let t=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(t),this.createNodeViews(),this.prependClass();let r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(C){this.isCapturingTransaction=!0,C(),this.isCapturingTransaction=!1;let e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(C){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=C;return}C.steps.forEach(i=>{var o;return(o=this.capturedTransaction)===null||o===void 0?void 0:o.step(i)});return}let e=this.state.apply(C),V=!this.state.selection.eq(e.selection);this.emit("beforeTransaction",{editor:this,transaction:C,nextState:e}),this.view.updateState(e),this.emit("transaction",{editor:this,transaction:C}),V&&this.emit("selectionUpdate",{editor:this,transaction:C});let t=C.getMeta("focus"),r=C.getMeta("blur");t&&this.emit("focus",{editor:this,event:t.event,transaction:C}),r&&this.emit("blur",{editor:this,event:r.event,transaction:C}),!(!C.docChanged||C.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:C})}getAttributes(C){return C6(this.state,C)}isActive(C,e){let V=typeof C=="string"?C:null,t=typeof C=="string"?e:C;return tM(this.state,V,t)}getJSON(){return this.state.doc.toJSON()}getHTML(){return C4(this.state.doc.content,this.schema)}getText(C){let{blockSeparator:e=`

`,textSerializers:V={}}=C||{};return Ke(this.state.doc,{blockSeparator:e,textSerializers:{...J9(this.schema),...V}})}get isEmpty(){return J0(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){let C=this.view.dom;C&&C.editor&&delete C.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var C;return!(!((C=this.view)===null||C===void 0)&&C.docView)}$node(C,e){var V;return((V=this.$doc)===null||V===void 0?void 0:V.querySelector(C,e))||null}$nodes(C,e){var V;return((V=this.$doc)===null||V===void 0?void 0:V.querySelectorAll(C,e))||null}$pos(C){let e=this.state.doc.resolve(C);return new q9(e,this)}get $doc(){return this.$pos(0)}};function Y5(H){return new g3({find:H.find,handler:({state:C,range:e,match:V})=>{let t=e1(H.getAttributes,void 0,V);if(t===!1||t===null)return null;let{tr:r}=C,i=V[V.length-1],o=V[0];if(i){let n=o.search(/\S/),l=e.from+o.indexOf(i),s=l+i.length;if(L4(e.from,e.to,C.doc).filter(m=>m.mark.type.excluded.find(h=>h===H.type&&h!==m.mark.type)).filter(m=>m.to>l).length)return null;s<e.to&&r.delete(s,e.to),l>e.from&&r.delete(e.from+n,l);let p=e.from+n+i.length;r.addMark(e.from+n,p,H.type.create(t||{})),r.removeStoredMark(H.type)}}})}function Dx(H){return new g3({find:H.find,handler:({state:C,range:e,match:V})=>{let t=e1(H.getAttributes,void 0,V)||{},{tr:r}=C,i=e.from,o=e.to,n=H.type.create(t);if(V[1]){let l=V[0].lastIndexOf(V[1]),s=i+l;s>o?s=o:o=s+V[1].length;let d=V[0][V[0].length-1];r.insertText(d,i+V[0].length-1),r.replaceWith(s,o,n)}else if(V[0]){let l=H.type.isInline?i:i-1;r.insert(l,H.type.create(t)).delete(r.mapping.map(i),r.mapping.map(o))}r.scrollIntoView()}})}function Nx(H){return new g3({find:H.find,handler:({state:C,range:e,match:V})=>{let t=C.doc.resolve(e.from),r=e1(H.getAttributes,void 0,V)||{};if(!t.node(-1).canReplaceWith(t.index(-1),t.indexAfter(-1),H.type))return null;C.tr.delete(e.from,e.to).setBlockType(e.from,e.from,H.type,r)}})}function Ix(H){return new g3({find:H.find,handler:({state:C,range:e,match:V})=>{let t=H.replace,r=e.from,i=e.to;if(V[1]){let o=V[0].lastIndexOf(V[1]);t+=V[0].slice(o+V[1].length),r+=o;let n=r-i;n>0&&(t=V[0].slice(o-n,o)+t,r=i)}C.tr.insertText(t,r,i)}})}function C3(H){return new g3({find:H.find,handler:({state:C,range:e,match:V,chain:t})=>{let r=e1(H.getAttributes,void 0,V)||{},i=C.tr.delete(e.from,e.to),n=i.doc.resolve(e.from).blockRange(),l=n&&D0(n,H.type,r);if(!l)return null;if(i.wrap(n,l),H.keepMarks&&H.editor){let{selection:d,storedMarks:p}=C,{splittableMarks:m}=H.editor.extensionManager,c=p||d.$to.parentOffset&&d.$from.marks();if(c){let h=c.filter(S=>m.includes(S.type.name));i.ensureMarks(h)}}if(H.keepAttributes){let d=H.type.name==="bulletList"||H.type.name==="orderedList"?"listItem":"taskList";t().updateAttributes(d,r).run()}let s=i.doc.resolve(e.from-1).nodeBefore;s&&s.type===H.type&&a5(i.doc,e.from-1)&&(!H.joinPredicate||H.joinPredicate(V,s))&&i.join(e.from-1)}})}var U1=class H{constructor(C={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...C},this.name=this.config.name,C.defaultOptions&&Object.keys(C.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=e1(U(this,"addOptions",{name:this.name}))),this.storage=e1(U(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(C={}){return new H(C)}configure(C={}){let e=this.extend({...this.config,addOptions:()=>e4(this.options,C)});return e.name=this.name,e.parent=this.parent,e}extend(C={}){let e=new H(C);return e.parent=this,this.child=e,e.name=C.name?C.name:e.parent.name,C.defaultOptions&&Object.keys(C.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${e.name}".`),e.options=e1(U(e,"addOptions",{name:e.name})),e.storage=e1(U(e,"addStorage",{name:e.name,options:e.options})),e}};function _x(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}var Ee=class{constructor(C,e,V){this.isDragging=!1,this.component=C,this.editor=e.editor,this.options={stopEvent:null,ignoreMutation:null,...V},this.extension=e.extension,this.node=e.node,this.decorations=e.decorations,this.innerDecorations=e.innerDecorations,this.view=e.view,this.HTMLAttributes=e.HTMLAttributes,this.getPos=e.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(C){var e,V,t,r,i,o,n;let{view:l}=this.editor,s=C.target,d=s.nodeType===3?(e=s.parentElement)===null||e===void 0?void 0:e.closest("[data-drag-handle]"):s.closest("[data-drag-handle]");if(!this.dom||!((V=this.contentDOM)===null||V===void 0)&&V.contains(s)||!d)return;let p=0,m=0;if(this.dom!==d){let O=this.dom.getBoundingClientRect(),E=d.getBoundingClientRect(),D=(t=C.offsetX)!==null&&t!==void 0?t:(r=C.nativeEvent)===null||r===void 0?void 0:r.offsetX,N=(i=C.offsetY)!==null&&i!==void 0?i:(o=C.nativeEvent)===null||o===void 0?void 0:o.offsetY;p=E.x-O.x+D,m=E.y-O.y+N}(n=C.dataTransfer)===null||n===void 0||n.setDragImage(this.dom,p,m);let c=this.getPos();if(typeof c!="number")return;let h=K.create(l.state.doc,c),S=l.state.tr.setSelection(h);l.dispatch(S)}stopEvent(C){var e;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:C});let V=C.target;if(!(this.dom.contains(V)&&!(!((e=this.contentDOM)===null||e===void 0)&&e.contains(V))))return!1;let r=C.type.startsWith("drag"),i=C.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(V.tagName)||V.isContentEditable)&&!i&&!r)return!0;let{isEditable:n}=this.editor,{isDragging:l}=this,s=!!this.node.type.spec.draggable,d=K.isSelectable(this.node),p=C.type==="copy",m=C.type==="paste",c=C.type==="cut",h=C.type==="mousedown";if(!s&&d&&r&&C.preventDefault(),s&&r&&!l)return C.preventDefault(),!1;if(s&&n&&!l&&h){let S=V.closest("[data-drag-handle]");S&&(this.dom===S||this.dom.contains(S))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(l||i||p||m||c||h&&d)}ignoreMutation(C){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:C}):this.node.isLeaf||this.node.isAtom?!0:C.type==="selection"||this.dom.contains(C.target)&&C.type==="childList"&&(H4()||_x())&&this.editor.isFocused&&[...Array.from(C.addedNodes),...Array.from(C.removedNodes)].every(V=>V.isContentEditable)?!1:this.contentDOM===C.target&&C.type==="attributes"?!0:!this.contentDOM.contains(C.target)}updateAttributes(C){this.editor.commands.command(({tr:e})=>{let V=this.getPos();return typeof V!="number"?!1:(e.setNodeMarkup(V,void 0,{...this.node.attrs,...C}),!0)})}deleteNode(){let C=this.getPos();if(typeof C!="number")return;let e=C+this.node.nodeSize;this.editor.commands.deleteRange({from:C,to:e})}};function A5(H){return new q0({find:H.find,handler:({state:C,range:e,match:V,pasteEvent:t})=>{let r=e1(H.getAttributes,void 0,V,t);if(r===!1||r===null)return null;let{tr:i}=C,o=V[V.length-1],n=V[0],l=e.to;if(o){let s=n.search(/\S/),d=e.from+n.indexOf(o),p=d+o.length;if(L4(e.from,e.to,C.doc).filter(c=>c.mark.type.excluded.find(S=>S===H.type&&S!==c.mark.type)).filter(c=>c.to>d).length)return null;p<e.to&&i.delete(p,e.to),d>e.from&&i.delete(e.from+s,d),l=e.from+s+o.length,i.addMark(e.from+s,l,H.type.create(r||{})),i.removeStoredMark(H.type)}}})}function Wx(H){return H.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function zx(H){return typeof H=="string"}function Ux(H){return new q0({find:H.find,handler({match:C,chain:e,range:V,pasteEvent:t}){let r=e1(H.getAttributes,void 0,C,t),i=e1(H.getContent,void 0,r);if(r===!1||r===null)return null;let o={type:H.type.name,attrs:r};i&&(o.content=i),C.input&&e().deleteRange(V).insertContentAt(V.from,o)}})}function Gx(H){return new q0({find:H.find,handler:({state:C,range:e,match:V})=>{let t=H.replace,r=e.from,i=e.to;if(V[1]){let o=V[0].lastIndexOf(V[1]);t+=V[0].slice(o+V[1].length),r+=o;let n=r-i;n>0&&(t=V[0].slice(o-n,o)+t,r=i)}C.tr.insertText(t,r,i)}})}var Re=class{constructor(C){this.transaction=C,this.currentStep=this.transaction.steps.length}map(C){let e=!1;return{position:this.transaction.steps.slice(this.currentStep).reduce((t,r)=>{let i=r.getMap().mapResult(t);return i.deleted&&(e=!0),i.pos},C),deleted:e}}};function sM(H={}){return new f1({view(C){return new je(C,H)}})}var je=class{constructor(C,e){var V;this.editorView=C,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(V=e.width)!==null&&V!==void 0?V:1,this.color=e.color===!1?void 0:e.color||"black",this.class=e.class,this.handlers=["dragover","dragend","drop","dragleave"].map(t=>{let r=i=>{this[t](i)};return C.dom.addEventListener(t,r),{name:t,handler:r}})}destroy(){this.handlers.forEach(({name:C,handler:e})=>this.editorView.dom.removeEventListener(C,e))}update(C,e){this.cursorPos!=null&&e.doc!=C.state.doc&&(this.cursorPos>C.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(C){C!=this.cursorPos&&(this.cursorPos=C,C==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let C=this.editorView.state.doc.resolve(this.cursorPos),e=!C.parent.inlineContent,V;if(e){let o=C.nodeBefore,n=C.nodeAfter;if(o||n){let l=this.editorView.nodeDOM(this.cursorPos-(o?o.nodeSize:0));if(l){let s=l.getBoundingClientRect(),d=o?s.bottom:s.top;o&&n&&(d=(d+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),V={left:s.left,right:s.right,top:d-this.width/2,bottom:d+this.width/2}}}}if(!V){let o=this.editorView.coordsAtPos(this.cursorPos);V={left:o.left-this.width/2,right:o.left+this.width/2,top:o.top,bottom:o.bottom}}let t=this.editorView.dom.offsetParent;this.element||(this.element=t.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",e),this.element.classList.toggle("prosemirror-dropcursor-inline",!e);let r,i;if(!t||t==document.body&&getComputedStyle(t).position=="static")r=-pageXOffset,i=-pageYOffset;else{let o=t.getBoundingClientRect();r=o.left-t.scrollLeft,i=o.top-t.scrollTop}this.element.style.left=V.left-r+"px",this.element.style.top=V.top-i+"px",this.element.style.width=V.right-V.left+"px",this.element.style.height=V.bottom-V.top+"px"}scheduleRemoval(C){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),C)}dragover(C){if(!this.editorView.editable)return;let e=this.editorView.posAtCoords({left:C.clientX,top:C.clientY}),V=e&&e.inside>=0&&this.editorView.state.doc.nodeAt(e.inside),t=V&&V.type.spec.disableDropCursor,r=typeof t=="function"?t(this.editorView,e,C):t;if(e&&!r){let i=e.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let o=v9(this.editorView.state.doc,i,this.editorView.dragging.slice);o!=null&&(i=o)}this.setCursor(i),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(C){(C.target==this.editorView.dom||!this.editorView.dom.contains(C.relatedTarget))&&this.setCursor(null)}};var AM=z1.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[sM(this.options)]}});var l2=class H extends J{constructor(C){super(C,C)}map(C,e){let V=C.resolve(e.map(this.head));return H.valid(V)?new H(V):J.near(V)}content(){return _.empty}eq(C){return C instanceof H&&C.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(C,e){if(typeof e.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new H(C.resolve(e.pos))}getBookmark(){return new Je(this.anchor)}static valid(C){let e=C.parent;if(e.isTextblock||!$x(C)||!Kx(C))return!1;let V=e.type.spec.allowGapCursor;if(V!=null)return V;let t=e.contentMatchAt(C.index()).defaultType;return t&&t.isTextblock}static findGapCursorFrom(C,e,V=!1){C:for(;;){if(!V&&H.valid(C))return C;let t=C.pos,r=null;for(let i=C.depth;;i--){let o=C.node(i);if(e>0?C.indexAfter(i)<o.childCount:C.index(i)>0){r=o.child(e>0?C.indexAfter(i):C.index(i)-1);break}else if(i==0)return null;t+=e;let n=C.doc.resolve(t);if(H.valid(n))return n}for(;;){let i=e>0?r.firstChild:r.lastChild;if(!i){if(r.isAtom&&!r.isText&&!K.isSelectable(r)){C=C.doc.resolve(t+r.nodeSize*e),V=!1;continue C}break}r=i,t+=e;let o=C.doc.resolve(t);if(H.valid(o))return o}return null}}};l2.prototype.visible=!1;l2.findFrom=l2.findGapCursorFrom;J.jsonID("gapcursor",l2);var Je=class H{constructor(C){this.pos=C}map(C){return new H(C.map(this.pos))}resolve(C){let e=C.resolve(this.pos);return l2.valid(e)?new l2(e):J.near(e)}};function $x(H){for(let C=H.depth;C>=0;C--){let e=H.index(C),V=H.node(C);if(e==0){if(V.type.spec.isolating)return!0;continue}for(let t=V.child(e-1);;t=t.lastChild){if(t.childCount==0&&!t.inlineContent||t.isAtom||t.type.spec.isolating)return!0;if(t.inlineContent)return!1}}return!0}function Kx(H){for(let C=H.depth;C>=0;C--){let e=H.indexAfter(C),V=H.node(C);if(e==V.childCount){if(V.type.spec.isolating)return!0;continue}for(let t=V.child(e);;t=t.firstChild){if(t.childCount==0&&!t.inlineContent||t.isAtom||t.type.spec.isolating)return!0;if(t.inlineContent)return!1}}return!0}function dM(){return new f1({props:{decorations:Jx,createSelectionBetween(H,C,e){return C.pos==e.pos&&l2.valid(e)?new l2(e):null},handleClick:qx,handleKeyDown:Qx,handleDOMEvents:{beforeinput:jx}}})}var Qx=ae({ArrowLeft:e6("horiz",-1),ArrowRight:e6("horiz",1),ArrowUp:e6("vert",-1),ArrowDown:e6("vert",1)});function e6(H,C){let e=H=="vert"?C>0?"down":"up":C>0?"right":"left";return function(V,t,r){let i=V.selection,o=C>0?i.$to:i.$from,n=i.empty;if(i instanceof H1){if(!r.endOfTextblock(e)||o.depth==0)return!1;n=!1,o=V.doc.resolve(C>0?o.after():o.before())}let l=l2.findGapCursorFrom(o,C,n);return l?(t&&t(V.tr.setSelection(new l2(l))),!0):!1}}function qx(H,C,e){if(!H||!H.editable)return!1;let V=H.state.doc.resolve(C);if(!l2.valid(V))return!1;let t=H.posAtCoords({left:e.clientX,top:e.clientY});return t&&t.inside>-1&&K.isSelectable(H.state.doc.nodeAt(t.inside))?!1:(H.dispatch(H.state.tr.setSelection(new l2(V))),!0)}function jx(H,C){if(C.inputType!="insertCompositionText"||!(H.state.selection instanceof l2))return!1;let{$from:e}=H.state.selection,V=e.parent.contentMatchAt(e.index()).findWrapping(H.state.schema.nodes.text);if(!V)return!1;let t=B.empty;for(let i=V.length-1;i>=0;i--)t=B.from(V[i].createAndFill(null,t));let r=H.state.tr.replace(e.pos,e.pos,new _(t,0,0));return r.setSelection(H1.near(r.doc.resolve(e.pos+1))),H.dispatch(r),!1}function Jx(H){if(!(H.selection instanceof l2))return null;let C=document.createElement("div");return C.className="ProseMirror-gapcursor",a2.create(H.doc,[J2.widget(H.selection.head,C,{key:"gapcursor"})])}var pM=z1.create({name:"gapCursor",addProseMirrorPlugins(){return[dM()]},extendNodeSchema(H){var C;let e={name:H.name,options:H.options,storage:H.storage};return{allowGapCursor:(C=e1(U(H,"allowGapCursor",e)))!==null&&C!==void 0?C:null}}});var uM=U1.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:H}){return["br",x1(this.options.HTMLAttributes,H)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:H,chain:C,state:e,editor:V})=>H.first([()=>H.exitCode(),()=>H.command(()=>{let{selection:t,storedMarks:r}=e;if(t.$from.parent.type.spec.isolating)return!1;let{keepMarks:i}=this.options,{splittableMarks:o}=V.extensionManager,n=r||t.$to.parentOffset&&t.$from.marks();return C().insertContent({type:this.name}).command(({tr:l,dispatch:s})=>{if(s&&n&&i){let d=n.filter(p=>o.includes(p.type.name));l.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}});var H6=200,V2=function(){};V2.prototype.append=function(C){return C.length?(C=V2.from(C),!this.length&&C||C.length<H6&&this.leafAppend(C)||this.length<H6&&C.leafPrepend(this)||this.appendInner(C)):this};V2.prototype.prepend=function(C){return C.length?V2.from(C).append(this):this};V2.prototype.appendInner=function(C){return new Xx(this,C)};V2.prototype.slice=function(C,e){return C===void 0&&(C=0),e===void 0&&(e=this.length),C>=e?V2.empty:this.sliceInner(Math.max(0,C),Math.min(this.length,e))};V2.prototype.get=function(C){if(!(C<0||C>=this.length))return this.getInner(C)};V2.prototype.forEach=function(C,e,V){e===void 0&&(e=0),V===void 0&&(V=this.length),e<=V?this.forEachInner(C,e,V,0):this.forEachInvertedInner(C,e,V,0)};V2.prototype.map=function(C,e,V){e===void 0&&(e=0),V===void 0&&(V=this.length);var t=[];return this.forEach(function(r,i){return t.push(C(r,i))},e,V),t};V2.from=function(C){return C instanceof V2?C:C&&C.length?new mM(C):V2.empty};var mM=function(H){function C(V){H.call(this),this.values=V}H&&(C.__proto__=H),C.prototype=Object.create(H&&H.prototype),C.prototype.constructor=C;var e={length:{configurable:!0},depth:{configurable:!0}};return C.prototype.flatten=function(){return this.values},C.prototype.sliceInner=function(t,r){return t==0&&r==this.length?this:new C(this.values.slice(t,r))},C.prototype.getInner=function(t){return this.values[t]},C.prototype.forEachInner=function(t,r,i,o){for(var n=r;n<i;n++)if(t(this.values[n],o+n)===!1)return!1},C.prototype.forEachInvertedInner=function(t,r,i,o){for(var n=r-1;n>=i;n--)if(t(this.values[n],o+n)===!1)return!1},C.prototype.leafAppend=function(t){if(this.length+t.length<=H6)return new C(this.values.concat(t.flatten()))},C.prototype.leafPrepend=function(t){if(this.length+t.length<=H6)return new C(t.flatten().concat(this.values))},e.length.get=function(){return this.values.length},e.depth.get=function(){return 0},Object.defineProperties(C.prototype,e),C}(V2);V2.empty=new mM([]);var Xx=function(H){function C(e,V){H.call(this),this.left=e,this.right=V,this.length=e.length+V.length,this.depth=Math.max(e.depth,V.depth)+1}return H&&(C.__proto__=H),C.prototype=Object.create(H&&H.prototype),C.prototype.constructor=C,C.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},C.prototype.getInner=function(V){return V<this.left.length?this.left.get(V):this.right.get(V-this.left.length)},C.prototype.forEachInner=function(V,t,r,i){var o=this.left.length;if(t<o&&this.left.forEachInner(V,t,Math.min(r,o),i)===!1||r>o&&this.right.forEachInner(V,Math.max(t-o,0),Math.min(this.length,r)-o,i+o)===!1)return!1},C.prototype.forEachInvertedInner=function(V,t,r,i){var o=this.left.length;if(t>o&&this.right.forEachInvertedInner(V,t-o,Math.max(r,o)-o,i+o)===!1||r<o&&this.left.forEachInvertedInner(V,Math.min(t,o),r,i)===!1)return!1},C.prototype.sliceInner=function(V,t){if(V==0&&t==this.length)return this;var r=this.left.length;return t<=r?this.left.slice(V,t):V>=r?this.right.slice(V-r,t-r):this.left.slice(V,r).append(this.right.slice(0,t-r))},C.prototype.leafAppend=function(V){var t=this.right.leafAppend(V);if(t)return new C(this.left,t)},C.prototype.leafPrepend=function(V){var t=this.left.leafPrepend(V);if(t)return new C(t,this.right)},C.prototype.appendInner=function(V){return this.left.depth>=Math.max(this.right.depth,V.depth)+1?new C(this.left,new C(this.right,V)):new C(this,V)},C}(V2),Xe=V2;var Yx=500,r0=class H{constructor(C,e){this.items=C,this.eventCount=e}popEvent(C,e){if(this.eventCount==0)return null;let V=this.items.length;for(;;V--)if(this.items.get(V-1).selection){--V;break}let t,r;e&&(t=this.remapping(V,this.items.length),r=t.maps.length);let i=C.tr,o,n,l=[],s=[];return this.items.forEach((d,p)=>{if(!d.step){t||(t=this.remapping(V,p+1),r=t.maps.length),r--,s.push(d);return}if(t){s.push(new O5(d.map));let m=d.step.map(t.slice(r)),c;m&&i.maybeStep(m).doc&&(c=i.mapping.maps[i.mapping.maps.length-1],l.push(new O5(c,void 0,void 0,l.length+s.length))),r--,c&&t.appendMap(c,r)}else i.maybeStep(d.step);if(d.selection)return o=t?d.selection.map(t.slice(r)):d.selection,n=new H(this.items.slice(0,V).append(s.reverse().concat(l)),this.eventCount-1),!1},this.items.length,0),{remaining:n,transform:i,selection:o}}addTransform(C,e,V,t){let r=[],i=this.eventCount,o=this.items,n=!t&&o.length?o.get(o.length-1):null;for(let s=0;s<C.steps.length;s++){let d=C.steps[s].invert(C.docs[s]),p=new O5(C.mapping.maps[s],d,e),m;(m=n&&n.merge(p))&&(p=m,s?r.pop():o=o.slice(0,o.length-1)),r.push(p),e&&(i++,e=void 0),t||(n=p)}let l=i-V.depth;return l>ev&&(o=Cv(o,l),i-=l),new H(o.append(r),i)}remapping(C,e){let V=new T7;return this.items.forEach((t,r)=>{let i=t.mirrorOffset!=null&&r-t.mirrorOffset>=C?V.maps.length-t.mirrorOffset:void 0;V.appendMap(t.map,i)},C,e),V}addMaps(C){return this.eventCount==0?this:new H(this.items.append(C.map(e=>new O5(e))),this.eventCount)}rebased(C,e){if(!this.eventCount)return this;let V=[],t=Math.max(0,this.items.length-e),r=C.mapping,i=C.steps.length,o=this.eventCount;this.items.forEach(p=>{p.selection&&o--},t);let n=e;this.items.forEach(p=>{let m=r.getMirror(--n);if(m==null)return;i=Math.min(i,m);let c=r.maps[m];if(p.step){let h=C.steps[m].invert(C.docs[m]),S=p.selection&&p.selection.map(r.slice(n+1,m));S&&o++,V.push(new O5(c,h,S))}else V.push(new O5(c))},t);let l=[];for(let p=e;p<i;p++)l.push(new O5(r.maps[p]));let s=this.items.slice(0,t).append(l).append(V),d=new H(s,o);return d.emptyItemCount()>Yx&&(d=d.compress(this.items.length-V.length)),d}emptyItemCount(){let C=0;return this.items.forEach(e=>{e.step||C++}),C}compress(C=this.items.length){let e=this.remapping(0,C),V=e.maps.length,t=[],r=0;return this.items.forEach((i,o)=>{if(o>=C)t.push(i),i.selection&&r++;else if(i.step){let n=i.step.map(e.slice(V)),l=n&&n.getMap();if(V--,l&&e.appendMap(l,V),n){let s=i.selection&&i.selection.map(e.slice(V));s&&r++;let d=new O5(l.invert(),n,s),p,m=t.length-1;(p=t.length&&t[m].merge(d))?t[m]=p:t.push(d)}}else i.map&&V--},this.items.length,0),new H(Xe.from(t.reverse()),r)}};r0.empty=new r0(Xe.empty,0);function Cv(H,C){let e;return H.forEach((V,t)=>{if(V.selection&&C--==0)return e=t,!1}),H.slice(e)}var O5=class H{constructor(C,e,V,t){this.map=C,this.step=e,this.selection=V,this.mirrorOffset=t}merge(C){if(this.step&&C.step&&!C.selection){let e=C.step.merge(this.step);if(e)return new H(e.getMap().invert(),e,this.selection)}}},y5=class{constructor(C,e,V,t,r){this.done=C,this.undone=e,this.prevRanges=V,this.prevTime=t,this.prevComposition=r}},ev=20;function Hv(H,C,e,V){let t=e.getMeta(L0),r;if(t)return t.historyState;e.getMeta(Lv)&&(H=new y5(H.done,H.undone,null,0,-1));let i=e.getMeta("appendedTransaction");if(e.steps.length==0)return H;if(i&&i.getMeta(L0))return i.getMeta(L0).redo?new y5(H.done.addTransform(e,void 0,V,V6(C)),H.undone,cM(e.mapping.maps),H.prevTime,H.prevComposition):new y5(H.done,H.undone.addTransform(e,void 0,V,V6(C)),null,H.prevTime,H.prevComposition);if(e.getMeta("addToHistory")!==!1&&!(i&&i.getMeta("addToHistory")===!1)){let o=e.getMeta("composition"),n=H.prevTime==0||!i&&H.prevComposition!=o&&(H.prevTime<(e.time||0)-V.newGroupDelay||!Vv(e,H.prevRanges)),l=i?Ye(H.prevRanges,e.mapping):cM(e.mapping.maps);return new y5(H.done.addTransform(e,n?C.selection.getBookmark():void 0,V,V6(C)),r0.empty,l,e.time,o??H.prevComposition)}else return(r=e.getMeta("rebased"))?new y5(H.done.rebased(e,r),H.undone.rebased(e,r),Ye(H.prevRanges,e.mapping),H.prevTime,H.prevComposition):new y5(H.done.addMaps(e.mapping.maps),H.undone.addMaps(e.mapping.maps),Ye(H.prevRanges,e.mapping),H.prevTime,H.prevComposition)}function Vv(H,C){if(!C)return!1;if(!H.docChanged)return!0;let e=!1;return H.mapping.maps[0].forEach((V,t)=>{for(let r=0;r<C.length;r+=2)V<=C[r+1]&&t>=C[r]&&(e=!0)}),e}function cM(H){let C=[];for(let e=H.length-1;e>=0&&C.length==0;e--)H[e].forEach((V,t,r,i)=>C.push(r,i));return C}function Ye(H,C){if(!H)return null;let e=[];for(let V=0;V<H.length;V+=2){let t=C.map(H[V],1),r=C.map(H[V+1],-1);t<=r&&e.push(t,r)}return e}function tv(H,C,e){let V=V6(C),t=L0.get(C).spec.config,r=(e?H.undone:H.done).popEvent(C,V);if(!r)return null;let i=r.selection.resolve(r.transform.doc),o=(e?H.done:H.undone).addTransform(r.transform,C.selection.getBookmark(),t,V),n=new y5(e?o:r.remaining,e?r.remaining:o,null,0,-1);return r.transform.setSelection(i).setMeta(L0,{redo:e,historyState:n})}var CH=!1,fM=null;function V6(H){let C=H.plugins;if(fM!=C){CH=!1,fM=C;for(let e=0;e<C.length;e++)if(C[e].spec.historyPreserveItems){CH=!0;break}}return CH}var L0=new _1("history"),Lv=new _1("closeHistory");function xM(H={}){return H={depth:H.depth||100,newGroupDelay:H.newGroupDelay||500},new f1({key:L0,state:{init(){return new y5(r0.empty,r0.empty,null,0,-1)},apply(C,e,V){return Hv(e,V,C,H)}},config:H,props:{handleDOMEvents:{beforeinput(C,e){let V=e.inputType,t=V=="historyUndo"?eH:V=="historyRedo"?HH:null;return t?(e.preventDefault(),t(C.state,C.dispatch)):!1}}}})}function t6(H,C){return(e,V)=>{let t=L0.getState(e);if(!t||(H?t.undone:t.done).eventCount==0)return!1;if(V){let r=tv(t,e,H);r&&V(C?r.scrollIntoView():r)}return!0}}var eH=t6(!1,!0),HH=t6(!0,!0),WZ=t6(!1,!1),zZ=t6(!0,!1);var vM=z1.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:H,dispatch:C})=>eH(H,C),redo:()=>({state:H,dispatch:C})=>HH(H,C)}},addProseMirrorPlugins(){return[xM(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-\u044F":()=>this.editor.commands.undo(),"Shift-Mod-\u044F":()=>this.editor.commands.redo()}}});var hM=U1.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:H}){return["p",x1(this.options.HTMLAttributes,H),0]},addCommands(){return{setParagraph:()=>({commands:H})=>H.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}});var ZM=z1.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something \u2026",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new f1({key:new _1("placeholder"),props:{decorations:({doc:H,selection:C})=>{let e=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:V}=C,t=[];if(!e)return null;let r=this.editor.isEmpty;return H.descendants((i,o)=>{let n=V>=o&&V<=o+i.nodeSize,l=!i.isLeaf&&J0(i);if((n||!this.options.showOnlyCurrent)&&l){let s=[this.options.emptyNodeClass];r&&s.push(this.options.emptyEditorClass);let d=J2.node(o,o+i.nodeSize,{class:s.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:i,pos:o,hasAnchor:n}):this.options.placeholder});t.push(d)}return this.options.includeChildren}),a2.create(H,t)}}})]}});var SM=U1.create({name:"doc",topNode:!0,content:"block+"});var gM=U1.create({name:"text",group:"inline"});var VH=class{constructor(C,e,V={},t){this.name=C,Object.entries(e).forEach(([r,i])=>{typeof i=="function"?this[r]=i.bind(this):this[r]=i}),this.config=V,this._instance=t}get component(){return this._instance._component}},OM=VH;var tH=class{constructor(C){j1(this,"_editor");j1(this,"_plugins",{});j1(this,"_buttons",{});j1(this,"_renderedButtons",{});j1(this,"_toolbar");this._component=C}get component(){return this._component}setToolbar(C,e){this._toolbar=C}get toolbar(){return this._toolbar}addButton(C,e){return this._buttons[C]=e,this}registerPlugin(C,e,V={}){let t=new OM(C,e,V,this);return this._plugins[C]=t,t}pluginRegistered(C){return this._plugins[C]!==void 0}registerRenderedButton(C,e){this._renderedButtons[C]=e}getRegisteredButton(C){return this._renderedButtons[C]}get renderedButtons(){return this._renderedButtons}bind(C){this._editor=C}get editor(){return this._editor}get buttons(){return this._buttons}get plugins(){return this._plugins}},yM=tH;function rv(H){let C=document.createElementNS("http://www.w3.org/2000/svg","svg");return C.setAttribute("viewBox","0 0 24 24"),C.classList.add("ce-icon"),C.classList.add("fill-current"),C.classList.add("text-black"),C.innerHTML='<path d="'+H+'" />',C}var LH=class{constructor(C,e,V){j1(this,"definition");j1(this,"_el");this.definition=C,this._editor=V,this._plugin=e}get editor(){return this._editor}get plugin(){return this._plugin}isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}get shortcut(){if(this.definition.shortcut){let C=this.definition.shortcut;return this.isIOS()?C=C.replace("Mod","cmd"):C=C.replace("Mod","ctrl"),C}}render(){if(this.definition.render){let r=this.definition.render.apply(this);return r&&(this._el=r),r}let C=document.createElement("button");C.classList.add("fp-rich-editor-button"),this.definition.icon&&C.appendChild(rv(this.definition.icon,C)),C.setAttribute("type","button"),C.setAttribute("x-on:click.prevent",'buttonAction("'+this.definition.name+'")');let e=this.definition.label,V=this.shortcut,t="";return e&&(t=e,V&&(t+=" ")),V&&(t+="("+V+")"),t&&C.setAttribute("title",t),this._el=C,C}exec(C,e){this.definition.action.apply(this,[C.editor,C.component])}active(C){let e=!1;if(this.definition.active)return typeof this.definition.active=="function"?this.definition.active.apply(this):C.isActive(this.definition.active)}disabled(C){let e=!1;if(this.definition.disabled)return typeof this.definition.disabled=="function"?this.definition.disabled.apply(this,[C]):!C.can()[this.definition.disabled]()}get el(){return this._el}},kM=LH;window.FPRichEditor.registerPlugin=function(H,C){window.FPRichEditor.plugins[H]=C};window.FPRichEditor.plugins={};var iv=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Mv=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,ov=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,nv=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,bM=g2.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:H=>H.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:H=>H.type.name===this.name},{style:"font-weight",getAttrs:H=>/^(bold(er)?|[5-9]\d{2,})$/.test(H)&&null}]},renderHTML({HTMLAttributes:H}){return["strong",x1(this.options.HTMLAttributes,H),0]},addCommands(){return{setBold:()=>({commands:H})=>H.setMark(this.name),toggleBold:()=>({commands:H})=>H.toggleMark(this.name),unsetBold:()=>({commands:H})=>H.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Y5({find:iv,type:this.type}),Y5({find:ov,type:this.type})]},addPasteRules(){return[A5({find:Mv,type:this.type}),A5({find:nv,type:this.type})]}});var wM="M13.5,15.5H10V12.5H13.5A1.5,1.5 0 0,1 15,14A1.5,1.5 0 0,1 13.5,15.5M10,6.5H13A1.5,1.5 0 0,1 14.5,8A1.5,1.5 0 0,1 13,9.5H10M15.6,10.79C16.57,10.11 17.25,9 17.25,8C17.25,5.74 15.5,4 13.25,4H7V18H14.04C16.14,18 17.75,16.3 17.75,14.21C17.75,12.69 16.89,11.39 15.6,10.79Z";var TM="M10,4V7H12.21L8.79,15H6V18H14V15H11.79L15.21,7H18V4H10Z";var PM="M7,5H21V7H7V5M7,13V11H21V13H7M4,4.5A1.5,1.5 0 0,1 5.5,6A1.5,1.5 0 0,1 4,7.5A1.5,1.5 0 0,1 2.5,6A1.5,1.5 0 0,1 4,4.5M4,10.5A1.5,1.5 0 0,1 5.5,12A1.5,1.5 0 0,1 4,13.5A1.5,1.5 0 0,1 2.5,12A1.5,1.5 0 0,1 4,10.5M7,19V17H21V19H7M4,16.5A1.5,1.5 0 0,1 5.5,18A1.5,1.5 0 0,1 4,19.5A1.5,1.5 0 0,1 2.5,18A1.5,1.5 0 0,1 4,16.5Z";var BM="M7,13V11H21V13H7M7,19V17H21V19H7M7,7V5H21V7H7M3,8V5H2V4H4V8H3M2,17V16H5V20H2V19H4V18.5H3V17.5H4V17H2M4.25,10A0.75,0.75 0 0,1 5,10.75C5,10.95 4.92,11.14 4.79,11.27L3.12,13H5V14H2V13.08L4,11H2V10H4.25Z";var EM="M14,17H17L19,13V7H13V13H16M6,17H9L11,13V7H5V13H8L6,17Z";var RM="M3,14H21V12H3M5,4V7H10V10H14V7H19V4M10,19H14V16H10V19Z";var FM="M5,21H19V19H5V21M12,17A6,6 0 0,0 18,11V3H15.5V11A3.5,3.5 0 0,1 12,14.5A3.5,3.5 0 0,1 8.5,11V3H6V11A6,6 0 0,0 12,17Z";var DM="M10,19H13V22H10V19M12,2C17.35,2.22 19.68,7.62 16.5,11.67C15.67,12.67 14.33,13.33 13.67,14.17C13,15 13,16 13,17H10C10,15.33 10,13.92 10.67,12.92C11.33,11.92 12.67,11.33 13.5,10.67C15.92,8.43 15.32,5.26 12,5A3,3 0 0,0 9,8H6A6,6 0 0,1 12,2Z";var NM="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z";var IM="M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.43 19.12,14.63 17.79,15L19.25,16.44C20.88,15.61 22,13.95 22,12A5,5 0 0,0 17,7M16,11H13.81L15.81,13H16V11M2,4.27L5.11,7.38C3.29,8.12 2,9.91 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12C3.9,10.41 5.11,9.1 6.66,8.93L8.73,11H8V13H10.73L13,15.27V17H14.73L18.74,21L20,19.74L3.27,3L2,4.27Z";var _M="M12.89,3L14.85,3.4L11.11,21L9.15,20.6L12.89,3M19.59,12L16,8.41V5.58L22.42,12L16,18.41V15.58L19.59,12M1.58,12L8,5.58V8.41L4.41,12L8,15.58V18.41L1.58,12Z";window.FPRichEditor.registerPlugin("bold",{label:"Bold",active:"bold",buttons(){return[{name:"bold",icon:wM,label:"Bold",active:"bold",shortcut:"Mod-b",disabled:"toggleBold",action:function(H){H.chain().focus().toggleBold().run()}}]},tiptap:function(){return bM}});var av=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,lv=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,sv=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Av=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,WM=g2.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:H=>H.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:H=>H.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:H}){return["em",x1(this.options.HTMLAttributes,H),0]},addCommands(){return{setItalic:()=>({commands:H})=>H.setMark(this.name),toggleItalic:()=>({commands:H})=>H.toggleMark(this.name),unsetItalic:()=>({commands:H})=>H.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Y5({find:av,type:this.type}),Y5({find:sv,type:this.type})]},addPasteRules(){return[A5({find:lv,type:this.type}),A5({find:Av,type:this.type})]}});window.FPRichEditor.registerPlugin("italic",{label:"Italic",active:"italic",buttons(){return[{name:"italic",icon:TM,active:"italic",label:"Italicize",shortcut:"Mod-i",disabled:"toggleItalic",action:function(H){H.chain().focus().toggleItalic().run()}}]},tiptap:WM});var zM=g2.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:H=>H.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:H}){return["u",x1(this.options.HTMLAttributes,H),0]},addCommands(){return{setUnderline:()=>({commands:H})=>H.setMark(this.name),toggleUnderline:()=>({commands:H})=>H.toggleMark(this.name),unsetUnderline:()=>({commands:H})=>H.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});window.FPRichEditor.registerPlugin("underline",{label:"Underline",active:"underline",buttons(){return[{name:"underline",icon:FM,active:"underline",label:"Underline",shortcut:"Mod-u",disabled:"toggleUnderline",action:function(H){H.chain().focus().toggleUnderline().run()}}]},tiptap:zM});var dv=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,pv=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,UM=g2.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:H=>H.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:H}){return["s",x1(this.options.HTMLAttributes,H),0]},addCommands(){return{setStrike:()=>({commands:H})=>H.setMark(this.name),toggleStrike:()=>({commands:H})=>H.toggleMark(this.name),unsetStrike:()=>({commands:H})=>H.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Y5({find:dv,type:this.type})]},addPasteRules(){return[A5({find:pv,type:this.type})]}});window.FPRichEditor.registerPlugin("strike",{label:"Strike",active:"strike",buttons(){return[{name:"strike",icon:RM,active:"strike",label:"Strikethrough",shortcut:"Mod-shift-s",disabled:"toggleStrike",action:function(H){H.chain().focus().toggleStrike().run()}}]},tiptap:UM});var uv="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5m\xF6gensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",mv="\u03B5\u03BB1\u03C52\u0431\u04331\u0435\u043B3\u0434\u0435\u0442\u04384\u0435\u044E2\u043A\u0430\u0442\u043E\u043B\u0438\u043A6\u043E\u043C3\u043C\u043A\u04342\u043E\u043D1\u0441\u043A\u0432\u04306\u043E\u043D\u043B\u0430\u0439\u043D5\u0440\u04333\u0440\u0443\u04412\u04442\u0441\u0430\u0439\u04423\u0440\u04313\u0443\u043A\u04403\u049B\u0430\u04373\u0570\u0561\u05753\u05D9\u05E9\u05E8\u05D0\u05DC5\u05E7\u05D5\u05DD3\u0627\u0628\u0648\u0638\u0628\u064A5\u0631\u0627\u0645\u0643\u06485\u0644\u0627\u0631\u062F\u06464\u0628\u062D\u0631\u064A\u06465\u062C\u0632\u0627\u0626\u06315\u0633\u0639\u0648\u062F\u064A\u06296\u0639\u0644\u064A\u0627\u06465\u0645\u063A\u0631\u06285\u0645\u0627\u0631\u0627\u062A5\u06CC\u0631\u0627\u06465\u0628\u0627\u0631\u062A2\u0632\u0627\u06314\u064A\u062A\u06433\u06BE\u0627\u0631\u062A5\u062A\u0648\u0646\u06334\u0633\u0648\u062F\u0627\u06463\u0631\u064A\u06295\u0634\u0628\u0643\u06294\u0639\u0631\u0627\u06422\u06282\u0645\u0627\u06464\u0641\u0644\u0633\u0637\u064A\u06466\u0642\u0637\u06313\u0643\u0627\u062B\u0648\u0644\u064A\u06436\u0648\u06453\u0645\u0635\u06312\u0644\u064A\u0633\u064A\u06275\u0648\u0631\u064A\u062A\u0627\u0646\u064A\u06277\u0642\u06394\u0647\u0645\u0631\u0627\u06475\u067E\u0627\u06A9\u0633\u062A\u0627\u06467\u0680\u0627\u0631\u062A4\u0915\u0949\u092E3\u0928\u0947\u091F3\u092D\u093E\u0930\u09240\u092E\u094D3\u094B\u09245\u0938\u0902\u0917\u0920\u09285\u09AC\u09BE\u0982\u09B2\u09BE5\u09AD\u09BE\u09B0\u09A42\u09F0\u09A44\u0A2D\u0A3E\u0A30\u0A244\u0AAD\u0ABE\u0AB0\u0AA44\u0B2D\u0B3E\u0B30\u0B244\u0B87\u0BA8\u0BCD\u0BA4\u0BBF\u0BAF\u0BBE6\u0BB2\u0B99\u0BCD\u0B95\u0BC86\u0B9A\u0BBF\u0B99\u0BCD\u0B95\u0BAA\u0BCD\u0BAA\u0BC2\u0BB0\u0BCD11\u0C2D\u0C3E\u0C30\u0C24\u0C4D5\u0CAD\u0CBE\u0CB0\u0CA44\u0D2D\u0D3E\u0D30\u0D24\u0D025\u0DBD\u0D82\u0D9A\u0DCF4\u0E04\u0E2D\u0E213\u0E44\u0E17\u0E223\u0EA5\u0EB2\u0EA73\u10D2\u10D42\u307F\u3093\u306A3\u30A2\u30DE\u30BE\u30F34\u30AF\u30E9\u30A6\u30C94\u30B0\u30FC\u30B0\u30EB4\u30B3\u30E02\u30B9\u30C8\u30A23\u30BB\u30FC\u30EB3\u30D5\u30A1\u30C3\u30B7\u30E7\u30F36\u30DD\u30A4\u30F3\u30C84\u4E16\u754C2\u4E2D\u4FE11\u56FD1\u570B1\u6587\u7F513\u4E9A\u9A6C\u900A3\u4F01\u4E1A2\u4F5B\u5C712\u4FE1\u606F2\u5065\u5EB72\u516B\u53662\u516C\u53F81\u76CA2\u53F0\u6E7E1\u70632\u5546\u57CE1\u5E971\u68072\u5609\u91CC0\u5927\u9152\u5E975\u5728\u7EBF2\u5927\u62FF2\u5929\u4E3B\u65593\u5A31\u4E502\u5BB6\u96FB2\u5E7F\u4E1C2\u5FAE\u535A2\u6148\u55842\u6211\u7231\u4F603\u624B\u673A2\u62DB\u80582\u653F\u52A11\u5E9C2\u65B0\u52A0\u57612\u95FB2\u65F6\u5C1A2\u66F8\u7C4D2\u673A\u67842\u6DE1\u9A6C\u95213\u6E38\u620F2\u6FB3\u95802\u70B9\u770B2\u79FB\u52A82\u7EC4\u7EC7\u673A\u67844\u7F51\u57401\u5E971\u7AD91\u7EDC2\u8054\u901A2\u8C37\u6B4C2\u8D2D\u72692\u901A\u8CA92\u96C6\u56E22\u96FB\u8A0A\u76C8\u79D14\u98DE\u5229\u6D663\u98DF\u54C12\u9910\u53852\u9999\u683C\u91CC\u62C93\u6E2F2\uB2F7\uB1371\uCEF42\uC0BC\uC1312\uD55C\uAD6D2",C7=(H,C)=>{for(let e in C)H[e]=C[e];return H},nH="numeric",aH="ascii",lH="alpha",o6="asciinumeric",L6="alphanumeric",sH="domain",YM="emoji",cv="scheme",fv="slashscheme",GM="whitespace";function xv(H,C){return H in C||(C[H]=[]),C[H]}function i0(H,C,e){C[nH]&&(C[o6]=!0,C[L6]=!0),C[aH]&&(C[o6]=!0,C[lH]=!0),C[o6]&&(C[L6]=!0),C[lH]&&(C[L6]=!0),C[L6]&&(C[sH]=!0),C[YM]&&(C[sH]=!0);for(let V in C){let t=xv(V,e);t.indexOf(H)<0&&t.push(H)}}function vv(H,C){let e={};for(let V in C)C[V].indexOf(H)>=0&&(e[V]=!0);return e}function O2(H=null){this.j={},this.jr=[],this.jd=null,this.t=H}O2.groups={};O2.prototype={accepts(){return!!this.t},go(H){let C=this,e=C.j[H];if(e)return e;for(let V=0;V<C.jr.length;V++){let t=C.jr[V][0],r=C.jr[V][1];if(r&&t.test(H))return r}return C.jd},has(H,C=!1){return C?H in this.j:!!this.go(H)},ta(H,C,e,V){for(let t=0;t<H.length;t++)this.tt(H[t],C,e,V)},tr(H,C,e,V){V=V||O2.groups;let t;return C&&C.j?t=C:(t=new O2(C),e&&V&&i0(C,e,V)),this.jr.push([H,t]),t},ts(H,C,e,V){let t=this,r=H.length;if(!r)return t;for(let i=0;i<r-1;i++)t=t.tt(H[i]);return t.tt(H[r-1],C,e,V)},tt(H,C,e,V){V=V||O2.groups;let t=this;if(C&&C.j)return t.j[H]=C,C;let r=C,i,o=t.go(H);if(o?(i=new O2,C7(i.j,o.j),i.jr.push.apply(i.jr,o.jr),i.jd=o.jd,i.t=o.t):i=new O2,r){if(V)if(i.t&&typeof i.t=="string"){let n=C7(vv(i.t,V),e);i0(r,n,V)}else e&&i0(r,e,V);i.t=r}return t.j[H]=i,i}};var L1=(H,C,e,V,t)=>H.ta(C,e,V,t),X2=(H,C,e,V,t)=>H.tr(C,e,V,t),$M=(H,C,e,V,t)=>H.ts(C,e,V,t),F=(H,C,e,V,t)=>H.tt(C,e,V,t),e3="WORD",AH="UWORD",o4="LOCALHOST",dH="TLD",pH="UTLD",n6="SCHEME",Y0="SLASH_SCHEME",uH="NUM",Co="WS",mH="NL",r4="OPENBRACE",i4="CLOSEBRACE",a6="OPENBRACKET",l6="CLOSEBRACKET",s6="OPENPAREN",A6="CLOSEPAREN",d6="OPENANGLEBRACKET",p6="CLOSEANGLEBRACKET",u6="FULLWIDTHLEFTPAREN",m6="FULLWIDTHRIGHTPAREN",c6="LEFTCORNERBRACKET",f6="RIGHTCORNERBRACKET",x6="LEFTWHITECORNERBRACKET",v6="RIGHTWHITECORNERBRACKET",h6="FULLWIDTHLESSTHAN",Z6="FULLWIDTHGREATERTHAN",S6="AMPERSAND",g6="APOSTROPHE",O6="ASTERISK",y3="AT",y6="BACKSLASH",k6="BACKTICK",b6="CARET",k3="COLON",cH="COMMA",w6="DOLLAR",k5="DOT",T6="EQUALS",fH="EXCLAMATION",b5="HYPHEN",P6="PERCENT",B6="PIPE",E6="PLUS",R6="POUND",F6="QUERY",xH="QUOTE",eo="FULLWIDTHMIDDLEDOT",vH="SEMI",w5="SLASH",M4="TILDE",D6="UNDERSCORE",Ho="EMOJI",N6="SYM",Vo=Object.freeze({__proto__:null,WORD:e3,UWORD:AH,LOCALHOST:o4,TLD:dH,UTLD:pH,SCHEME:n6,SLASH_SCHEME:Y0,NUM:uH,WS:Co,NL:mH,OPENBRACE:r4,CLOSEBRACE:i4,OPENBRACKET:a6,CLOSEBRACKET:l6,OPENPAREN:s6,CLOSEPAREN:A6,OPENANGLEBRACKET:d6,CLOSEANGLEBRACKET:p6,FULLWIDTHLEFTPAREN:u6,FULLWIDTHRIGHTPAREN:m6,LEFTCORNERBRACKET:c6,RIGHTCORNERBRACKET:f6,LEFTWHITECORNERBRACKET:x6,RIGHTWHITECORNERBRACKET:v6,FULLWIDTHLESSTHAN:h6,FULLWIDTHGREATERTHAN:Z6,AMPERSAND:S6,APOSTROPHE:g6,ASTERISK:O6,AT:y3,BACKSLASH:y6,BACKTICK:k6,CARET:b6,COLON:k3,COMMA:cH,DOLLAR:w6,DOT:k5,EQUALS:T6,EXCLAMATION:fH,HYPHEN:b5,PERCENT:P6,PIPE:B6,PLUS:E6,POUND:R6,QUERY:F6,QUOTE:xH,FULLWIDTHMIDDLEDOT:eo,SEMI:vH,SLASH:w5,TILDE:M4,UNDERSCORE:D6,EMOJI:Ho,SYM:N6}),X0=/[a-z]/,rH=/\p{L}/u,iH=/\p{Emoji}/u;var MH=/\d/,KM=/\s/;var QM=`
`,hv="\uFE0F",Zv="\u200D",r6=null,i6=null;function Sv(H=[]){let C={};O2.groups=C;let e=new O2;r6==null&&(r6=qM(uv)),i6==null&&(i6=qM(mv)),F(e,"'",g6),F(e,"{",r4),F(e,"}",i4),F(e,"[",a6),F(e,"]",l6),F(e,"(",s6),F(e,")",A6),F(e,"<",d6),F(e,">",p6),F(e,"\uFF08",u6),F(e,"\uFF09",m6),F(e,"\u300C",c6),F(e,"\u300D",f6),F(e,"\u300E",x6),F(e,"\u300F",v6),F(e,"\uFF1C",h6),F(e,"\uFF1E",Z6),F(e,"&",S6),F(e,"*",O6),F(e,"@",y3),F(e,"`",k6),F(e,"^",b6),F(e,":",k3),F(e,",",cH),F(e,"$",w6),F(e,".",k5),F(e,"=",T6),F(e,"!",fH),F(e,"-",b5),F(e,"%",P6),F(e,"|",B6),F(e,"+",E6),F(e,"#",R6),F(e,"?",F6),F(e,'"',xH),F(e,"/",w5),F(e,";",vH),F(e,"~",M4),F(e,"_",D6),F(e,"\\",y6),F(e,"\u30FB",eo);let V=X2(e,MH,uH,{[nH]:!0});X2(V,MH,V);let t=X2(e,X0,e3,{[aH]:!0});X2(t,X0,t);let r=X2(e,rH,AH,{[lH]:!0});X2(r,X0),X2(r,rH,r);let i=X2(e,KM,Co,{[GM]:!0});F(e,QM,mH,{[GM]:!0}),F(i,QM),X2(i,KM,i);let o=X2(e,iH,Ho,{[YM]:!0});X2(o,iH,o),F(o,hv,o);let n=F(o,Zv);X2(n,iH,o);let l=[[X0,t]],s=[[X0,null],[rH,r]];for(let d=0;d<r6.length;d++)O3(e,r6[d],dH,e3,l);for(let d=0;d<i6.length;d++)O3(e,i6[d],pH,AH,s);i0(dH,{tld:!0,ascii:!0},C),i0(pH,{utld:!0,alpha:!0},C),O3(e,"file",n6,e3,l),O3(e,"mailto",n6,e3,l),O3(e,"http",Y0,e3,l),O3(e,"https",Y0,e3,l),O3(e,"ftp",Y0,e3,l),O3(e,"ftps",Y0,e3,l),i0(n6,{scheme:!0,ascii:!0},C),i0(Y0,{slashscheme:!0,ascii:!0},C),H=H.sort((d,p)=>d[0]>p[0]?1:-1);for(let d=0;d<H.length;d++){let p=H[d][0],c=H[d][1]?{[cv]:!0}:{[fv]:!0};p.indexOf("-")>=0?c[sH]=!0:X0.test(p)?MH.test(p)?c[o6]=!0:c[aH]=!0:c[nH]=!0,$M(e,p,p,c)}return $M(e,"localhost",o4,{ascii:!0}),e.jd=new O2(N6),{start:e,tokens:C7({groups:C},Vo)}}function to(H,C){let e=gv(C.replace(/[A-Z]/g,o=>o.toLowerCase())),V=e.length,t=[],r=0,i=0;for(;i<V;){let o=H,n=null,l=0,s=null,d=-1,p=-1;for(;i<V&&(n=o.go(e[i]));)o=n,o.accepts()?(d=0,p=0,s=o):d>=0&&(d+=e[i].length,p++),l+=e[i].length,r+=e[i].length,i++;r-=d,i-=p,l-=d,t.push({t:s.t,v:C.slice(r-l,r),s:r-l,e:r})}return t}function gv(H){let C=[],e=H.length,V=0;for(;V<e;){let t=H.charCodeAt(V),r,i=t<55296||t>56319||V+1===e||(r=H.charCodeAt(V+1))<56320||r>57343?H[V]:H.slice(V,V+2);C.push(i),V+=i.length}return C}function O3(H,C,e,V,t){let r,i=C.length;for(let o=0;o<i-1;o++){let n=C[o];H.j[n]?r=H.j[n]:(r=new O2(V),r.jr=t.slice(),H.j[n]=r),H=r}return r=new O2(e),r.jr=t.slice(),H.j[C[i-1]]=r,r}function qM(H){let C=[],e=[],V=0,t="0123456789";for(;V<H.length;){let r=0;for(;t.indexOf(H[V+r])>=0;)r++;if(r>0){C.push(e.join(""));for(let i=parseInt(H.substring(V,V+r),10);i>0;i--)e.pop();V+=r}else e.push(H[V]),V++}return C}var n4={defaultProtocol:"http",events:null,format:jM,formatHref:jM,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function hH(H,C=null){let e=C7({},n4);H&&(e=C7(e,H instanceof hH?H.o:H));let V=e.ignoreTags,t=[];for(let r=0;r<V.length;r++)t.push(V[r].toUpperCase());this.o=e,C&&(this.defaultRender=C),this.ignoreTags=t}hH.prototype={o:n4,ignoreTags:[],defaultRender(H){return H},check(H){return this.get("validate",H.toString(),H)},get(H,C,e){let V=C!=null,t=this.o[H];return t&&(typeof t=="object"?(t=e.t in t?t[e.t]:n4[H],typeof t=="function"&&V&&(t=t(C,e))):typeof t=="function"&&V&&(t=t(C,e.t,e)),t)},getObj(H,C,e){let V=this.o[H];return typeof V=="function"&&C!=null&&(V=V(C,e.t,e)),V},render(H){let C=H.render(this);return(this.get("render",null,H)||this.defaultRender)(C,H.t,H)}};function jM(H){return H}function Lo(H,C){this.t="token",this.v=H,this.tk=C}Lo.prototype={isLink:!1,toString(){return this.v},toHref(H){return this.toString()},toFormattedString(H){let C=this.toString(),e=H.get("truncate",C,this),V=H.get("format",C,this);return e&&V.length>e?V.substring(0,e)+"\u2026":V},toFormattedHref(H){return H.get("formatHref",this.toHref(H.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(H=n4.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(H),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(H){return{type:this.t,value:this.toFormattedString(H),isLink:this.isLink,href:this.toFormattedHref(H),start:this.startIndex(),end:this.endIndex()}},validate(H){return H.get("validate",this.toString(),this)},render(H){let C=this,e=this.toHref(H.get("defaultProtocol")),V=H.get("formatHref",e,this),t=H.get("tagName",e,C),r=this.toFormattedString(H),i={},o=H.get("className",e,C),n=H.get("target",e,C),l=H.get("rel",e,C),s=H.getObj("attributes",e,C),d=H.getObj("events",e,C);return i.href=V,o&&(i.class=o),n&&(i.target=n),l&&(i.rel=l),s&&C7(i,s),{tagName:t,attributes:i,content:r,eventListeners:d}}};function I6(H,C){class e extends Lo{constructor(t,r){super(t,r),this.t=H}}for(let V in C)e.prototype[V]=C[V];return e.t=H,e}var JM=I6("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),XM=I6("text"),Ov=I6("nl"),M6=I6("url",{isLink:!0,toHref(H=n4.defaultProtocol){return this.hasProtocol()?this.v:`${H}://${this.v}`},hasProtocol(){let H=this.tk;return H.length>=2&&H[0].t!==o4&&H[1].t===k3}});var Y2=H=>new O2(H);function yv({groups:H}){let C=H.domain.concat([S6,O6,y3,y6,k6,b6,w6,T6,b5,uH,P6,B6,E6,R6,w5,N6,M4,D6]),e=[g6,k3,cH,k5,fH,F6,xH,vH,d6,p6,r4,i4,l6,a6,s6,A6,u6,m6,c6,f6,x6,v6,h6,Z6],V=[S6,g6,O6,y6,k6,b6,w6,T6,b5,r4,i4,P6,B6,E6,R6,F6,w5,N6,M4,D6],t=Y2(),r=F(t,M4);L1(r,V,r),L1(r,H.domain,r);let i=Y2(),o=Y2(),n=Y2();L1(t,H.domain,i),L1(t,H.scheme,o),L1(t,H.slashscheme,n),L1(i,V,r),L1(i,H.domain,i);let l=F(i,y3);F(r,y3,l),F(o,y3,l),F(n,y3,l);let s=F(r,k5);L1(s,V,r),L1(s,H.domain,r);let d=Y2();L1(l,H.domain,d),L1(d,H.domain,d);let p=F(d,k5);L1(p,H.domain,d);let m=Y2(JM);L1(p,H.tld,m),L1(p,H.utld,m),F(l,o4,m);let c=F(d,b5);L1(c,H.domain,d),L1(m,H.domain,d),F(m,k5,p),F(m,b5,c);let h=F(m,k3);L1(h,H.numeric,JM);let S=F(i,b5),O=F(i,k5);L1(S,H.domain,i),L1(O,V,r),L1(O,H.domain,i);let E=Y2(M6);L1(O,H.tld,E),L1(O,H.utld,E),L1(E,H.domain,i),L1(E,V,r),F(E,k5,O),F(E,b5,S),F(E,y3,l);let D=F(E,k3),N=Y2(M6);L1(D,H.numeric,N);let R=Y2(M6),W=Y2();L1(R,C,R),L1(R,e,W),L1(W,C,R),L1(W,e,W),F(E,w5,R),F(N,w5,R);let X=F(o,k3),i1=F(n,k3),$=F(i1,w5),a1=F($,w5);L1(o,H.domain,i),F(o,k5,O),F(o,b5,S),L1(n,H.domain,i),F(n,k5,O),F(n,b5,S),L1(X,H.domain,R),F(X,w5,R),L1(a1,H.domain,R),L1(a1,C,R),F(a1,w5,R);let m1=[[r4,i4],[a6,l6],[s6,A6],[d6,p6],[u6,m6],[c6,f6],[x6,v6],[h6,Z6]];for(let T1=0;T1<m1.length;T1++){let[P1,y2]=m1[T1],B1=F(R,P1);F(W,P1,B1),F(B1,y2,R);let d1=Y2(M6);L1(B1,C,d1);let D1=Y2();L1(B1,e),L1(d1,C,d1),L1(d1,e,D1),L1(D1,C,d1),L1(D1,e,D1),F(d1,y2,R),F(D1,y2,R)}return F(t,o4,E),F(t,mH,Ov),{start:t,tokens:Vo}}function kv(H,C,e){let V=e.length,t=0,r=[],i=[];for(;t<V;){let o=H,n=null,l=null,s=0,d=null,p=-1;for(;t<V&&!(n=o.go(e[t].t));)i.push(e[t++]);for(;t<V&&(l=n||o.go(e[t].t));)n=null,o=l,o.accepts()?(p=0,d=o):p>=0&&p++,t++,s++;if(p<0)t-=s,t<V&&(i.push(e[t]),t++);else{i.length>0&&(r.push(oH(XM,C,i)),i=[]),t-=p,s-=p;let m=d.t,c=e.slice(t-s,t);r.push(oH(m,C,c))}}return i.length>0&&r.push(oH(XM,C,i)),r}function oH(H,C,e){let V=e[0].s,t=e[e.length-1].e,r=C.slice(V,t);return new H(r,e)}var bv=typeof console<"u"&&console&&console.warn||(()=>{}),wv="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",h1={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function ro(){return O2.groups={},h1.scanner=null,h1.parser=null,h1.tokenQueue=[],h1.pluginQueue=[],h1.customSchemes=[],h1.initialized=!1,h1}function ZH(H,C=!1){if(h1.initialized&&bv(`linkifyjs: already initialized - will not register custom scheme "${H}" ${wv}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(H))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);h1.customSchemes.push([H,C])}function Tv(){h1.scanner=Sv(h1.customSchemes);for(let H=0;H<h1.tokenQueue.length;H++)h1.tokenQueue[H][1]({scanner:h1.scanner});h1.parser=yv(h1.scanner.tokens);for(let H=0;H<h1.pluginQueue.length;H++)h1.pluginQueue[H][1]({scanner:h1.scanner,parser:h1.parser});return h1.initialized=!0,h1}function _6(H){return h1.initialized||Tv(),kv(h1.parser.start,H,to(h1.scanner.start,H))}_6.scan=to;function SH(H,C=null,e=null){if(C&&typeof C=="object"){if(e)throw Error(`linkifyjs: Invalid link type ${C}; must be a string`);e=C,C=null}let V=new hH(e),t=_6(H),r=[];for(let i=0;i<t.length;i++){let o=t[i];o.isLink&&(!C||o.t===C)&&V.check(o)&&r.push(o.toFormattedObject(V))}return r}function Pv(H){return H.length===1?H[0].isLink:H.length===3&&H[1].isLink?["()","[]"].includes(H[0].value+H[2].value):!1}function Bv(H){return new f1({key:new _1("autolink"),appendTransaction:(C,e,V)=>{let t=C.some(l=>l.docChanged)&&!e.doc.eq(V.doc),r=C.some(l=>l.getMeta("preventAutolink"));if(!t||r)return;let{tr:i}=V,o=Ge(e.doc,[...C]);if(Qe(o).forEach(({newRange:l})=>{let s=$e(V.doc,l,m=>m.isTextblock),d,p;if(s.length>1?(d=s[0],p=V.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ")):s.length&&V.doc.textBetween(l.from,l.to," "," ").endsWith(" ")&&(d=s[0],p=V.doc.textBetween(d.pos,l.to,void 0," ")),d&&p){let m=p.split(" ").filter(O=>O!=="");if(m.length<=0)return!1;let c=m[m.length-1],h=d.pos+p.lastIndexOf(c);if(!c)return!1;let S=_6(c).map(O=>O.toObject(H.defaultProtocol));if(!Pv(S))return!1;S.filter(O=>O.isLink).map(O=>({...O,from:h+O.start+1,to:h+O.end+1})).filter(O=>V.schema.marks.code?!V.doc.rangeHasMark(O.from,O.to,V.schema.marks.code):!0).filter(O=>H.validate(O.value)).filter(O=>H.shouldAutoLink(O.value)).forEach(O=>{L4(O.from,O.to,V.doc).some(E=>E.mark.type===H.type)||i.addMark(O.from,O.to,H.type.create({href:O.href}))})}}),!!i.steps.length)return i}})}function Ev(H){return new f1({key:new _1("handleClickLink"),props:{handleClick:(C,e,V)=>{var t,r;if(V.button!==0||!C.editable)return!1;let i=V.target,o=[];for(;i.nodeName!=="DIV";)o.push(i),i=i.parentNode;if(!o.find(p=>p.nodeName==="A"))return!1;let n=C6(C.state,H.type.name),l=V.target,s=(t=l?.href)!==null&&t!==void 0?t:n.href,d=(r=l?.target)!==null&&r!==void 0?r:n.target;return l&&s?(window.open(s,d),!0):!1}}})}function Rv(H){return new f1({key:new _1("handlePasteLink"),props:{handlePaste:(C,e,V)=>{let{state:t}=C,{selection:r}=t,{empty:i}=r;if(i)return!1;let o="";V.content.forEach(l=>{o+=l.textContent});let n=SH(o,{defaultProtocol:H.defaultProtocol}).find(l=>l.isLink&&l.value===o);return!o||!n?!1:(H.editor.commands.setMark(H.type,{href:n.href}),!0)}}})}var Fv=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function a4(H,C){let e=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return C&&C.forEach(V=>{let t=typeof V=="string"?V:V.scheme;t&&e.push(t)}),!H||H.replace(Fv,"").match(new RegExp(`^(?:(?:${e.join("|")}):|[^a-z]|[a-z+.-]+(?:[^a-z+.-:]|$))`,"i"))}var PS=g2.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(H=>{if(typeof H=="string"){ZH(H);return}ZH(H.scheme,H.optionalSlashes)})},onDestroy(){ro()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(H,C)=>!!a4(H,C.protocols),validate:H=>!!H,shouldAutoLink:H=>!!H}},addAttributes(){return{href:{default:null,parseHTML(H){return H.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:H=>{let C=H.getAttribute("href");return!C||!this.options.isAllowedUri(C,{defaultValidate:e=>!!a4(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:H}){return this.options.isAllowedUri(H.href,{defaultValidate:C=>!!a4(C,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",x1(this.options.HTMLAttributes,H),0]:["a",x1(this.options.HTMLAttributes,{...H,href:""}),0]},addCommands(){return{setLink:H=>({chain:C})=>C().setMark(this.name,H).setMeta("preventAutolink",!0).run(),toggleLink:H=>({chain:C})=>C().toggleMark(this.name,H,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:H})=>H().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[A5({find:H=>{let C=[];if(H){let{protocols:e,defaultProtocol:V}=this.options,t=SH(H).filter(r=>r.isLink&&this.options.isAllowedUri(r.value,{defaultValidate:i=>!!a4(i,e),protocols:e,defaultProtocol:V}));t.length&&t.forEach(r=>C.push({text:r.value,data:{href:r.href},index:r.start}))}return C},type:this.type,getAttributes:H=>{var C;return{href:(C=H.data)===null||C===void 0?void 0:C.href}}})]},addProseMirrorPlugins(){let H=[],{protocols:C,defaultProtocol:e}=this.options;return this.options.autolink&&H.push(Bv({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:V=>this.options.isAllowedUri(V,{defaultValidate:t=>!!a4(t,C),protocols:C,defaultProtocol:e}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&H.push(Ev({type:this.type})),this.options.linkOnPaste&&H.push(Rv({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),H}});var y1="top",G1="bottom",F1="right",w1="left",W6="auto",b3=[y1,G1,F1,w1],H3="start",M0="end",io="clippingParents",z6="viewport",e7="popper",Mo="reference",gH=b3.reduce(function(H,C){return H.concat([C+"-"+H3,C+"-"+M0])},[]),U6=[].concat(b3,[W6]).reduce(function(H,C){return H.concat([C,C+"-"+H3,C+"-"+M0])},[]),Dv="beforeRead",Nv="read",Iv="afterRead",_v="beforeMain",Wv="main",zv="afterMain",Uv="beforeWrite",Gv="write",$v="afterWrite",oo=[Dv,Nv,Iv,_v,Wv,zv,Uv,Gv,$v];function X1(H){return H?(H.nodeName||"").toLowerCase():null}function S1(H){if(H==null)return window;if(H.toString()!=="[object Window]"){var C=H.ownerDocument;return C&&C.defaultView||window}return H}function C5(H){var C=S1(H).Element;return H instanceof C||H instanceof Element}function $1(H){var C=S1(H).HTMLElement;return H instanceof C||H instanceof HTMLElement}function H7(H){if(typeof ShadowRoot>"u")return!1;var C=S1(H).ShadowRoot;return H instanceof C||H instanceof ShadowRoot}function Kv(H){var C=H.state;Object.keys(C.elements).forEach(function(e){var V=C.styles[e]||{},t=C.attributes[e]||{},r=C.elements[e];!$1(r)||!X1(r)||(Object.assign(r.style,V),Object.keys(t).forEach(function(i){var o=t[i];o===!1?r.removeAttribute(i):r.setAttribute(i,o===!0?"":o)}))})}function Qv(H){var C=H.state,e={popper:{position:C.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(C.elements.popper.style,e.popper),C.styles=e,C.elements.arrow&&Object.assign(C.elements.arrow.style,e.arrow),function(){Object.keys(C.elements).forEach(function(V){var t=C.elements[V],r=C.attributes[V]||{},i=Object.keys(C.styles.hasOwnProperty(V)?C.styles[V]:e[V]),o=i.reduce(function(n,l){return n[l]="",n},{});!$1(t)||!X1(t)||(Object.assign(t.style,o),Object.keys(r).forEach(function(n){t.removeAttribute(n)}))})}}var no={name:"applyStyles",enabled:!0,phase:"write",fn:Kv,effect:Qv,requires:["computeStyles"]};function Y1(H){return H.split("-")[0]}var d5=Math.max,o0=Math.min,V3=Math.round;function V7(){var H=navigator.userAgentData;return H!=null&&H.brands&&Array.isArray(H.brands)?H.brands.map(function(C){return C.brand+"/"+C.version}).join(" "):navigator.userAgent}function l4(){return!/^((?!chrome|android).)*safari/i.test(V7())}function e5(H,C,e){C===void 0&&(C=!1),e===void 0&&(e=!1);var V=H.getBoundingClientRect(),t=1,r=1;C&&$1(H)&&(t=H.offsetWidth>0&&V3(V.width)/H.offsetWidth||1,r=H.offsetHeight>0&&V3(V.height)/H.offsetHeight||1);var i=C5(H)?S1(H):window,o=i.visualViewport,n=!l4()&&e,l=(V.left+(n&&o?o.offsetLeft:0))/t,s=(V.top+(n&&o?o.offsetTop:0))/r,d=V.width/t,p=V.height/r;return{width:d,height:p,top:s,right:l+d,bottom:s+p,left:l,x:l,y:s}}function n0(H){var C=e5(H),e=H.offsetWidth,V=H.offsetHeight;return Math.abs(C.width-e)<=1&&(e=C.width),Math.abs(C.height-V)<=1&&(V=C.height),{x:H.offsetLeft,y:H.offsetTop,width:e,height:V}}function s4(H,C){var e=C.getRootNode&&C.getRootNode();if(H.contains(C))return!0;if(e&&H7(e)){var V=C;do{if(V&&H.isSameNode(V))return!0;V=V.parentNode||V.host}while(V)}return!1}function c2(H){return S1(H).getComputedStyle(H)}function OH(H){return["table","td","th"].indexOf(X1(H))>=0}function t2(H){return((C5(H)?H.ownerDocument:H.document)||window.document).documentElement}function t3(H){return X1(H)==="html"?H:H.assignedSlot||H.parentNode||(H7(H)?H.host:null)||t2(H)}function ao(H){return!$1(H)||c2(H).position==="fixed"?null:H.offsetParent}function qv(H){var C=/firefox/i.test(V7()),e=/Trident/i.test(V7());if(e&&$1(H)){var V=c2(H);if(V.position==="fixed")return null}var t=t3(H);for(H7(t)&&(t=t.host);$1(t)&&["html","body"].indexOf(X1(t))<0;){var r=c2(t);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||C&&r.willChange==="filter"||C&&r.filter&&r.filter!=="none")return t;t=t.parentNode}return null}function p5(H){for(var C=S1(H),e=ao(H);e&&OH(e)&&c2(e).position==="static";)e=ao(e);return e&&(X1(e)==="html"||X1(e)==="body"&&c2(e).position==="static")?C:e||qv(H)||C}function a0(H){return["top","bottom"].indexOf(H)>=0?"x":"y"}function l0(H,C,e){return d5(H,o0(C,e))}function lo(H,C,e){var V=l0(H,C,e);return V>e?e:V}function A4(){return{top:0,right:0,bottom:0,left:0}}function d4(H){return Object.assign({},A4(),H)}function p4(H,C){return C.reduce(function(e,V){return e[V]=H,e},{})}var jv=function(C,e){return C=typeof C=="function"?C(Object.assign({},e.rects,{placement:e.placement})):C,d4(typeof C!="number"?C:p4(C,b3))};function Jv(H){var C,e=H.state,V=H.name,t=H.options,r=e.elements.arrow,i=e.modifiersData.popperOffsets,o=Y1(e.placement),n=a0(o),l=[w1,F1].indexOf(o)>=0,s=l?"height":"width";if(!(!r||!i)){var d=jv(t.padding,e),p=n0(r),m=n==="y"?y1:w1,c=n==="y"?G1:F1,h=e.rects.reference[s]+e.rects.reference[n]-i[n]-e.rects.popper[s],S=i[n]-e.rects.reference[n],O=p5(r),E=O?n==="y"?O.clientHeight||0:O.clientWidth||0:0,D=h/2-S/2,N=d[m],R=E-p[s]-d[c],W=E/2-p[s]/2+D,X=l0(N,W,R),i1=n;e.modifiersData[V]=(C={},C[i1]=X,C.centerOffset=X-W,C)}}function Xv(H){var C=H.state,e=H.options,V=e.element,t=V===void 0?"[data-popper-arrow]":V;t!=null&&(typeof t=="string"&&(t=C.elements.popper.querySelector(t),!t)||s4(C.elements.popper,t)&&(C.elements.arrow=t))}var so={name:"arrow",enabled:!0,phase:"main",fn:Jv,effect:Xv,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function H5(H){return H.split("-")[1]}var Yv={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Ch(H,C){var e=H.x,V=H.y,t=C.devicePixelRatio||1;return{x:V3(e*t)/t||0,y:V3(V*t)/t||0}}function Ao(H){var C,e=H.popper,V=H.popperRect,t=H.placement,r=H.variation,i=H.offsets,o=H.position,n=H.gpuAcceleration,l=H.adaptive,s=H.roundOffsets,d=H.isFixed,p=i.x,m=p===void 0?0:p,c=i.y,h=c===void 0?0:c,S=typeof s=="function"?s({x:m,y:h}):{x:m,y:h};m=S.x,h=S.y;var O=i.hasOwnProperty("x"),E=i.hasOwnProperty("y"),D=w1,N=y1,R=window;if(l){var W=p5(e),X="clientHeight",i1="clientWidth";if(W===S1(e)&&(W=t2(e),c2(W).position!=="static"&&o==="absolute"&&(X="scrollHeight",i1="scrollWidth")),W=W,t===y1||(t===w1||t===F1)&&r===M0){N=G1;var $=d&&W===R&&R.visualViewport?R.visualViewport.height:W[X];h-=$-V.height,h*=n?1:-1}if(t===w1||(t===y1||t===G1)&&r===M0){D=F1;var a1=d&&W===R&&R.visualViewport?R.visualViewport.width:W[i1];m-=a1-V.width,m*=n?1:-1}}var m1=Object.assign({position:o},l&&Yv),T1=s===!0?Ch({x:m,y:h},S1(e)):{x:m,y:h};if(m=T1.x,h=T1.y,n){var P1;return Object.assign({},m1,(P1={},P1[N]=E?"0":"",P1[D]=O?"0":"",P1.transform=(R.devicePixelRatio||1)<=1?"translate("+m+"px, "+h+"px)":"translate3d("+m+"px, "+h+"px, 0)",P1))}return Object.assign({},m1,(C={},C[N]=E?h+"px":"",C[D]=O?m+"px":"",C.transform="",C))}function eh(H){var C=H.state,e=H.options,V=e.gpuAcceleration,t=V===void 0?!0:V,r=e.adaptive,i=r===void 0?!0:r,o=e.roundOffsets,n=o===void 0?!0:o,l={placement:Y1(C.placement),variation:H5(C.placement),popper:C.elements.popper,popperRect:C.rects.popper,gpuAcceleration:t,isFixed:C.options.strategy==="fixed"};C.modifiersData.popperOffsets!=null&&(C.styles.popper=Object.assign({},C.styles.popper,Ao(Object.assign({},l,{offsets:C.modifiersData.popperOffsets,position:C.options.strategy,adaptive:i,roundOffsets:n})))),C.modifiersData.arrow!=null&&(C.styles.arrow=Object.assign({},C.styles.arrow,Ao(Object.assign({},l,{offsets:C.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:n})))),C.attributes.popper=Object.assign({},C.attributes.popper,{"data-popper-placement":C.placement})}var po={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:eh,data:{}};var G6={passive:!0};function Hh(H){var C=H.state,e=H.instance,V=H.options,t=V.scroll,r=t===void 0?!0:t,i=V.resize,o=i===void 0?!0:i,n=S1(C.elements.popper),l=[].concat(C.scrollParents.reference,C.scrollParents.popper);return r&&l.forEach(function(s){s.addEventListener("scroll",e.update,G6)}),o&&n.addEventListener("resize",e.update,G6),function(){r&&l.forEach(function(s){s.removeEventListener("scroll",e.update,G6)}),o&&n.removeEventListener("resize",e.update,G6)}}var uo={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Hh,data:{}};var Vh={left:"right",right:"left",bottom:"top",top:"bottom"};function t7(H){return H.replace(/left|right|bottom|top/g,function(C){return Vh[C]})}var th={start:"end",end:"start"};function $6(H){return H.replace(/start|end/g,function(C){return th[C]})}function s0(H){var C=S1(H),e=C.pageXOffset,V=C.pageYOffset;return{scrollLeft:e,scrollTop:V}}function A0(H){return e5(t2(H)).left+s0(H).scrollLeft}function yH(H,C){var e=S1(H),V=t2(H),t=e.visualViewport,r=V.clientWidth,i=V.clientHeight,o=0,n=0;if(t){r=t.width,i=t.height;var l=l4();(l||!l&&C==="fixed")&&(o=t.offsetLeft,n=t.offsetTop)}return{width:r,height:i,x:o+A0(H),y:n}}function kH(H){var C,e=t2(H),V=s0(H),t=(C=H.ownerDocument)==null?void 0:C.body,r=d5(e.scrollWidth,e.clientWidth,t?t.scrollWidth:0,t?t.clientWidth:0),i=d5(e.scrollHeight,e.clientHeight,t?t.scrollHeight:0,t?t.clientHeight:0),o=-V.scrollLeft+A0(H),n=-V.scrollTop;return c2(t||e).direction==="rtl"&&(o+=d5(e.clientWidth,t?t.clientWidth:0)-r),{width:r,height:i,x:o,y:n}}function d0(H){var C=c2(H),e=C.overflow,V=C.overflowX,t=C.overflowY;return/auto|scroll|overlay|hidden/.test(e+t+V)}function K6(H){return["html","body","#document"].indexOf(X1(H))>=0?H.ownerDocument.body:$1(H)&&d0(H)?H:K6(t3(H))}function w3(H,C){var e;C===void 0&&(C=[]);var V=K6(H),t=V===((e=H.ownerDocument)==null?void 0:e.body),r=S1(V),i=t?[r].concat(r.visualViewport||[],d0(V)?V:[]):V,o=C.concat(i);return t?o:o.concat(w3(t3(i)))}function L7(H){return Object.assign({},H,{left:H.x,top:H.y,right:H.x+H.width,bottom:H.y+H.height})}function Lh(H,C){var e=e5(H,!1,C==="fixed");return e.top=e.top+H.clientTop,e.left=e.left+H.clientLeft,e.bottom=e.top+H.clientHeight,e.right=e.left+H.clientWidth,e.width=H.clientWidth,e.height=H.clientHeight,e.x=e.left,e.y=e.top,e}function mo(H,C,e){return C===z6?L7(yH(H,e)):C5(C)?Lh(C,e):L7(kH(t2(H)))}function rh(H){var C=w3(t3(H)),e=["absolute","fixed"].indexOf(c2(H).position)>=0,V=e&&$1(H)?p5(H):H;return C5(V)?C.filter(function(t){return C5(t)&&s4(t,V)&&X1(t)!=="body"}):[]}function bH(H,C,e,V){var t=C==="clippingParents"?rh(H):[].concat(C),r=[].concat(t,[e]),i=r[0],o=r.reduce(function(n,l){var s=mo(H,l,V);return n.top=d5(s.top,n.top),n.right=o0(s.right,n.right),n.bottom=o0(s.bottom,n.bottom),n.left=d5(s.left,n.left),n},mo(H,i,V));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function u4(H){var C=H.reference,e=H.element,V=H.placement,t=V?Y1(V):null,r=V?H5(V):null,i=C.x+C.width/2-e.width/2,o=C.y+C.height/2-e.height/2,n;switch(t){case y1:n={x:i,y:C.y-e.height};break;case G1:n={x:i,y:C.y+C.height};break;case F1:n={x:C.x+C.width,y:o};break;case w1:n={x:C.x-e.width,y:o};break;default:n={x:C.x,y:C.y}}var l=t?a0(t):null;if(l!=null){var s=l==="y"?"height":"width";switch(r){case H3:n[l]=n[l]-(C[s]/2-e[s]/2);break;case M0:n[l]=n[l]+(C[s]/2-e[s]/2);break;default:}}return n}function u5(H,C){C===void 0&&(C={});var e=C,V=e.placement,t=V===void 0?H.placement:V,r=e.strategy,i=r===void 0?H.strategy:r,o=e.boundary,n=o===void 0?io:o,l=e.rootBoundary,s=l===void 0?z6:l,d=e.elementContext,p=d===void 0?e7:d,m=e.altBoundary,c=m===void 0?!1:m,h=e.padding,S=h===void 0?0:h,O=d4(typeof S!="number"?S:p4(S,b3)),E=p===e7?Mo:e7,D=H.rects.popper,N=H.elements[c?E:p],R=bH(C5(N)?N:N.contextElement||t2(H.elements.popper),n,s,i),W=e5(H.elements.reference),X=u4({reference:W,element:D,strategy:"absolute",placement:t}),i1=L7(Object.assign({},D,X)),$=p===e7?i1:W,a1={top:R.top-$.top+O.top,bottom:$.bottom-R.bottom+O.bottom,left:R.left-$.left+O.left,right:$.right-R.right+O.right},m1=H.modifiersData.offset;if(p===e7&&m1){var T1=m1[t];Object.keys(a1).forEach(function(P1){var y2=[F1,G1].indexOf(P1)>=0?1:-1,B1=[y1,G1].indexOf(P1)>=0?"y":"x";a1[P1]+=T1[B1]*y2})}return a1}function wH(H,C){C===void 0&&(C={});var e=C,V=e.placement,t=e.boundary,r=e.rootBoundary,i=e.padding,o=e.flipVariations,n=e.allowedAutoPlacements,l=n===void 0?U6:n,s=H5(V),d=s?o?gH:gH.filter(function(c){return H5(c)===s}):b3,p=d.filter(function(c){return l.indexOf(c)>=0});p.length===0&&(p=d);var m=p.reduce(function(c,h){return c[h]=u5(H,{placement:h,boundary:t,rootBoundary:r,padding:i})[Y1(h)],c},{});return Object.keys(m).sort(function(c,h){return m[c]-m[h]})}function ih(H){if(Y1(H)===W6)return[];var C=t7(H);return[$6(H),C,$6(C)]}function Mh(H){var C=H.state,e=H.options,V=H.name;if(!C.modifiersData[V]._skip){for(var t=e.mainAxis,r=t===void 0?!0:t,i=e.altAxis,o=i===void 0?!0:i,n=e.fallbackPlacements,l=e.padding,s=e.boundary,d=e.rootBoundary,p=e.altBoundary,m=e.flipVariations,c=m===void 0?!0:m,h=e.allowedAutoPlacements,S=C.options.placement,O=Y1(S),E=O===S,D=n||(E||!c?[t7(S)]:ih(S)),N=[S].concat(D).reduce(function(t5,m5){return t5.concat(Y1(m5)===W6?wH(C,{placement:m5,boundary:s,rootBoundary:d,padding:l,flipVariations:c,allowedAutoPlacements:h}):m5)},[]),R=C.rects.reference,W=C.rects.popper,X=new Map,i1=!0,$=N[0],a1=0;a1<N.length;a1++){var m1=N[a1],T1=Y1(m1),P1=H5(m1)===H3,y2=[y1,G1].indexOf(T1)>=0,B1=y2?"width":"height",d1=u5(C,{placement:m1,boundary:s,rootBoundary:d,altBoundary:p,padding:l}),D1=y2?P1?F1:w1:P1?G1:y1;R[B1]>W[B1]&&(D1=t7(D1));var T5=t7(D1),K1=[];if(r&&K1.push(d1[T1]<=0),o&&K1.push(d1[D1]<=0,d1[T5]<=0),K1.every(function(t5){return t5})){$=m1,i1=!1;break}X.set(m1,K1)}if(i1)for(var u0=c?3:1,i7=function(m5){var L5=N.find(function(c5){var P5=X.get(c5);if(P5)return P5.slice(0,m5).every(function(L3){return L3})});if(L5)return $=L5,"break"},T3=u0;T3>0;T3--){var V5=i7(T3);if(V5==="break")break}C.placement!==$&&(C.modifiersData[V]._skip=!0,C.placement=$,C.reset=!0)}}var co={name:"flip",enabled:!0,phase:"main",fn:Mh,requiresIfExists:["offset"],data:{_skip:!1}};function fo(H,C,e){return e===void 0&&(e={x:0,y:0}),{top:H.top-C.height-e.y,right:H.right-C.width+e.x,bottom:H.bottom-C.height+e.y,left:H.left-C.width-e.x}}function xo(H){return[y1,F1,G1,w1].some(function(C){return H[C]>=0})}function oh(H){var C=H.state,e=H.name,V=C.rects.reference,t=C.rects.popper,r=C.modifiersData.preventOverflow,i=u5(C,{elementContext:"reference"}),o=u5(C,{altBoundary:!0}),n=fo(i,V),l=fo(o,t,r),s=xo(n),d=xo(l);C.modifiersData[e]={referenceClippingOffsets:n,popperEscapeOffsets:l,isReferenceHidden:s,hasPopperEscaped:d},C.attributes.popper=Object.assign({},C.attributes.popper,{"data-popper-reference-hidden":s,"data-popper-escaped":d})}var vo={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:oh};function nh(H,C,e){var V=Y1(H),t=[w1,y1].indexOf(V)>=0?-1:1,r=typeof e=="function"?e(Object.assign({},C,{placement:H})):e,i=r[0],o=r[1];return i=i||0,o=(o||0)*t,[w1,F1].indexOf(V)>=0?{x:o,y:i}:{x:i,y:o}}function ah(H){var C=H.state,e=H.options,V=H.name,t=e.offset,r=t===void 0?[0,0]:t,i=U6.reduce(function(s,d){return s[d]=nh(d,C.rects,r),s},{}),o=i[C.placement],n=o.x,l=o.y;C.modifiersData.popperOffsets!=null&&(C.modifiersData.popperOffsets.x+=n,C.modifiersData.popperOffsets.y+=l),C.modifiersData[V]=i}var ho={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:ah};function lh(H){var C=H.state,e=H.name;C.modifiersData[e]=u4({reference:C.rects.reference,element:C.rects.popper,strategy:"absolute",placement:C.placement})}var Zo={name:"popperOffsets",enabled:!0,phase:"read",fn:lh,data:{}};function TH(H){return H==="x"?"y":"x"}function sh(H){var C=H.state,e=H.options,V=H.name,t=e.mainAxis,r=t===void 0?!0:t,i=e.altAxis,o=i===void 0?!1:i,n=e.boundary,l=e.rootBoundary,s=e.altBoundary,d=e.padding,p=e.tether,m=p===void 0?!0:p,c=e.tetherOffset,h=c===void 0?0:c,S=u5(C,{boundary:n,rootBoundary:l,padding:d,altBoundary:s}),O=Y1(C.placement),E=H5(C.placement),D=!E,N=a0(O),R=TH(N),W=C.modifiersData.popperOffsets,X=C.rects.reference,i1=C.rects.popper,$=typeof h=="function"?h(Object.assign({},C.rects,{placement:C.placement})):h,a1=typeof $=="number"?{mainAxis:$,altAxis:$}:Object.assign({mainAxis:0,altAxis:0},$),m1=C.modifiersData.offset?C.modifiersData.offset[C.placement]:null,T1={x:0,y:0};if(W){if(r){var P1,y2=N==="y"?y1:w1,B1=N==="y"?G1:F1,d1=N==="y"?"height":"width",D1=W[N],T5=D1+S[y2],K1=D1-S[B1],u0=m?-i1[d1]/2:0,i7=E===H3?X[d1]:i1[d1],T3=E===H3?-i1[d1]:-X[d1],V5=C.elements.arrow,t5=m&&V5?n0(V5):{width:0,height:0},m5=C.modifiersData["arrow#persistent"]?C.modifiersData["arrow#persistent"].padding:A4(),L5=m5[y2],c5=m5[B1],P5=l0(0,X[d1],t5[d1]),L3=D?X[d1]/2-u0-P5-L5-a1.mainAxis:i7-P5-L5-a1.mainAxis,m0=D?-X[d1]/2+u0+P5+c5+a1.mainAxis:T3+P5+c5+a1.mainAxis,c0=C.elements.arrow&&p5(C.elements.arrow),k2=c0?N==="y"?c0.clientTop||0:c0.clientLeft||0:0,r3=(P1=m1?.[N])!=null?P1:0,q6=D1+L3-r3-k2,r5=D1+m0-r3,M7=l0(m?o0(T5,q6):T5,D1,m?d5(K1,r5):K1);W[N]=M7,T1[N]=M7-D1}if(o){var c4,P3=N==="x"?y1:w1,b2=N==="x"?G1:F1,w2=W[R],B5=R==="y"?"height":"width",f4=w2+S[P3],i3=w2-S[b2],o7=[y1,w1].indexOf(O)!==-1,M3=(c4=m1?.[R])!=null?c4:0,E5=o7?f4:w2-X[B5]-i1[B5]-M3+a1.altAxis,f0=o7?w2+X[B5]+i1[B5]-M3-a1.altAxis:i3,x0=m&&o7?lo(E5,w2,f0):l0(m?E5:f4,w2,m?f0:i3);W[R]=x0,T1[R]=x0-w2}C.modifiersData[V]=T1}}var So={name:"preventOverflow",enabled:!0,phase:"main",fn:sh,requiresIfExists:["offset"]};function PH(H){return{scrollLeft:H.scrollLeft,scrollTop:H.scrollTop}}function BH(H){return H===S1(H)||!$1(H)?s0(H):PH(H)}function Ah(H){var C=H.getBoundingClientRect(),e=V3(C.width)/H.offsetWidth||1,V=V3(C.height)/H.offsetHeight||1;return e!==1||V!==1}function EH(H,C,e){e===void 0&&(e=!1);var V=$1(C),t=$1(C)&&Ah(C),r=t2(C),i=e5(H,t,e),o={scrollLeft:0,scrollTop:0},n={x:0,y:0};return(V||!V&&!e)&&((X1(C)!=="body"||d0(r))&&(o=BH(C)),$1(C)?(n=e5(C,!0),n.x+=C.clientLeft,n.y+=C.clientTop):r&&(n.x=A0(r))),{x:i.left+o.scrollLeft-n.x,y:i.top+o.scrollTop-n.y,width:i.width,height:i.height}}function dh(H){var C=new Map,e=new Set,V=[];H.forEach(function(r){C.set(r.name,r)});function t(r){e.add(r.name);var i=[].concat(r.requires||[],r.requiresIfExists||[]);i.forEach(function(o){if(!e.has(o)){var n=C.get(o);n&&t(n)}}),V.push(r)}return H.forEach(function(r){e.has(r.name)||t(r)}),V}function RH(H){var C=dh(H);return oo.reduce(function(e,V){return e.concat(C.filter(function(t){return t.phase===V}))},[])}function FH(H){var C;return function(){return C||(C=new Promise(function(e){Promise.resolve().then(function(){C=void 0,e(H())})})),C}}function DH(H){var C=H.reduce(function(e,V){var t=e[V.name];return e[V.name]=t?Object.assign({},t,V,{options:Object.assign({},t.options,V.options),data:Object.assign({},t.data,V.data)}):V,e},{});return Object.keys(C).map(function(e){return C[e]})}var go={placement:"bottom",modifiers:[],strategy:"absolute"};function Oo(){for(var H=arguments.length,C=new Array(H),e=0;e<H;e++)C[e]=arguments[e];return!C.some(function(V){return!(V&&typeof V.getBoundingClientRect=="function")})}function yo(H){H===void 0&&(H={});var C=H,e=C.defaultModifiers,V=e===void 0?[]:e,t=C.defaultOptions,r=t===void 0?go:t;return function(o,n,l){l===void 0&&(l=r);var s={placement:"bottom",orderedModifiers:[],options:Object.assign({},go,r),modifiersData:{},elements:{reference:o,popper:n},attributes:{},styles:{}},d=[],p=!1,m={state:s,setOptions:function(O){var E=typeof O=="function"?O(s.options):O;h(),s.options=Object.assign({},r,s.options,E),s.scrollParents={reference:C5(o)?w3(o):o.contextElement?w3(o.contextElement):[],popper:w3(n)};var D=RH(DH([].concat(V,s.options.modifiers)));return s.orderedModifiers=D.filter(function(N){return N.enabled}),c(),m.update()},forceUpdate:function(){if(!p){var O=s.elements,E=O.reference,D=O.popper;if(Oo(E,D)){s.rects={reference:EH(E,p5(D),s.options.strategy==="fixed"),popper:n0(D)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach(function(a1){return s.modifiersData[a1.name]=Object.assign({},a1.data)});for(var N=0;N<s.orderedModifiers.length;N++){if(s.reset===!0){s.reset=!1,N=-1;continue}var R=s.orderedModifiers[N],W=R.fn,X=R.options,i1=X===void 0?{}:X,$=R.name;typeof W=="function"&&(s=W({state:s,options:i1,name:$,instance:m})||s)}}}},update:FH(function(){return new Promise(function(S){m.forceUpdate(),S(s)})}),destroy:function(){h(),p=!0}};if(!Oo(o,n))return m;m.setOptions(l).then(function(S){!p&&l.onFirstUpdate&&l.onFirstUpdate(S)});function c(){s.orderedModifiers.forEach(function(S){var O=S.name,E=S.options,D=E===void 0?{}:E,N=S.effect;if(typeof N=="function"){var R=N({state:s,name:O,instance:m,options:D}),W=function(){};d.push(R||W)}})}function h(){d.forEach(function(S){return S()}),d=[]}return m}}var ph=[uo,Zo,po,no,ho,co,So,so,vo],NH=yo({defaultModifiers:ph});window.FPRichEditor.registerPlugin("link",{buttons:function(){return[{name:"unlink",icon:IM,label:"Insert a link",action:function(H,C){H.chain().focus().unsetLink().run()}},{name:"link",icon:NM,active:"link",disabled:"setLink",action:function(H,C){let e=H.getAttributes("link");C.openModal("link-dialog",e)}}]},tiptap(){let{Mark:H,mergeAttributes:C}=FPRichEditor.tiptap;return H.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:null}}},parseHTML(){return[{tag:"a[href]"}]},renderHTML({HTMLAttributes:e}){return["a",C(this.options.HTMLAttributes,e),0]},addCommands(){return{setLink:e=>({chain:V})=>V().setMark(this.name,e).setMeta("preventAutolink",!0).run(),toggleLink:e=>({chain:V})=>V().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}}})}});var ko=0,IH=class{constructor(C,e,V){j1(this,"_placement","bottom");j1(this,"_closeOnClickout",!0);j1(this,"_closeOnEscape",!0);j1(this,"_script",null);j1(this,"_popper");j1(this,"_el");j1(this,"_title");j1(this,"_dataMethod");this._contents=C,this._anchor=e,this.checkClickout=this.checkClickout.bind(this),this.checkForEscape=this.checkForEscape.bind(this),this._editor=V}closeOnClickout(C){return this._closeOnClickout=C,this}closeOnEscape(C){return this._closeOnEscape=C,this}title(C){return this._title=C,this}script(C){return this._script=C,this}show(){this._el=document.createElement("div"),this._el.classList.add("fp-rich-editor-popper");let C=document.createElement("div");C.classList.add("fp-rich-editor-popper-arrow"),C.innerHTML='<div class="arrow-inner"></div>',this._el.appendChild(C);let e=document.createElement("div");if(e.classList.add("fp-rich-editor-popper-inner"),this._title){let t=document.createElement("div");t.classList.add("fp-rich-editor-popper-title"),t.innerText=this._title,e.appendChild(t)}let V=document.createElement("div");if(V.classList.add("fp-rich-editor-popper-body"),this._script){ko++,this._dataMethod="TipTapDialogData"+ko,V.setAttribute("x-data",this._dataMethod),window[this._dataMethod]=this._script,window[this._dataMethod].editor=this._editor;let t=this;window[this._dataMethod].closePopper=function(){t.destroy()}}return V.innerHTML=this._contents,e.appendChild(V),this._el.appendChild(e),document.querySelector("body").append(this._el),this._popper=NH(this._anchor,this._el,{placement:this._placement,modifiers:[{name:"arrow",options:{element:C,padding:5}},{name:"offset",options:{offset:[0,10]}}]}),this._closeOnClickout&&document.addEventListener("mousedown",this.checkClickout),this._closeOnEscape&&document.addEventListener("keyup",this.checkForEscape),setTimeout(()=>{this._el.querySelector("[autofocus]").focus()}),this}checkForEscape(C){C.key==="Escape"&&this.destroy()}checkClickout(C){this._el.contains(C.target)||this.destroy()}destroy(){document.removeEventListener("mousedown",this.checkClickout),document.removeEventListener("keyup",this.checkForEscape),this._dataMethod&&delete window[this._dataMethod],this._popper&&(this._popper.destroy(),this._popper=null,this._el.remove(),this._el=null)}},bo=IH;var uh=/^\s*>\s$/,wo=U1.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:H}){return["blockquote",x1(this.options.HTMLAttributes,H),0]},addCommands(){return{setBlockquote:()=>({commands:H})=>H.wrapIn(this.name),toggleBlockquote:()=>({commands:H})=>H.toggleWrap(this.name),unsetBlockquote:()=>({commands:H})=>H.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[C3({find:uh,type:this.type})]}});window.FPRichEditor.registerPlugin("blockquote",{label:"Blockquote",active:"blockquote",buttons(){return[{name:"blockquote",label:"Blockquote",shortcut:"Mod-shift-b",icon:EM,active:"blockquote",disabled:"toggleBlockquote",action:function(H){H.chain().focus().toggleBlockquote().run()}}]},tiptap:wo});function mh(H){return FPRichEditor.tiptap.Node.create({name:"heading",addOptions(){return{levels:H,HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(C=>({tag:`h${C}`,attrs:{level:C}}))},renderHTML({node:C,HTMLAttributes:e}){return[`h${this.options.levels.includes(C.attrs.level)?C.attrs.level:this.options.levels[0]}`,FPRichEditor.tiptap.mergeAttributes(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:C=>({commands:e})=>this.options.levels.includes(C.level)?e.setNode(this.name,C):!1,toggleHeading:C=>({commands:e})=>this.options.levels.includes(C.level)?e.toggleNode(this.name,"paragraph",C):!1}}})}window.FPRichEditor.registerPlugin("blocks",{label:"Blocks",active:"bold",buttons(){return[{name:"blocks",render(){let H=document.createElement("select");H.classList.add("fp-rich-editor-select-button");let C=document.createElement("option");return C.value="p",C.textContent="Paragraph",H.appendChild(C),this.commandMap={p:{command:"setParagraph",attrs:{}}},Array.isArray(this.plugin.config?.blocks)&&this.plugin.config.blocks.forEach(e=>{let V=document.createElement("option");this.commandMap[e.ident]=e,V.value=e.ident,V.textContent=e.label,H.appendChild(V)}),H.onchange=e=>{let V=this.commandMap[e.target.value];V&&this.editor.tiptapCommand(V.command,V.attrs)},this.select=H,H},active(H){let C="p";for(let e in this.commandMap){let V=this.commandMap[e];V.active&&this.editor.tiptap().isActive(V.active,V.attrs)&&(C=e)}this.select.value=C},disabled(H){let C=!1,e=[];for(let V in this.commandMap){let t=this.commandMap[V];t.disabled||H.can()[t.command](t.attrs)||e.push(t.command)}return e.length===Object.keys(this.commandMap).length}}]},headingLevels:[],tiptap:function(){let H=[];return this.headingLevels=[],Array.isArray(this.config?.blocks)&&this.config.blocks.forEach(C=>{C.attrs?.level&&this.headingLevels.push(C.attrs.level)}),this.headingLevels.length>0&&H.push(mh(this.headingLevels)),H}});window.FPRichEditor.registerPlugin("view_source",{buttons:function(){return[{name:"view_source",icon:_M,active:!1,label:"View Source",action:function(H,C){C.openModal("view-source",{source:H.getHTML()})}}]}});window.FPRichEditor.registerPlugin("help",{label:"Bold",active:"bold",buttons(){return[{name:"help",icon:DM,label:"Help",action:function(H,C){C.$wire.dispatchFormEvent("fp-rich-editor::showHelp",C.statePath,{})}}]}});var To=U1.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:H}){return["li",x1(this.options.HTMLAttributes,H),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}});window.FPRichEditor.registerPlugin("listItem",{tiptap:To});var ch="listItem",Po="textStyle",Bo=/^(\d+)\.\s$/,Eo=U1.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:H=>H.hasAttribute("start")?parseInt(H.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:H=>H.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:H}){let{start:C,...e}=H;return C===1?["ol",x1(this.options.HTMLAttributes,e),0]:["ol",x1(this.options.HTMLAttributes,H),0]},addCommands(){return{toggleOrderedList:()=>({commands:H,chain:C})=>this.options.keepAttributes?C().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ch,this.editor.getAttributes(Po)).run():H.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let H=C3({find:Bo,type:this.type,getAttributes:C=>({start:+C[1]}),joinPredicate:(C,e)=>e.childCount+e.attrs.start===+C[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(H=C3({find:Bo,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:C=>({start:+C[1],...this.editor.getAttributes(Po)}),joinPredicate:(C,e)=>e.childCount+e.attrs.start===+C[1],editor:this.editor})),[H]}});window.FPRichEditor.registerPlugin("orderedList",{label:"Ordered List",active:"strike",buttons(){return[{name:"orderedList",icon:BM,active:"orderedList",label:"Ordered list",action:function(H){H.chain().focus().toggleOrderedList().run()}}]},dependencies:["listItem"],tiptap:Eo});var fh="listItem",Ro="textStyle",Fo=/^\s*([-+*])\s$/,Do=U1.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:H}){return["ul",x1(this.options.HTMLAttributes,H),0]},addCommands(){return{toggleBulletList:()=>({commands:H,chain:C})=>this.options.keepAttributes?C().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(fh,this.editor.getAttributes(Ro)).run():H.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let H=C3({find:Fo,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(H=C3({find:Fo,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Ro),editor:this.editor})),[H]}});window.FPRichEditor.registerPlugin("unorderedList",{buttons(){return[{name:"unorderedList",icon:PM,active:"bulletList",label:"Unordered list",action:function(H){H.chain().focus().toggleBulletList().run()}}]},dependencies:["listItem"],tiptap:Do});var Go=Fu(No(),1);var _H=class{constructor(C,e,V){this.editor=C,this.event=e,this.slice=V;let{state:t,commands:r}=C,{selection:i,doc:o}=t;this.selection=i}get isNewLine(){return this.selection.$from.parent.content.size===0}},Io=_H;var xh=[];function vh(H){return new Promise((C,e)=>{let V=document.createElement("link");V.rel="stylesheet",V.href=H.src,V.onload=C,V.onerror=e,document.head.appendChild(V)})}function hh(H){return new Promise((C,e)=>{let V=document.createElement("script");V.src=H.src,H.module&&(V.type="module"),V.onload=C,V.onerror=e,document.head.appendChild(V)})}function _o(H){return new Promise((C,e)=>{let V=[];H.forEach(t=>{xh.includes(t.src)||(t.type==="script"?V.push(hh(t)):t.type==="css"&&V.push(vh(t)))}),Promise.all(V).then(C).catch(e)})}var Wo=0,p0={},Q6=0,WH={};window.FPRichEditor.tiptap=qe;function Zh(H){for(let C in p0){let e=p0[C];if(H===e.component.statePath)return e}}var zo=!1,$o=function({plugins:H,buttons:C,placeholder:e,statePath:V,stickyToolbar:t,state:r,withHelp:i,pluginExternals:o}){return{editorId:null,focused:!1,statePath:V,state:r,plugins:H,buttons:C,placeholder:e,stickyToolbar:t,withHelp:i,toolbar:null,pluginInstances:[],updatedAt:Date.now(),suppressUpdate:!1,init(){zo||(Livewire.on("modalAction",n=>{setTimeout(()=>{let l=new CustomEvent("modal-action",{bubble:!0,detail:n});window.dispatchEvent(l)},100)}),Livewire.on("fpServerResponse",n=>{if(Zh(n.statePath)&&n.ident){let s=WH[n.ident];s&&(s.resolve(n.response),delete WH[n.ident])}}),zo=!0),this.loadExternals().then(()=>{Wo++,this.editorId=Wo,this.createEditor();let n=()=>{this.setToolbarTop()};this.$watch("state",(l,s)=>{typeof l<"u"&&((0,Go.isEqual)(s,Alpine.raw(l))||(this.suppressUpdate||this.setContent(l),this.suppressUpdate=!1))}),this.setToolbarTop=this.setToolbarTop.bind(this),this.$nextTick(()=>{window.addEventListener("resize",this.setToolbarTop),this.setToolbarTop()})})},loadExternals(){return _o(o)},destroy(){window.removeEventListener("resize",this.setToolbarTop),p0[this.editorId]&&delete p0[this.editorId]},setToolbarTop(){let n=this.editorInstance().toolbar;if(!n)return;if(!this.stickyToolbar){n.classList.contains("fp-rich-editor-toolbar-sticky")&&n.classList.remove("fp-rich-editor-toolbar-sticky");return}let l=document.querySelector(".fi-topbar"),s=l.classList.contains("sticky")?l.offsetHeight:0;n.classList.contains("fp-rich-editor-toolbar-sticky")||n.classList.add("fp-rich-editor-toolbar-sticky"),n.style.top=s+"px"},_loadPlugin(n){let l=[],s={};typeof n=="object"&&(s=n.config?n.config:{},n=n.name);let d=window.FPRichEditor.plugins[n];if(!d){console.warn("Unknown editor plugin "+n);return}let p=this.editorInstance().registerPlugin(n,d,s);if(Array.isArray(p.dependencies)&&p.dependencies.forEach(m=>{if(!this.editorInstance().pluginRegistered(m)){let c=this._loadPlugin(m);l=l.concat(c)}}),p.tiptap){let m=typeof p.tiptap=="function"?p.tiptap(s):p.tiptap;Array.isArray(m)?m.forEach(c=>{l.push(c)}):l.push(m)}return l},getPlugins(){let n=[SM,gM,vM,AM,hM,pM,uM];return this.placeholder&&n.push(ZM.configure({placeholder:this.placeholder})),Array.isArray(this.plugins)&&this.plugins.forEach(l=>{let s=this._loadPlugin(l);n=n.concat(s)}),this.withHelp&&this.editorInstance().registerPlugin("help",window.FPRichEditor.plugins.help,{}),n},editorInstance(){return p0[this.editorId]||(p0[this.editorId]=new yM(this)),p0[this.editorId]},buildToolbar(){let n={};for(let l in this.editorInstance().plugins){let s=this.editorInstance().plugins[l];s.buttons&&s.buttons().forEach(d=>{n[d.name]=new kM(d,s,this)})}if(toolbar=this.$el.querySelector(".fp-rich-editor-toolbar"),this.editorInstance().setToolbar(toolbar),this.buttons.forEach(l=>{if(l==="|"){let d=document.createElement("div");d.classList.add("fp-rich-editor-separator"),toolbar.appendChild(d);return}let s=n[l];s&&(toolbar.appendChild(s.render()),this.editorInstance().registerRenderedButton(l,s))}),this.withHelp){let l=n.help,s=document.createElement("div");s.classList.add("fp-toolbar-spacer"),toolbar.appendChild(s),toolbar.appendChild(l.render()),this.editorInstance().registerRenderedButton("help",l)}},createEditor(){let n=this.$el.querySelector(".fp-rich-editor-content"),l=this,s=this.editorInstance(this),d=new J7({element:n,extensions:l.getPlugins(),editable:!l.disabled,content:this.state,onBlur(p){l.focused=!1,l.updatedAt=Date.now()},onFocus(){l.focused=!0,l.updatedAt=Date.now()},onUpdate({editor:p}){l.suppressUpdate=!0,l.state=p.isEmpty?null:p.getHTML(),l.updatedAt=Date.now(),l.selectionUpdated()},onSelectionUpdate(){l.selectionUpdated()},onPaste(p,m){if(!(p.clipboardData||window.clipboardData)){console.log("Clipboard data not supported");return}let h=new Io(d,p,m);l.callPluginHook("onPaste",p,m,d)}});s.bind(d),this.buildToolbar()},requestFromServer(n,l){return new Promise((s,d)=>{Q6++,WH[Q6]={method:n,args:l,id:Q6,resolve:s,reject:d},this.$wire.dispatchFormEvent("fp-rich-editor::serverRequest",this.statePath,{statePath:this.statePath,ident:Q6,method:n,args:l})})},callPluginHook(n,...l){let s=this.editorInstance().plugins;for(let d in s){let p=s[d];typeof p[n]=="function"&&p[n](...l)}},buttonAction(n){let l=this.editorInstance().getRegisteredButton(n);l&&l.exec(this.editorInstance())},selectionUpdated(){let n=this.editorInstance().toolbar;n.querySelectorAll(".fp-rich-editor-active-btn").forEach(s=>{s.classList.remove("fp-rich-editor-active-btn")}),n.querySelectorAll("[disabled]").forEach(s=>{s.removeAttribute("disabled")}),Object.values(this.editorInstance().renderedButtons).forEach(s=>{s.active(this.tiptap(),this)&&s.el.classList.add("fp-rich-editor-active-btn"),s.disabled(this.tiptap(),this)&&s.el.setAttribute("disabled","disabled")})},tiptap(){return this.editorInstance().editor},createPopper(n,l){let s=this.$el.querySelector('template[name="'+n+'"]').innerHTML;return new bo(s,l,this)},openModal(n,l={}){l._coordinates||(l._coordinates=this.editorInstance().editor.view.state.selection.ranges),this.$wire.dispatchFormEvent("fp-rich-editor::showModal",this.statePath,{name:n,args:l})},tiptapCommand(n,l={}){this.editorInstance().editor.chain().focus()[n](l).run()},modalAction(n){let l=n.detail;if(l.statePath!==this.statePath||!l.action)return;let s=this.editorInstance().editor.chain().focus();Array.isArray(l.coordinates)&&l.coordinates.length&&s.setTextSelection({from:l.coordinates[0].$from.pos,to:l.coordinates[0].$to.pos}),typeof this[l.action]=="function"?this[l.action](l.args,s):(s[l.action](l.args),s.selectTextblockEnd().run())},setContent(n){let l=typeof n=="string"?n:n.content,s=this.tiptap();if(this.tiptap().isEditable){let{from:d,to:p}=s.state.selection;this.tiptap().commands.setContent(l)}},unsetLink(n={},l=null){l=l||this.editorInstance().editor.chain().focus(),l.extendMarkRange("link").unsetLink().selectTextblockEnd().run()},ajax(n,l={},s="post"){let d=document.querySelector('meta[name="csrf-token"]').getAttribute("content");return new Promise((p,m)=>{fetch(n,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":d},body:JSON.stringify(l),credentials:"include"}).then(c=>{c.ok?c.json().then(h=>{p(h)}).catch(h=>{m(h)}):m(c)}).catch(c=>{m(c)})})}}};function Uo(){Alpine.data("FPRichEditor",$o)}window.Alpine?Uo():document.addEventListener("alpine:init",()=>{Uo()});var wb=$o;export{wb as default};
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
